if(typeof fjConfig==="undefined"){var fjConfig={}}fjConfig.execJS=function(js,isJson){return eval((isJson?"(":"")+js+(isJson?")":""))};(function(e){var d,p,b=d=p={noSaveObj:true,saveTypes:["FUJ"],ver:"20150101",initTheme:"concise",vdir:"/fj",widgetPath:"codes/flareJ"},g=window,o=document;b=d=p=e.extend(true,b,fjConfig);g.flareJ=g.FJ=g.fj=b;var f=new jQuery();if(f&&f.jquery){var q=f.jquery;if(q.indexOf(".")!=-1){d.jQversion=q.split(".")}}if(!p.rootPath){p.noLoadRes=true}d.objs={};d.get=function(s){if(d.objs[s]){return d.objs[s]}else{return null}};d.set=function(t,s){d.objs[t]=s};d.remove=function(s){delete d.objs[s]};var c=false,n=/xyz/.test(function(){xyz})?/\b_super\b|\b_base\b/:/.*/;d.Class=function(){};d.Class.extend=function(w){var v=this.prototype;c=true;var u=new this();c=false;for(var t in w){u[t]=typeof w[t]=="function"&&typeof v[t]=="function"&&n.test(w[t])?(function(y,z){return function(){var C=this._super,A=this._base;this._super=v[y];this._base=function(E,D){v[E].apply(this,D)};var B=z.apply(this,arguments);this._super=C;this._base=A;return B}})(t,w[t]):w[t]}function s(){if(!c&&this.init){this.init.apply(this,arguments)}}s.prototype=u;s.constructor=s;s.extend=arguments.callee;return s};d.log=function(s){if(!window.console){return}console.log(s)};d.error=function(s){throw new Error(s)};var m=d.ua=navigator.userAgent.toLowerCase();d.browser={version:(m.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],safari:/webkit/i.test(m)&&!this.chrome,opera:/opera/i.test(m),firefox:/firefox/i.test(m),ie:/msie/i.test(m)&&!/opera/.test(m),mozilla:/mozilla/i.test(m)&&!/(compatible|webkit)/.test(m)&&!this.chrome,chrome:/chrome/i.test(m)&&/webkit/i.test(m)&&/mozilla/i.test(m),android:m.indexOf("android")>-1,iphone:m.indexOf("iphone")>-1,ipad:m.indexOf("ipad")>-1,ipod:m.indexOf("ipod")>-1,windowsPhone:m.indexOf("windows phone")>-1};d.isIE=d.browser.ie||!!window.ActiveXObject||"ActiveXObject" in window;d.isIE6=d.isIE&&d.browser.version==6||document.documentMode==5;d.isIE7=d.isIE&&d.browser.version==7&&(!document.documentMode||document.documentMode==7)||document.documentMode==7;d.isIE8=d.isIE&&d.browser.version==8&&(!document.documentMode||document.documentMode==8)||document.documentMode==8;d.isIE9=d.isIE&&d.browser.version==9&&(!document.documentMode||document.documentMode==9)||document.documentMode==9;d.isIE10=d.isIE&&d.browser.version==10&&(!document.documentMode||document.documentMode==10)||document.documentMode==10;d.isIE11=d.isIE&&d.browser.version==11&&(!document.documentMode||document.documentMode==11)||document.documentMode==11;d.isIElt8=d.isIEno8=d.isIE6||d.isIE7;d.isIElt9=d.isIEno9=d.isIElt8||d.isIE8;d.isIElt10=d.isIEno10=d.isIElt9||d.isIE9;d.isIElt11=d.isIEno11=d.isIElt10||d.isIE10;d.isIEgt10=d.isIEup10=d.isIE10||d.isIE11;d.isIEgt9=d.isIEup9=d.isIE9||d.isIEgt10;d.isIEgt8=d.isIEup8=d.isIE8||d.isIEgt9;d.isFF=d.browser.mozilla&&!d.isIE11;d.isFFgt4=(function(){var s=false;if(d.isFF){if(parseFloat((m.substr(m.indexOf("firefox/")+8,m.length)).split(".")[0])>=4){s=true}}return s})();d.isChrome=d.browser.chrome;d.isSafari=d.browser.safari;d.isOpera=d.browser.opera;d.isAndroid=d.browser.android;d.isIphone=d.browser.iphone;d.isIpad=d.browser.ipad;d.isIpod=d.browser.ipod;d.isIos=d.isIphone||d.isIpad||d.isIpod;d.isWindowsPhone=d.browser.windowsPhone;d.isMobile=d.isAndroid||d.isIos||d.isWindowsPhone;d.isWebkit=d.isChrome||d.isSafari||d.isAndroid||d.isIos;d.isWinXP=m.indexOf("Windows nt 5.1")!=-1;d.isWinS2003=m.indexOf("Windows nt 5.2")!=-1;d.isWinVista=m.indexOf("Windows nt 6.0")!=-1;d.isWin7=m.indexOf("Windows nt 6.1")!=-1;d.isNaN=function(s){return s!==s};d.Array=d.arr={};d.arr.insertAt=function(s,t,u){s.splice(t,0,u)};d.arr.removeAt=function(s,t){s.splice(t,1)};d.arr.moveTo=function(t,u,s){d.arr.insertAt(t,s+1,t[u]);d.arr.removeAt(t,u)};d.arr.slice=function(w){try{return Array.prototype.slice.call(w)}catch(y){var u=[];for(var v=0,t=w.length;v<t;v++){u[v]=w[v]}return u}};d.topPosition=function(){return typeof window.pageYOffset!="undefined"?window.pageYOffset:document.documentElement&&document.documentElement.scrollTop!=null?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0};d.leftPosition=function(){return typeof window.pageXOffset!="undefined"?window.pageXOffset:document.documentElement&&document.documentElement.scrollLeft!=null?document.documentElement.scrollLeft:document.body.scrollLeft?document.body.scrollLeft:0};d.pageWidth=function(){return window.innerWidth!=null?window.innerWidth:document.documentElement&&document.documentElement.clientWidth!=null?document.documentElement.clientWidth:document.body!=null?document.body.clientWidth:null};d.globalWidth=d.pageWidth();d.pageHeight=function(){return window.innerHeight!=null?window.innerHeight:document.documentElement&&document.documentElement.clientHeight!=null?document.documentElement.clientHeight:document.body!=null?document.body.clientHeight:null};d.globalHeight=d.pageHeight();d.head=o.head||o.getElementsByTagName("head")[0];d.body=o.body;d.oBody=e(d.body);if(p.isMobile){e(document).on("touchstart",function(){p.bodyScrollTop=p.body.scrollTop})}d.lazyDo=function(v,u,w,y){var t=w!=null,s=null;if(!y){y=window}if(u==null){u=25}if(t&&y[w]){clearTimeout(y[w])}s=setTimeout(function(){v.call(y)},u);if(t){y[w]=s}return s};d.pollDo=function(v,t,w,y){var s=w!=null,u=null;if(!y){y=window}if(t==null){t=100}if(s&&y[w]){clearInterval(y[w])}u=setInterval(function(){if(v.call(y)===false){clearInterval(u)}},t);if(s){y[w]=u}return u};d.CSS=d.css={};d.CSS.cssReady=function(B,A){var z=document,C=z.createStyleSheet,u=C?"rules":"cssRules",D=C?"styleSheet":"sheet",w=z.getElementsByTagName("link");A||(A=w[w.length-1]);function v(){try{return A&&A[D]&&A[D][u]&&A[D][u][0]}catch(s){return false}}(function y(){v()&&setTimeout(B,0)||setTimeout(y,100)})()};d.CSS.execute=function(u,w,v,t){var s=p.css.create(w,u,t);if(v!=null){if(s){p.css.cssReady(v,s)}else{v()}}return s};d.CSS.create=function(v,t,s){if(e("#"+v).length){return false}if(!s){s="head"}var u=document.createElement("link");u.id=v;u.href=t+(p.ver?((t.indexOf("?")==-1?"?":"&")+"ver="+p.ver):"");u.rel="stylesheet";u.type="text/css";document.getElementsByTagName(s)[0].appendChild(u);return u};d.CSS.createStyle=function(z,y,v,w){var s=e("#"+z);if(s.length){s.remove()}if(!v){v="head"}var u=document.createElement("style");u.setAttribute("type","text/css");u.setAttribute("id",z);if(w){u.setAttribute("media",w)}if(u.styleSheet){u.styleSheet.cssText=y}else{var t=document.createTextNode(y);u.appendChild(t)}document.getElementsByTagName(v)[0].appendChild(u)};d.CSS.change=function(v,t,s){if(!d.CSS.create(v,t,s)){var u=document.getElementById(v);u.href=t+(p.ver?((t.indexOf("?")==-1?"?":"&")+"ver="+p.ver):"")}};d.JS=d.js={};d.JS.execute=function(B,s,A,v,w,t,y){if(!v){v="head"}if(s==null){s=d.cutResourceId(B)}var z=e("#"+s);if(z.length){if(!w){z.remove()}else{if(!t){if(A){A()}}else{t.loaded=1}return}}var u=document.createElement("script");u.id=s;u.type="text/javascript";u[d.isIElt9?"onreadystatechange":"onload"]=function(){if(!d.isIElt9||/loaded|complete/i.test(u.readyState)){if(y){var C=d.Loader.factorys.pop();C&&C.delay(d.Request.delQueryString(u.src))}if(!t){if(A){A()}}else{t.loaded=1}d.Loader.checkFail(u,false,d.isIElt9)}};u.onerror=function(){d.Loader.checkFail(u,true)};if(y){u.className=d.Loader.PRE_LOAD}u.src=B+(p.ver?((B.indexOf("?")==-1?"?":"&")+"ver="+p.ver):"");document.getElementsByTagName(v)[0].appendChild(u);return u};d.JS.multiExecute=function(y,z,v){var t=[],s=y.length;for(var u=0;u<s;u++){t[t.length]={}}for(var u=0;u<s;u++){var w=y[u];p.js.execute(w[0],w[2],1,v,w[1],t[u])}p.pollDo(function(){for(var A=0;A<s;A++){if(!t[A].loaded){return}}if(z){z();return false}})};if(typeof d.rootPath==="undefined"){d.rootPath="/JsLibrary/flareJ/"}d.cutResourceId=function(s){return s.substring(s.lastIndexOf("/")+1,s.lastIndexOf("."))};(d.setRootPath=function(s){d.rootPath=s;d.resPath=s+"resources/";d.imgPath=s+"resources/image/";d.cssPath=s+"resources/css/";d.mediaPath=s+"resources/media/";d.svgPath=s+"resources/svg/";d.themePath=s+"resources/theme/";if(!p.isMobile&&!window.swfobject&&!p.noLoadRes){d.JS.execute(d.rootPath+"resources/swf/swfobject.js")}})(d.rootPath);d.getRootPath=function(s){if(s==null){s=d.vdir}var v=window.document.location.href;var y=window.document.location.pathname;var w=v.indexOf(y);var t=v.substring(0,w);var u=y.substring(0,y.substr(1).indexOf("/")+1);if(u!==s){u=""}return(t+u)};d.vdirPath=d.getRootPath();d.Loader={PRE_LOAD:"fj-module-load",FILTER_REPEAT:"filterRepeat",modules:{},loadings:[],factorys:[],paths:{widget:d.widgetPath}};d.Loader.getCurrentScriptPath=function(y){var s,w;try{x.y.z()}catch(z){s=z.stack;if(!s&&window.opera){s=(String(z).match(/of linked script \S+/g)||[]).join(" ")}w=z.sourceURL;if(!s&&w&&y){return w}}if(s){s=s.split(/[@ ]/g).pop();s=s[0]==="("?s.slice(1,-1):s.replace(/\s/,"");return s.replace(/(:\d+)?:\d+$/i,"")}var t=(y?o:d.head).getElementsByTagName("script");for(var u=t.length,v;v=t[--u];){if((y||v.className===d.Loader.PRE_LOAD)&&v.readyState==="interactive"){return v.className=v.src}}};d.basePath=d.rootPath;d.Loader.checkFail=function(v,u,t){var w=d.Request.delQueryString(v.src),s=d.Loader.modules[w];v.onload=v.onreadystatechange=v.onerror=null;if(u||(t&&s&&!s.state)){d.lazyDo(function(){d.head.removeChild(v)});d.log("加载文件失败,url:"+w+",params:"+u+"_"+t)}else{return true}};d.Loader.checkCycle=function(u,s){for(var v in u){var t=d.Loader.modules[v];if(u[v]===d.Loader.FILTER_REPEAT&&t.state!==2&&(v===s||d.Loader.checkCycle(t.deps,s))){return true}}};d.Loader.checkDeps=function(){POLL:for(var s=d.Loader.loadings,v=s.length,z;z=s[--v];){var t=d.Loader.modules,w=t[z],y=w.deps;for(var u in y){if(d.obj.hasOwn(y,u)&&t[u].state!==2){continue POLL}}if(w.state!==2){s.splice(v,1);d.Loader.fireFactory(w.id,w.args,w.factory);d.Loader.checkDeps()}}};d.Loader.fireFactory=function(s,B,w){var z=[k(s)],u=d.Loader.modules;for(var v=0,A;A=B[v++];){z.push(u[A].exports)}var t=Object(u[s]),y=w&&w.apply(g,z);t.state=2;if(y!==void 0){t.exports=y}return y};d.Loader.formatModulePath=function(w,v,A,u){if(v===void 0){v=location.href}var z=d.Loader.paths;for(var y in z){if(w.indexOf(y)>=0){w=w.replace(y,z[y])}}if(/^(\w+)(\d)?:.*/.test(w)){A=w}else{v=v.substr(0,v.lastIndexOf("/"));var t=w.charAt(0);if(t!=="."&&t!=="/"){A=d.basePath+w}else{if(w.substr(0,2)==="./"){A=v+w.substr(1)}else{if(w.substr(0,2)===".."){var s=v.replace(/\/$/,"").split("/");t=w.replace(/\.\.\//g,function(){s.pop();return""});A=s.join("/")+"/"+t}else{if(t==="/"){A=d.vdirPath+w}else{d.error("不符合模块标识规则: "+w)}}}}}A=d.Request.delQueryString(A);if(/\.(css|js)$/.test(A)){u=RegExp.$1}if(!u){A+=".js";u="js"}return{src:A,ext:u}};var a=d.Loader.formatModulePath;d.Loader.loadResource=function(v,u,t){var s=d.Loader.modules;t=a(v,u);var w=t.src;if(t.ext==="js"){if(!s[w]){s[w]={id:w,parent:u,exports:{}};d.JS.execute(w,null,null,null,null,null,true)}return w}else{if(t.ext==="css"){d.CSS.execute(w,w.substr(w.lastIndexOf("/")).replace(/(#.+|\W)/g,""))}}};var k=function(t){if(t===void 0){t=location.href}var s=function(z,w,C){var D={},A=[],y=0,B=0,u=C||"require_"+d.guid(),v=d.Loader.modules;C=C||t;String(z).replace(d.RX.rword,function(F){var E=d.Loader.loadResource(F,C);if(E){y++;if(v[E]&&v[E].state===2){B++}if(!D[E]){A.push(E);D[E]=d.Loader.FILTER_REPEAT}}});v[u]={id:u,factory:w,deps:D,args:A,state:1};if(y===B){d.Loader.fireFactory(u,A,w)}else{d.Loader.loadings.unshift(u)}d.Loader.checkDeps()};return s};g.require=d.require=k();g.define=d.define=function(s,D,w){var y=d.arr.slice(arguments),u=d.Loader.modules,z=true,B=null;if(typeof s==="string"&&s.indexOf(",")<0){B=a(y.shift()).src}if(typeof y[0]==="function"){y.unshift([])}if(B&&!u[B]){z=false;s=B}else{if(B!=null){s=B}else{var A=d.Loader.getCurrentScriptPath();if(A){s=d.Request.delQueryString(A)}}}w=y[1];if(!z){var C={};D=y[0];for(var v=0,t=D.length;v<t;v++){C[D[v]=a(D[v]).src]=d.Loader.FILTER_REPEAT}u[s]={id:s,factory:w,deps:C,args:D};d.Loader.fireFactory(s,D,w);return}w.delay=function(G){y.push(G);var E=true;try{E=d.Loader.checkCycle(u[G].deps,G)}catch(F){}if(E){d.error(G+"模块与之前的某些模块存在循环依赖")}delete w.delay;d.require.apply(null,y)};if(s){w.delay(s,y)}else{d.Loader.factorys.push(w)}};d.define.amd=d.Loader.modules;d.UserData={_data:null,_defExpires:null,_saveFile:null,setDefExpires:function(s){var t=this;t._defExpires=s||365},setSaveFile:function(t){var u=this;u._saveFile=t||window.location.hostname},_init:function(){var t=this;if(!t._data){try{t._data=document.createElement("input");t._data.type="hidden";t._data.addBehavior("#default#userData");document.body.appendChild(t._data)}catch(s){return false}}return true},setItem:function(t){var v=this;if(v._init()){v.setDefExpires(t.e);var s=new Date();s.setDate(s.getDate()+v._defExpires);v._data.expires=s.toUTCString();t.value=typeof(t.value)=="string"?t.value:JSON.stringify(t.value);v.setSaveFile(t.file);try{v._data.load(v._saveFile);v._data.setAttribute(t.key,t.value);v._data.save(v._saveFile)}catch(u){}}},getItem:function(s){var u=this;if(u._init()){u.setSaveFile(s.file);try{u._data.load(u._saveFile)}catch(t){}return u._data.getAttribute(s.key)}},removeItem:function(s){var t=this;if(t._init()){t.setSaveFile(s.file);t._data.load(t._saveFile);t._data.removeAttribute(s.key);t._data.save(t._saveFile)}}};d.LocalStorage={getItem:function(s){if(window.localStorage){return localStorage.getItem(s.key)}else{return d.UserData.getItem(s)}},setItem:function(s){if(window.localStorage){s.value=typeof(s.value)=="string"?s.value:JSON.stringify(s.value);localStorage.setItem(s.key,s.value)}else{d.UserData.setItem(s)}},removeItem:function(s){if(window.localStorage){if(s.clear){localStorage.clear()}else{localStorage.removeItem(s.key)}}else{d.UserData.removeItem(s)}}};if(!d.theme){d.theme={}}d.theme.changeDrawTheme=function(){for(var s in p.objs){switch(p.objs[s].p.fjType){}}};d.theme.changeFn=function(t,s){p.currentTheme=t;p.themeFolder=p.themePath+t+"/";d.JS.execute(p.themePath+t+"/fj.themeConfig.js",null,function(){});d.CSS.change("themeFj",d.themePath+t+"/css/fj.theme.all.css")};d.theme.change=function(s,u){if(p.initTheme&&!s){s=p.initTheme}if(!s){s="blue"}if(u&&p.themeStoreName){var t=p.LocalStorage.getItem({key:p.themeStoreName});if(t){s=t}}d.theme.changeFn(s);if(p.themeStoreName){p.LocalStorage.setItem({key:p.themeStoreName,value:s})}};if(!p.noLoadRes){p.theme.change(null,true)}d.Evt={};d.Evt.fix=function(s){if(typeof s==="undefined"){s=window.event}if(typeof s.layerX==="undefined"){s.layerX=s.offsetX}if(typeof s.layerY==="undefined"){s.layerY=s.offsetY}s.key=s.keyCode?s.keyCode:s.which;return s};d.Evt.testElem=document.createElement("flareJ");d.Evt.click="tap";d.Evt.customClick=d.isMobile?"customTap":"click";d.Evt.transition=(function(){var v={WebkitTransition:["-webkit-transition","webkitTransitionEnd"],MozTransition:["-moz-transition","transitionend"],OTransition:["-o-transition","oTransitionEnd"],MsTransition:["-ms-transition","msTransitionEnd"],transition:["transition","transitionend"]};for(var u in v){if(p.Evt.testElem.style[u]!==undefined){var s=v[u];return{prop:u,style:s[0],end:s[1]}}}return false})();d.Evt.transform=(function(){var u={WebkitTransform:"-webkit-transform",MozTransform:"-moz-transform",OTransform:"-o-transform",MsTransform:"-ms-transform",transform:"transform"};for(var s in u){if(p.Evt.testElem.style[s]!==undefined){return{prop:s,style:u[s]}}}return false})();d.Evt.transformOrigin=(function(){var s={WebkitTransformOrigin:"-webkit-transform-origin",MozTransformOrigin:"-moz-transform-origin",OTransformOrigin:"-o-transform-origin",MsTransformOrigin:"-ms-transform-origin",transformOrigin:"transform-origin"};for(var u in s){if(p.Evt.testElem.style[u]!==undefined){return{prop:u,style:s[u]}}}return false})();d.vibrate=function(s){if(!navigator.vibrate){return}if(!e.isArray(s)){s=[s]}navigator.vibrate(s)};d.mediaQuery=function(t){var y=false;if(g.matchMedia){y=g.matchMedia(t).matches}else{var A=p.pageWidth(),w=t.match(/\(min-width:\s[0-9]+px\)/g),u=t.match(/\(max-width:\s[0-9]+px\)/g),z=0,B=0;if(w){var v=w[0].match(/[0-9]+/g);z++;if(A>=v){B++}}if(u){var s=u[0].match(/[0-9]+/g);z++;if(A<=s){B++}}if(z>0&&z===B){y=true}}return y};this.BaseJ=this.BJ=d.BaseJ=d.BJ=d.Class.extend({init:function(s){this.settings=this.p=this.st=e.extend(true,{fjType:"BJ",objId:new Date().getTime()+Math.random().toFixed(6).substr(2),colorParams:{},evts:{},eType:{},responsive:false,responsiveDelay:70,responsiveOnlyWidth:true,responsiveParam:{}},s);this.p.colors=this.p.colorParams;return this},initFn:function(){if(this.p.objId!=null){this.objId=this.p.objId}var s=p.saveTypes&&p.saveTypes.length>0;if(!p.noSaveObj||s){if(!p.noSaveObj){d.set(this.p.objId,this)}else{if(s&&e.inArray(this.p.fjType,p.saveTypes)>=0){d.set(this.p.objId,this)}}}this.bindEvts();this.bindResponsiveEvts()},create:null,bindEvts:function(){for(var s in this.p.evts){if(this.p.evts[s]){this.bindEvt(s,this.p.evts[s],true)}}},bindEvt:function(s,t,u){if(!u){this.p.evts[s]=t}e(this).bind(s,t)},fire:function(){if(this.p.evts[arguments[0]]){var s=arguments,t=s.length-1;if(typeof s[t]=="string"&&s[t].substr(s[t].length-1)=="J"){if(this.p.eType[s[0]]&&this.p.eType[s[0]]==s[t]){return e(this).triggerHandler(s[0],(function(u){if(typeof u=="object"||typeof u=="function"){return u}else{return null}})(s[1]))}}else{return e(this).triggerHandler(s[0],s[1])}}},alterP:function(s){this.p=e.extend(true,this.p,s)},remove:function(){if(this.p.objId!=null){d.remove(this.p.objId)}if(this.responsiveResize){e(window).off("resize",this.responsiveResize)}this.fire("afterRemove")},bindResponsiveEvts:function(){if(!this.p.responsive||p.isIElt9){return}var t=this,s=this.p.responsiveOnlyWidth;this.responsiveResize=function(){p.lazyDo(function(){var v=true;if(s){var u=p.pageWidth();if(u!==this.globalWidth){this.globalWidth=u;v=true}else{v=false}}if(v){this.responsiveHandle()}},t.p.responsiveDelay,"ld_bj_responsive",t)};e(window).on("resize",this.responsiveResize);this.responsiveHandle(true)},responsiveHandle:function(y){var t=this,w,s=this.p.responsiveParam;for(w in s){var v=s[w],u=function(){if(v.preHandler){v.preHandler.call(t,y)}if(v.params){e.extend(true,t.p,v.params)}if(v.handler){v.handler.call(t,y)}};if(p.mediaQuery(w.split("|")[0])){if(v.delay){p.lazyDo(function(){u()},v.delay)}else{u()}}}}});this.ComponentJ=this.CJ=d.ComponentJ=d.CJ=d.BJ.extend({init:function(s,t){if(t){if(t.widthF!=null){t.width=t.widthF}if(t.heightF!=null){t.height=t.heightF}if(t.leftF!=null){t.left=t.leftF}if(t.topF!=null){t.top=t.topF}}this._super(e.extend(true,{fjType:"CJ",obj:s,selCondition:null,renderTo:"body",renderType:"append",width:100,height:100,borderWidth:1,style:null,colorParams:{borderOut:null,bgColor:null},evts:{beforeRender:function(){},afterRender:function(){}},eType:(function(u){return{beforeRender:u,afterRender:u,beforeRemove:u}})("CJ")},t));this.p.colors=this.p.colorParams;this.divOut=null;return this},initFn:function(){this._super();this.p.renderTo=(typeof this.p.renderTo=="string"?e(this.p.renderTo):this.p.renderTo);if(this.p.objId==null){this.objId="CJ_"+new Date().getTime()+Math.random().toFixed(6).substr(2)}else{this.objId=this.p.objId}},create:function(s){this.fire("beforeRender","CJ");this.divOut=e('<div id="'+this.objId+'"></div>')[this.p.renderType+"To"](this.p.renderTo);if(this.p.style!=null){this.divOut.attr("style",this.p.style)}this.divOut.addClass("cj").css({width:typeof this.p.width=="number"?this.p.width+"px":this.p.width,height:typeof this.p.height=="number"?this.p.height+"px":this.p.height});if(!s){this.divOut.css("display","none")}var t=this.p.borderWidth;if(t!=null){if(p.RX.numZ(t)){this.divOut.css("border-width",t)}else{if(typeof t=="object"){this.divOut.css({borderTopWidth:t.t,borderRightWidth:t.r,borderBottomWidth:t.b,borderLeftWidth:t.l})}}}if(this.p.colorParams.borderOut){this.divOut.css("border-color",this.p.colorParams.borderOut)}if(this.p.colorParams.bgColor){this.divOut.css("background-color",this.p.colorParams.bgColor)}this.fire("afterRender","CJ");return this},show:function(s){this.divOut.each(function(){this.style.display=s?"inline-block":"block"});return this},hide:function(){if(this.divOut!=null){this.divOut.hide()}},close:function(){if(this.divOut!=null){this.divOut.hide()}this.divOut.remove()},remove:function(){this.fire("beforeRemove","CJ");this.divOut.remove();this._super()},display:function(s){if(s===true||s===1||s==null){this.divOut.show()}else{this.divOut.hide()}},setVisible:function(s){this.display(s)}});e.fn.extend({ComponentJ:function(s){if(this&&this.length>0){return new d.ComponentJ(this,s)}},CJ:function(s){return e(this).ComponentJ(s)}});d.Animate={};d.Animate.fadeIn=function(u,t,s){var v="scale(0.85, 0.9)",w="ease-in-out";if(t.scale){v=t.scale;t.scale=null}if(t.easing){w=t.easing;t.easing=null}t=e.extend(true,{duration:0.3,easing:w,opacity:1,transform:"scale(1, 1)"},t);u.css({opacity:0.1});u[0].style[p.Evt.transform.prop]=v;p.lazyDo(function(){u.transitionJ(t,s)})};d.Animate.fadeOut=function(u,t,s){var v="scale(0.85, 0.9)",w="ease-in-out";if(t.scale){v=t.scale;t.scale=null}if(t.easing){w=t.easing;t.easing=null}t=e.extend(true,{duration:0.3,easing:w,opacity:0.1,transform:v},t);u.transitionJ(t,s)};this.StringBuilderJ=this.STJ=p.StringBuilderJ=p.STJ=p.BJ.extend({init:function(s){this._super(e.extend(true,{fjType:"STJ",text:null,link:""},s));this.initFn();return this},initFn:function(){this._super();this.strs=[];if(this.p.text!=null){this.strs[this.strs.length]=this.p.text}},add:function(u){if(!e.isArray(u)){this.strs[this.strs.length]=u}else{for(var t=0,v=this.strs.length,s=u.length;t<s;t++){this.strs[t+v]=u[t]}}return this},clear:function(){this.strs.length=0},join:function(s){if(s!=null){this.p.link=s}return this.strs.join(this.p.link)}});p.STJ.init=function(s){return new p.STJ(s)};p.STJ.join=function(t,s){return p.STJ.init().add(t).join(s)};d.clone=function(v){if(Object.prototype.toString.call(v)==="[object Array]"){var t=[],u=0,s=v.length;for(;u<s;u++){t[u]=arguments.callee(v[u])}return t}else{if(v!=null&&typeof v==="object"){var t={},u;for(u in v){t[u]=arguments.callee(v[u])}return t}}return v};d.SilverLight=d.SL={};this.onSLerrorJ=this.onSilverlightErrorJ=function(u,s){var t="";if(u!=null&&u!=0){t=u.getHost().Source}var y=s.ErrorType;var v=s.ErrorCode;if(y=="ImageError"||y=="MediaError"){return}var w="Silverlight 应用程序中未处理的错误 "+t+"\n";w+="代码: "+v+"    \n";w+="类别: "+y+"       \n";w+="消息: "+s.ErrorMessage+"     \n";if(y=="ParserError"){w+="文件: "+s.xamlFile+"     \n";w+="行: "+s.lineNumber+"     \n";w+="位置: "+s.charPosition+"     \n"}else{if(y=="RuntimeError"){if(s.lineNumber!=0){w+="行: "+s.lineNumber+"     \n";w+="位置: "+s.charPosition+"     \n"}w+="方法名称: "+s.methodName+"     \n"}}throw new Error(w)};d.SL.CheckSLInstalled=function(){var s=false;try{try{var u=new ActiveXObject("AgControl.AgControl");s=true}catch(t){if(navigator.plugins["Silverlight Plug-In"]){s=true}}}catch(t){}return s};d.SL.create=function(t){var s=['<object id="'+t.id+'" data="data:application/x-silverlight-2," type="application/x-silverlight-2" style="width:100%;height:100%;">'];s.push('<param name="source" value="'+t.xapPath+'" />');s.push('<param name="onerror" value="onSLerrorJ" />');s.push('<param name="background" value="white" />');s.push('<param name="onload" value="pluginLoaded" />');s.push('<param name="minRuntimeVersion" value="4.0.50826.0" />');s.push('<param name="autoUpgrade" value="true" />');s.push('<param value="'+t.windowless+'" name="windowless" />');s.push('<param name="initParams" value="'+t.initParams+'" />');s.push('<a href="http://go.microsoft.com/fwlink/?LinkID=124807" style="text-decoration: none;"><img src="http://go.microsoft.com/fwlink/?LinkId=108181" alt="获取 Microsoft Silverlight" style="border-style: none" /></a>');s.push("</object>");s.push('<iframe style="visibility: hidden; height: 0; width: 0; border: 0px"></iframe>');return s.join("")};d.Flex=d.FX={};d.FX.create=function(u,B,t,v,F,D,E,C){var s="10.0.0";if(C){s=C}var A=d.rootPath+"resources/swf/playerProductInstall.swf";var w={};if(D){w=e.extend(w,D)}var y={};y.quality="high";y.allowscriptaccess="sameDomain";y.allowfullscreen="true";if(E){y.bgcolor=E}else{y.wmode="transparent"}var z={};z.id=u;z.name=u;z.align="middle";swfobject.embedSWF(B,t,v,F,s,A,w,y,z)};d.getFlashVer=function(){var w="0.0";var z=navigator;if(z.plugins&&z.plugins.length){for(var u=0,s=z.plugins.length;u<s;u++){var t=z.plugins[u];if(t.name.indexOf("Shockwave Flash")!=-1){w=t.description.split("Shockwave Flash")[1].split(" ")[1];break}}}else{if(window.ActiveXObject){for(var u=10;u>=2;u--){try{var v=p.exec("new ActiveXObject('ShockwaveFlash.ShockwaveFlash."+u+"');");if(v){w=u+".0";break}}catch(y){}}}}return w};d.isActiveXSafe=function(){var s;var t=false;try{s=new ActiveXObject("WScript.Shell")}catch(u){t=true}return t};d.checkTag=function(u){var t=true,s=document.createElement(u);switch(u){case"bgsound":t="volume" in s;break;case"progress":t="max" in s;break;case"canvas":t="getContext" in s;break;case"audio":t="autoplay" in s;break;case"video":t="canPlayType" in s;break}return t};d.playSound={};var j=d.checkTag("bgsound")&&d.isIE,h=d.checkTag("audio");d.playSound.init=function(u,t){var s;if(j){s=e('<bgsound id="fjps_bg_'+u+'" volume="-10000" loop="1" src="'+t+'">')}else{if(h){s=e('<audio id="fjps_bg_'+u+'" src="'+t+'" autobuffer ></audio>')}}if(s){d.oBody.prepend(s);d.playSound[u]=s}};d.playSound.play=function(s){p.lazyDo(function(){var t=d.playSound[s];if(!t){return}if(j){var v=t[0];v.volume=1;v.src=v.src}else{if(h){try{t[0].play()}catch(u){}}}})};d.playSound.reset=function(t){if(j){var s=d.playSound[t];if(!s){return}s[0].volume=-10000}};d.printErrorMsg='您的IE浏览器禁止了打印功能。\n\n请依次点击进入"工具">"Internet选项">"安全">"自定义级别"\n\n将"对于没有标记为可安全执行脚本的ActiveX控件的执行"项设置为"启用"或"提示"。';d.print_HKEY_Root="HKEY_CURRENT_USER";d.print_HKEY_Path="\\Software\\Microsoft\\Internet Explorer\\PageSetup\\";d.printConfig={header:"&w&b页码,&p/&P",footer:"&u&b&d",marginBottom:0.75,marginLeft:0.75,marginRight:0.75,marginTop:0.75};d.print=function(t){if(p.isIE){if(!t){if(e("#fj_webBrowser").length==0){var s=e('<object id="fj_webBrowser" style="display:none;" classid="CLSID:8856F961-340A-11D0-A96B-00C04FD705A2" height="0" width="0" ></object>');d.oBody.append(s);d.print.wb=s[0]}if(!p.isActiveXSafe()){d.print.wb.ExecWB(7,1)}else{alert(d.printErrorMsg)}}else{window.print()}}else{window.print()}};d.noPrint=function(s){d.CSS.createStyle("fj_noPrint",s,null,"print")};d.setPrint=function(t){if(p.isIE){if(!p.isActiveXSafe()){var s=new ActiveXObject("WScript.Shell");if(t.header!=null){s.RegWrite(d.print_HKEY_Root+d.print_HKEY_Path+"header",t.header)}if(t.footer!=null){s.RegWrite(d.print_HKEY_Root+d.print_HKEY_Path+"footer",t.footer)}if(t.marginBottom!=null){s.RegWrite(d.print_HKEY_Root+d.print_HKEY_Path+"margin_bottom",t.marginBottom)}if(t.marginLeft!=null){s.RegWrite(d.print_HKEY_Root+d.print_HKEY_Path+"margin_left",t.marginLeft)}if(t.marginRight!=null){s.RegWrite(d.print_HKEY_Root+d.print_HKEY_Path+"margin_right",t.marginRight)}if(t.marginTop!=null){s.RegWrite(d.print_HKEY_Root+d.print_HKEY_Path+"margin_top",t.marginTop)}}else{alert(d.printErrorMsg)}}};d.setPrintDefault=function(){d.setPrint(d.printConfig)};d.getXY=function(y){var C=document,B=C.body,s={t:0,l:0},u=navigator.userAgent.toLowerCase(),A=C.compatMode=="CSS1Compat",v=/gecko/.test(u),G=function(I,H){s.l+=H,s.t+=I},w=y;if(y&&y!=B){if(y.getBoundingClientRect){var D=y.getBoundingClientRect();G(D.top+Math.max(C.body.scrollTop,C.documentElement.scrollTop),D.left+Math.max(C.body.scrollLeft,C.documentElement.scrollLeft));A?G(-C.documentElement.clientTop,-C.documentElement.clientLeft):G(-1,-1)}else{var t=C.defaultView;while(w){G(w.offsetTop,w.offsetLeft);var E=t.getComputedStyle(w,null);if(v){var z=parseInt(E.getPropertyValue("border-left-width"),10)||0,F=parseInt(E.getPropertyValue("border-top-width"),10)||0;G(F,z);if(w!=y&&E.getPropertyValue("overflow")!="visible"){G(F,z)}}w=w.offsetParent}w=y.parentNode;while(w&&w!=B){G(-w.scrollTop,-w.scrollLeft);w=w.parentNode}}}return s};d.Request={};d.Request.queryString=d.Request.qs=function(t){var s=location.search.match(new RegExp("[?&]"+t+"=([^&]*)(&?)","i"));return s?s[1]:s};d.Request.delQueryString=function(s){return s.replace(/[?#].*/,"")};d.Request.post=function(s,w,t,A){var u=document.createElement("form");u.id="tempForm_"+new Date().getTime();u.method="post";u.action=s;u.target=t;for(var y=0,v=w.length;y<v;y++){var B=document.createElement("input");B.type="hidden";B.name=w[y][0];B.value=w[y][1];u.appendChild(B)}if(u.attachEvent){u.attachEvent("onsubmit",function(){A(w)})}else{u.addEventListener("onsubmit",function(){A(w)},true)}document.body.appendChild(u);if(u.fireEvent){u.fireEvent("onsubmit")}else{var z=document.createEvent("HTMLEvents");z.initEvent("onsubmit",false,false);u.dispatchEvent(z)}u.submit();document.body.removeChild(u)},d.setHomePage=function(u,t){if(document.all){document.body.style.behavior="url(#default#homepage)";document.body.setHomePage(u)}else{if(window.sidebar){if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(v){alert("该操作被浏览器拒绝，如果想启用该功能，请在地址栏内输入about:config,然后将项signed.applets.codebase_principal_support的值改为true")}}var s=Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);s.setCharPref("browser.startup.homepage",u)}else{var w="您的浏览器不支持自动设置主页";if(t){w=t}alert(w)}}};d.addMyFavorite=function(u,t,s){if(document.all){window.external.addFavorite(u,t)}else{if(window.sidebar){window.sidebar.addPanel(t,u,"")}else{var v="您的浏览器不支持自动加入收藏\n请按ctrl+d加入收藏";if(s){v=s}alert(v)}}};d.RegExp=d.RX={test:function(u,t,s){if(new RegExp(u,s).test(t)){return true}else{return false}},ep:{num:/^\+?[1-9][0-9]*$/,numZ:/^\+?[0-9][0-9]*$/,numZ2:/^-?[0-9][0-9]*$/,numF:/^-?([0-9][0-9]*)(\.\d{1,2})?$/,numF2:/^([0-9][0-9]*)(\.\d{1,2})?$/,numD:/^-?([0-9][0-9]*)(\.\d{1,10})?$/,numD2:/^(([0-9]+[\.]?[0-9]+)|[1-9])$/,numD3:/^(([0-9]+[\.]?[0-9]+)|[0-9])$/,num0_100:/^(?:0|[1-9][0-9]?|100)$/,num0_1:/^[01]$|^0\.\d{1,2}$|^1\.0{1,2}$/,post:/^\d{6}$/,phone:/^(((\()?\d{2,4}(\))?[-(\s)*]){0,2})?(\d{7,8})$/,mobile:/^[1][3,5,8][0-9]{9}$/,email:/^[0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@(([0-9a-zA-Z])+([-\w]*[0-9a-zA-Z])*\.)+[a-zA-Z]{2,9}$/,date:/^\d{4}-\d{2}-\d{2}$/,time:/^\d{2}:\d{2}:\d{2}$/,datetime:/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/,datetimeO:/^\d{4}-\d{2}-\d{2}( \d{2}:\d{2}:\d{2})?$/,pass:/^[0-9a-zA-Z]{6,16}$/,user:/^[a-zA-Z][a-zA-Z0-9_\u4E00-\u9FA5]{3,15}$/,ip:/^((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]\d)|\d)(\.((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]\d)|\d)){3}(:(6553[0-5]|655[0-2]\d|65[0-4]\d{2}|6[0-4]\d{3}|[1-5]\d{4}|[1-9]\d{0,3}))?$/,cardId:/^(\d{18,18}|\d{15,15}|\d{17,17}x)$/i,enFirst:/^[a-zA-Z][\s\S]*$/,chFirst:/^[\u4E00-\u9FA5][\s\S]*$/,percent:/^\+?(([1-9]\d?)|(100)|(0))\%$/}};for(var r in d.RegExp.ep){(function(s){d.RegExp[s]=function(t){return d.RX.test(d.RX.ep[s],t)}})(r)}d.RX.rword=/[^, ]+/g;d.Math={};d.Math.outputMoney=function(t,v){var s=t;try{if(v==null){v=2}if(isNaN(t)||t==""){return"0"}t=t.toFixed(v);if(t<0){return"-"+d.Math.outputDollars(Math.floor(Math.abs(t)-0)+"")+d.Math.outputCents(Math.abs(t)-0,v)}else{return d.Math.outputDollars(Math.floor(t-0)+"")+d.Math.outputCents(t-0,v)}}catch(u){return s}};d.Math.outputDollars=function(u){if(u.length<=3){return(u==""?"0":u)}else{var t=u.length%3;var s=(t==0?"":(u.substring(0,t)));for(i=0;i<Math.floor(u.length/3);i++){if((t==0)&&(i==0)){s+=u.substring(t+3*i,t+3*i+3)}else{s+=","+u.substring(t+3*i,t+3*i+3)}}return(s)}};d.Math.outputCents=function(s,t){if(t!=null){s=s.toFixed(t)}else{t=2}if(t>0){s=(s+"").match(/\.\d*$/g)}else{s=""}return s};d.Math.addZero=function(s){return(("00"+s).substr(("00"+s).length-2))};d.Date={};d.Date.getTime=function(){return new Date().getTime()};d.Date.parse=function(w){var v=w.replace(/-/g,"/").replace(/T/g," ");var u=v.indexOf(".");if(u!=-1){v=v.substr(0,u)}var y=new Date(v);return y};d.Date.dateDiff=function(D,C,y,w){var t,v,u,A,z,B,s;if(typeof D!="object"){if(D.indexOf(" ")!=-1){t=D.split(" ");v=t[0].split("-");u=t[1].split(":");A=new Date(v[0],v[1]-1,v[2],u[0],u[1],u[2])}else{v=D.split("-");A=new Date(v[0],v[1]-1,v[2])}}else{A=D}if(typeof C!="object"){if(C.indexOf(" ")!=-1){t=C.split(" ");v=t[0].split("-");u=t[1].split(":");z=new Date(v[0],v[1]-1,v[2],u[0],u[1],u[2])}else{v=C.split("-");z=new Date(v[0],v[1]-1,v[2])}}else{z=C}B=A-z;if(w){B=Math.abs(B)}switch(y){case"h":s=parseInt(B/1000/60/60,10);break;case"m":s=parseInt(B/1000/60,10);break;case"s":s=parseInt(B/1000,10);break;case"ms":s=B;break;default:s=parseInt(B/1000/60/60/24,10);break}return s};d.Date.toFormatString=function(t,s,u){if(s.length==1){return t.getFullYear()+s+(t.getMonth()+1)+s+t.getDate()}s=s.replace("yyyy",t.getFullYear());s=s.replace("mm",u?(t.getMonth()+1):d.Math.addZero(t.getMonth()+1));s=s.replace("dd",u?t.getDate():d.Math.addZero(t.getDate()));s=s.replace("hh",u?t.getHours():d.Math.addZero(t.getHours()));s=s.replace("MM",u?t.getMinutes():d.Math.addZero(t.getMinutes()));s=s.replace("ss",u?t.getSeconds():d.Math.addZero(t.getSeconds()));return s};d.Date.GetDateStr=function(v,y,w,t){var s=new Date(),A,z="";s.setDate(s.getDate()+v);A=p.Date.toFormatString(s,t!=null?t:"yyyy-mm-dd");if(y!=null){var u=new Date();u.setDate(u.getDate()+y);z=p.Date.toFormatString(u,t!=null?t:"yyyy-mm-dd")}return A+(w!=null?w:"")+z};d.guid=function(){return d.Date.getTime()+Math.random().toFixed(6).substr(2)};d.Sort={};d.Sort.getFirstChar=function(t){if(t==""){return""}return(t+"").substr(0,1)};d.Sort.getGB2312Spell=function(z,w){var v,A,u,y,s="";if(w==null){w=""}for(v=0,l=z.length;v<l;v++){if(z.charCodeAt(v)>=19968){y=d.strGB.indexOf(z.charAt(v));if(y>-1&&y<3755){for(u=d.spell.length-1;u>0;u=u-2){if(d.spell[u]<=y){break}}if(u>0){s+=d.spell[u-1]+w}}}}return s.substr(0,s.length-w.length)};d.Sort.compare=function(s,z,t,u,v,w){w=w!=null?w:-1;if(u&&!v){return -1}else{if(!u&&v){return 1}else{if(u&&v){return 0}}}if(s>z){return !t?-1:1}else{if(s<z){return !t?1:-1}else{return 0}}};d.Sort.compareNumber=function(s,A,t,u,v,z){var w="/[^d|.|-]/g";s=(s+"").replace(w,"");A=(A+"").replace(w,"");return d.Sort.compare(s*1,A*1,t,u,v,z)};d.Sort.compareDate=function(s,C,t,u,v,w){var B="1900-01-01";var s=d.Date.parse(s==""?B:s);var C=d.Date.parse(C==""?B:C);var A=s-C;w=w!=null?w:-1;if(u&&!v){return -1}else{if(!u&&v){return 1}else{if(u&&v){return 0}}}return !t?A*(-1):A};d.Sort.compareStringEN=function(s,z,t,u,v,w){s=d.Sort.getFirstChar(s);z=d.Sort.getFirstChar(z);return d.Sort.compare(s,z,t,u,v,w)};d.Sort.compareStringCH=function(s,z,t,u,v,w){if(d.strGB){s=s==""?"":d.RX.chFirst(s)?d.Sort.getGB2312Spell(d.Sort.getFirstChar(s)):d.Sort.getFirstChar(s);z=z==""?"":d.RX.chFirst(z)?d.Sort.getGB2312Spell(d.Sort.getFirstChar(z)):d.Sort.getFirstChar(z);return d.Sort.compare(s,z,t,u,v,w)}else{return d.Sort.compareStringEN(s,z,t,u,v,w)}};d.Sort.execute=function(y,E,C,t,u){if(C==null){C=true}var s=d.Sort.compareStringEN;try{for(var z=0,v=y.length;z<v;z++){var B=y[z],D=B[E];if(D===""||B[t]!=null){continue}if(!isNaN(D)){s=d.Sort.compareNumber;break}else{if(d.RX.enFirst(D)||d.RX.chFirst(D)){s=d.Sort.compareStringCH;break}else{var w=d.Date.parse(D);if(w!="Invalid Date"&&w!="NaN"){s=d.Sort.compareDate}else{s=d.Sort.compareStringCH}break}}}}catch(A){s=d.Sort.compareStringEN}y.sort(function(G,F){return s(G[E],F[E],C,G[t],F[t],u)})};d.Object=d.obj={};d.obj.hasOwn=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)};d.Dom={};d.Dom.insertAfter=function(u,t){var s=t.parentNode;if(s.lastChild==t){s.appendChild(u)}else{s.insertBefore(u,t.nextSibling)}};d.Image={};d.Image.preLoad=function(s){new Image().src=s};e.fn.extend({textPositionJ:function(v){var u=this[0];if(u&&(u.tagName=="TEXTAREA"||u.type.toLowerCase()=="text")){if(p.isIE){var s;if(u.tagName=="TEXTAREA"){s=event.srcElement.createTextRange();s.moveToPoint(event.x,event.y)}else{s=document.selection.createRange()}if(v===undefined){s.moveStart("character",-event.srcElement.value.length);return s.text.length}else{if(typeof v==="number"){var t=this.textPositionJ();t>v?(s.moveEnd("character",v-t)):(s.moveStart("character",v-t));s.select()}}}else{if(v===undefined){return u.selectionStart}else{if(typeof v==="number"){u.selectionEnd=v;u.selectionStart=v}}}}else{if(v===undefined){return undefined}}},selectRangeJ:function(t,s){return this.each(function(){if(this.setSelectionRange){this.focus();this.setSelectionRange(t,s)}else{if(this.createTextRange){var u=this.createTextRange();u.collapse(true);u.moveEnd("character",s);u.moveStart("character",t);u.select()}}})},fixFloatJ:function(t){var t=e.extend(true,{type:"rightBottom",top:0,left:0,right:0,bottom:0,zIndex:1,isByScrollMove:false},t),s=this;switch(t.type){case"rightBottom":t.top="auto";t.left="auto";break;case"rightTop":t.bottom="auto";t.left="auto";break;case"leftBottom":t.top="auto";t.right="auto";break;case"leftTop":t.bottom="auto";t.right="auto";break;case"top":t.left="auto";t.bottom="auto";t.right="auto";break}this.css({top:t.top,left:t.left,right:t.right,bottom:t.bottom,zIndex:t.zIndex});this.css({position:"fixed"});if(t.isByScrollMove){e(window).bind("scroll",function(){var u=document.documentElement.scrollTop||document.body.scrollTop;if(u<=t.top){s.css("top",t.top-u)}else{s.css("top",0)}})}return this},scrollGoTopJ:function(w){var w=e.extend(true,{target:0,ratio:8,elem:null,evts:{arriveTop:null,leaveTop:null}},w),s=this;var u=true;var v;var t=w.elem?w.elem:this;t.click(function(){var y=document.documentElement.scrollTop||document.body.scrollTop;var z=(w.target-y)/w.ratio;z=Math.floor(z);if(y==w.target){return}else{u=false;document.documentElement.scrollTop=document.body.scrollTop=y+z;v=setTimeout(arguments.callee,30)}});e(window).bind("scroll",function(){if(u){clearTimeout(v)}else{u=true}p.lazyDo(function(){var y=document.documentElement.scrollTop||document.body.scrollTop;if(y==w.target){if(w.evts.arriveTop){w.evts.arriveTop.call(this)}}else{if(w.evts.leaveTop){w.evts.leaveTop.call(this)}}},100,"ld_scrollGoTopJ",s)});return this},fileCustomStyleJ:function(s){var s=e.extend(true,{width:265,height:20,btnText:"浏览...",btnFontSize:"12px",btnWidth:58,btnHeight:20,btnColor:"#000",isShowTxt:true,margin:{t:0,r:0,b:0,l:0},afterRender:null},s);this.each(function(u){var v=e(this).addClass("fuj_customStyle_file");if(!v.attr("id")){v.attr("id","file_"+new Date().getTime()+Math.random().toFixed(6).substr(2))}var y=e('<div id="fuj_customStyle_'+v.attr("id")+'" class="fuj_customStyle_wrap" style="width:'+s.width+"px;height: "+s.height+"px;margin:"+s.margin.t+"px "+s.margin.r+"px "+s.margin.b+"px "+s.margin.l+'px;"></div>');var t=e('<input id="fuj_customStyle_text_'+v.attr("id")+'" readonly class="fuj_customStyle_text" type="text" style="width:'+(s.width-s.btnWidth-7)+"px;height:"+(s.height-6)+'px;" />');var w=e('<div id="fuj_customStyle_btn_'+v.attr("id")+'" class="fuj_customStyle_btn pj_btn3" style="color:'+s.btnColor+";width:"+s.btnWidth+"px;height:"+s.btnHeight+"px;font-size:"+s.btnFontSize+";text-align:center;line-height:"+s.height+"px;margin:"+s.margin.t+"px "+s.margin.r+"px "+s.margin.b+"px "+s.margin.l+'px;">'+s.btnText+"</div>");if(s.btnImg){w.css("background","url("+s.btnImg+") no-repeat")}if(s.isShowTxt){v.bind("change",function(){var z=v.val();t.val(z).attr("title",z)});y.append(t)}else{t.hide();y.width(s.btnWidth)}v.hover(function(){w.addClass("pj_btn_hover")},function(){w.removeClass("pj_btn_hover")});v.after(y);y.append(v).append(w);if(s.afterRender){s.afterRender.call(v,w,t)}});return this},swapClassJ:function(t,s){this.removeClass(t).addClass(s);return this},distanceJ:function(t){var u=this.offset(),s=t.offset();return{left:Math.abs(u.left-s.left),top:Math.abs(u.top-s.top)}},transitionJ:function(y,z){var y=e.extend(true,{duration:0.5,delay:0,easing:"ease-in-out",evts:{start:null,stop:null}},y),t=p.Evt.transition,s=t?p.Evt.transition.prop:null,u=t?p.Evt.transition.end:null,w=t?d.Evt.transform.style:null,v=t?d.Evt.transformOrigin.style:null;this.each(function(){var C="",E={},D=e(this);for(var F in y){var B=y[F];if(F!="duration"&&F!="delay"&&F!="easing"&&F!="evts"&&B!=null){var A=typeof B==="object";if(t){if(F==="transform"){F=w}if(F==="transformOrigin"){F=v}}if(!z&&t){C+=","+F+" "+(!A?y.duration:(B.duration!=null?B.duration:y.duration))+"s "+(!A?y.easing:(B.easing?B.easing:y.easing))+" "+(!A?y.delay:(B.delay!=null?B.delay:y.delay))+"s"}E[F]=!A?B:B.value}}if(!z&&t){if(C.indexOf(",")!=-1){C=C.substr(1)}this.style[s]=C}if(y.evts.start){y.evts.start.call(D)}D.css(E);if(!t||z){if(y.evts.stop){y.evts.stop.call(D)}}else{D.one(u,function(){D[0].style[s]="none";if(y.evts.stop){y.evts.stop.call(D)}})}});return this}})})(jQuery);FJ.define("widget.BrowserHistory",function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.BrowserHistoryJ=this.BHJ=d.BrowserHistoryJ=d.BHJ=d.BJ.extend({init:function(e){this._super(b.extend(true,{fjType:"BHJ",initHash:"",checkOldDelay:500},e));this.initFn();return this},initFn:function(){this._super();var e=this;c.BHJ.ctx=this;this.supportHashChange="onhashchange" in window||"onhashchange" in document;this.isInit=true;if(c.isIElt8){this.oIfr=b('<iframe id="historyFrame_'+this.objId+'" height="0" frameborder="0"></iframe>').prependTo(d.oBody);var f;if(location.hash!=""){f=location.hash.substr(1)}else{f=this.p.initHash}this.oIfr.attr("src",c.resPath+"html/historyIE.htm?sign="+f+"&ts="+new Date().getTime())}else{if(this.supportHashChange){b(window).bind("hashchange",function(){c.BHJ.historyChange(location.hash.substr(1),true)});if(location.hash==""){location.hash=this.p.initHash}else{c.BHJ.historyChange(location.hash.substr(1),true)}}else{this.oldHash="initHash";if(location.hash==""){location.hash=this.p.initHash}setInterval(function(){e.checkOldHash()},this.p.checkOldDelay)}}},add:function(e){if(c.isIElt8){this.oIfr.attr("src",c.resPath+"html/historyIE.htm?sign="+e+"&ts="+new Date().getTime())}else{if(this.supportHashChange){location.hash=e}else{location.hash=e;this.checkOldHash()}}},checkOldHash:function(){if(this.oldHash!=location.hash){this.oldHash=location.hash;c.BHJ.historyChange(this.oldHash.substr(1),true)}}});c.BHJ.init=function(e){return new c.BHJ(e)};c.BHJ.historyChange=function(f,e){var g=c.BHJ.ctx;g.fire("historyChange",{hash:f,isInit:g.isInit});g.isInit=false;if(!e){location.hash=f}}});FJ.define("widget.DragDrop",function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.DragJ=this.DRJ=d.DragJ=d.DRJ=d.BJ.extend({init:function(j,f){this._super(b.extend(true,{fjType:"DRJ",oRoot:null,oContainer:null,dir:null,minX:null,maxX:null,minY:null,maxY:null,hmode:true,vmode:true,xMapper:null,yMapper:null,hasProxy:false,hideProxy:false,setPosByProxy:true,proxyColor:"#cccccc",drjCls:null,canDD:true,posType:"offset",pos:{top:0,left:0},cursor:"move",isSetTop:true,isSetLeft:true,evts:{dragStart:null,dragEnd:null,drag:null}},f));this.initFn();this.o=j;this.o.bind("mousedown",{j:this},this.dragStart);if(!this.p.oRoot){this.p.oRoot=this.o}if(this.p.oContainer){var r=this.p.oContainer[this.p.posType](),q=this.p.oContainer.innerWidth(),m=this.p.oContainer.innerHeight(),g=j.outerWidth(),k=j.outerHeight(),n=this.p.posType=="offset",e=n?r.left:0,o=n?r.top:0;this.p.minX=this.p.minX||e;this.p.maxX=this.p.maxX||(e+q-g);this.p.minY=this.p.minY||o;this.p.maxY=this.p.maxY||(o+m-k);this.o.css({left:e+this.p.pos.left,top:o+this.p.pos.top})}if(this.p.hmode&&c.isNaN(parseInt(this.p.oRoot.css("left"),10))){this.p.oRoot.css("left",0)}if(this.p.vmode&&c.isNaN(parseInt(this.p.oRoot.css("top"),10))){this.p.oRoot.css("top",0)}if(!this.p.hmode&&c.isNaN(parseInt(this.p.oRoot.css("right"),10))){this.p.oRoot.css("right",0)}if(!this.p.vmode&&c.isNaN(parseInt(this.p.oRoot.css("bottom"),10))){this.p.oRoot.css("bottom",0)}return this},initFn:function(){this._super();this.canMoveH=!this.p.dir||this.p.dir=="h";this.canMoveV=!this.p.dir||this.p.dir=="v"},dragStart:function(m){var g=m.data.j;if(!g.p.canDD){return}m=d.Evt.fix(m);if((g.p.oRoot.attr("resizing")==null||String(g.p.oRoot.attr("resizing"))=="false")&&(g.p.oRoot.attr("resizing-pre")==null||String(g.p.oRoot.attr("resizing-pre"))=="false")){g.cursorO=g.o.css("cursor");g.o.css("cursor",g.p.cursor);g.p.oRoot.attr("dragging",true);var o=parseInt(g.p.vmode?g.p.oRoot.css("top"):g.p.oRoot.css("bottom"),10);var q=parseInt(g.p.hmode?g.p.oRoot.css("left"):g.p.oRoot.css("right"),10);g.fire("dragStart",{x:q,y:o});g.p.lastMouseX=m.clientX;g.p.lastMouseY=m.clientY;if(g.p.hmode){if(g.p.minX!=null){g.p.minMouseX=m.clientX-q+g.p.minX}if(g.p.maxX!=null){g.p.maxMouseX=g.p.minMouseX+g.p.maxX-g.p.minX}}else{if(g.p.minX!=null){g.p.maxMouseX=-g.p.minX+m.clientX+q}if(g.p.maxX!=null){g.p.minMouseX=-g.p.maxX+m.clientX+q}}if(g.p.vmode){if(g.p.minY!=null){g.p.minMouseY=m.clientY-o+g.p.minY}if(g.p.maxY!=null){g.p.maxMouseY=g.p.minMouseY+g.p.maxY-g.p.minY}}else{if(g.p.minY!=null){g.p.maxMouseY=-g.p.minY+m.clientY+o}if(g.p.maxY!=null){g.p.minMouseY=-g.p.maxY+m.clientY+o}}if(g.p.hasProxy&&(g.p.drjCls?b(m.target).hasClass(g.p.drjCls):true)){var k=parseInt(g.p.oRoot.css("border-left-width"),10),h=parseInt(g.p.oRoot.css("border-right-width"),10),p=parseInt(g.p.oRoot.css("border-top-width"),10),f=parseInt(g.p.oRoot.css("border-bottom-width"),10);var n=g.p.oRoot[0].clientWidth+(!c.isNaN(k)?k:0)+(!c.isNaN(h)?h:0)-2;var r=g.p.oRoot[0].clientHeight+(!c.isNaN(p)?p:0)+(!c.isNaN(f)?f:0)-2;if(g.proxyD==null){g.proxyD=b('<div><div style="width:100%;height:100%;background-color:'+g.p.proxyColor+';filter:alpha(opacity=50);opacity: 0.5;"></div></div>');g.proxyD.css({width:n,height:r,position:"absolute",top:g.p.oRoot.css("top"),left:g.p.oRoot.css("left"),border:"1px dashed black",zIndex:1000000000,cursor:g.p.cursor,display:!g.p.hideProxy?"block":"none"});g.p.oRoot.after(g.proxyD)}else{g.proxyD.css({width:n,height:r,top:g.p.oRoot.css("top"),left:g.p.oRoot.css("left"),display:!g.p.hideProxy?"block":"none"})}}b(document).bind("mousemove",{j:g},g.drag).bind("mouseup",{j:g},g.dragEnd);if(d.isIE){g.p.oRoot[0].setCapture()}}},drag:function(n){var k=n.data.j;n=d.Evt.fix(n);if(k.p.oRoot.attr("resizing")==null||String(k.p.oRoot.attr("resizing"))=="false"){k.isMoved=true;var h=n.clientY;var m=n.clientX;var p,g,f,o;if(k.p.hasProxy&&k.proxyD!=null){p=parseInt(k.p.vmode?k.proxyD.css("top"):k.proxyD.css("bottom"),10);g=parseInt(k.p.hmode?k.proxyD.css("left"):k.proxyD.css("right"),10)}else{p=parseInt(k.p.vmode?k.p.oRoot.css("top"):k.p.oRoot.css("bottom"),10);g=parseInt(k.p.hmode?k.p.oRoot.css("left"):k.p.oRoot.css("right"),10)}if(k.p.minX!=null){m=k.p.hmode?Math.max(m,k.p.minMouseX):Math.min(m,k.p.maxMouseX)}if(k.p.maxX!=null){m=k.p.hmode?Math.min(m,k.p.maxMouseX):Math.max(m,k.p.minMouseX)}if(k.p.minY!=null){h=k.p.vmode?Math.max(h,k.p.minMouseY):Math.min(h,k.p.maxMouseY)}if(k.p.maxY!=null){h=k.p.vmode?Math.min(h,k.p.maxMouseY):Math.max(h,k.p.minMouseY)}f=g+((m-k.p.lastMouseX)*(k.p.hmode?1:-1));o=p+((h-k.p.lastMouseY)*(k.p.vmode?1:-1));if(k.p.xMapper){f=k.p.xMapper(p)}else{if(k.p.yMapper){o=k.p.yMapper(g)}}if(k.p.hasProxy&&k.proxyD!=null){if(k.canMoveH){k.proxyD.css(k.p.hmode?"left":"right",f+"px")}if(k.canMoveV){k.proxyD.css(k.p.vmode?"top":"bottom",o+"px")}}else{if(k.canMoveH){k.p.oRoot.css(k.p.hmode?"left":"right",f+"px")}if(k.canMoveV){k.p.oRoot.css(k.p.vmode?"top":"bottom",o+"px")}}k.p.lastMouseX=m;k.p.lastMouseY=h;k.fire("drag",{x:f,y:o})}},dragEnd:function(h){var f=h.data.j,k=f.p.hasProxy&&f.proxyD!=null;f.o.css("cursor",f.cursorO);f.p.oRoot.attr("dragging",false);if(k){if(f.isMoved){f.isMoved=false;if(f.p.setPosByProxy){var g=f.p.oRoot;if(f.p.isSetTop){g.css("top",f.proxyD.css("top"))}if(f.p.isSetLeft){g.css("left",f.proxyD.css("left"))}}}}b(document).unbind("mousemove",f.drag).unbind("mouseup",f.dragEnd);f.fire("dragEnd",{x:parseInt(f.p.oRoot.css(f.p.hmode?"left":"right"),10),y:parseInt(f.p.oRoot.css(f.p.vmode?"top":"bottom"),10)});if(k&&!f.p.hideProxy){f.proxyD.hide()}if(d.isIE){f.p.oRoot[0].releaseCapture()}}});b.fn.extend({DragJ:function(e){return new d.DragJ(this,e)},DRJ:function(e){return b(this).DragJ(e)}});this.ResizeJ=this.REJ=d.ResizeJ=d.REJ=d.BJ.extend({init:function(e,f){this._super(b.extend(true,{fjType:"REJ",d:4,miw:100,mih:100,maw:1500,mah:1500,padW:0,padH:0,callback:null,hasProxy:false,proxyColor:"#cccccc",onlyH:false,canDD:true,evts:{resizeStart:null,resizeEnd:null,resize:null}},f));this.initFn();this.o=e;this.o.bind("mousedown",{j:this},this.resizeStart);if(d.isIE){this.o.bind("mousemove",{j:this},this.resize).bind("mouseup",{j:this},this.resizeEnd)}else{this.o.bind("mousemove",{j:this},this.cursorStyle)}return this},initFn:function(){this._super()},resizeStart:function(m){var f=m.data.j;if(!f.p.canDD){return}m=d.Evt.fix(m);var h=m.srcElement||m.target;if(f.o[0]!=null&&m.button==(d.isIElt9?1:0)&&(h.style.cursor&&h.style.cursor.indexOf("resize")!=-1)){f.o.attr("resizing",true);if(f.p.hasProxy){var g=f.o[0].clientWidth+parseInt(f.o.css("border-left-width"),10)+parseInt(f.o.css("border-right-width"),10)-2;var k=f.o[0].clientHeight+parseInt(f.o.css("border-top-width"),10)+parseInt(f.o.css("border-bottom-width"),10)-2;if(f.proxy==null){f.proxy=b('<div><div style="position:relative;width:100%;height:100%;background-color:'+f.p.proxyColor+';filter:alpha(opacity=50);opacity: 0.5;"></div></div>');f.proxy.css({width:g,height:k,position:"absolute",top:f.o.css("top"),left:f.o.css("left"),border:"1px dashed black",zIndex:1000000000});f.o.after(f.proxy)}else{f.proxy.css({width:g,height:k,top:f.o.css("top"),left:f.o.css("left")}).show()}}if(d.isIE){f.o[0].setCapture()}else{m.preventDefault();b(document).bind("mousemove",{j:f},f.resize).bind("mouseup",{j:f},f.resizeEnd);f.o.unbind("mousemove",f.cursorStyle)}f.fire("resizeStart")}},cursorStyle:function(o){var m=o.data.j;if(!m.p.canDD){return}m.o.attr("resizing-pre",false);if(m.o.attr("dragging")==null||String(m.o.attr("dragging"))=="false"){o=d.Evt.fix(o);var g=o.srcElement||o.target;if(g.className&&g.className.indexOf("noRej")!=-1){return}var f=d.getXY(m.o[0]);var s=o.clientX-f.l+document.documentElement.scrollLeft+document.body.scrollLeft,r=o.clientY-f.t+document.documentElement.scrollTop+document.body.scrollTop;var q=m.o[0].currentStyle||document.defaultView.getComputedStyle(m.o[0],null);var t=parseInt(q.width,10),n=parseInt(q.height,10);m.p.cur="";m.p.cur=r<m.p.d?"n":(n-r+m.p.padH<m.p.d?"s":"");m.p.cur+=s<m.p.d?"w":(t-s+m.p.padW<m.p.d?"e":"");if(m.p.cur){var k=true;if(m.p.onlyH){if(m.p.cur=="e"||m.p.cur=="w"){k=true}else{k=false}}if(k){m.o.attr("resizing-pre",true);g.style.cursor=m.p.cur+"-resize";m.p.l=parseInt(q.left,10);m.p.t=parseInt(q.top,10);m.p.r=m.p.l+t;m.p.b=m.p.t+n;m.p.ex=o.screenX;m.p.ey=o.screenY}else{m.o.attr("resizing-pre",false);if(g.cur){g.style.cursor=g.cur}else{g.style.cursor=""}}}else{m.o.attr("resizing-pre",false);if(g.cur){g.style.cursor=g.cur}else{g.style.cursor=""}m.o[0].style.cursor=""}}},resize:function(n){var k=n.data.j;if(!k.p.canDD){return}var f=n;n=d.Evt.fix(n);if(String(k.o.attr("resizing"))=="true"){var h=n.screenX-k.p.ex;var g=n.screenY-k.p.ey;if(k.p.cur.indexOf("w")>-1){k.p.l+=h}else{if(k.p.cur.indexOf("e")>-1){k.p.r+=h}}if(k.p.cur.indexOf("n")>-1){k.p.t+=g}else{if(k.p.cur.indexOf("s")>-1){k.p.b+=g}}var m=k.o[0].style;if(k.p.hasProxy&&k.proxy!=null){m=k.proxy[0].style}if(k.p.r-k.p.l>k.p.miw&&k.p.r-k.p.l<k.p.maw){m.left=k.p.l+"px";if(k.p.hasProxy&&k.proxy!=null){m.width=(k.p.r-k.p.l+parseInt(k.o.css("padding-left"),10)+parseInt(k.o.css("padding-right"),10))+"px"}else{m.width=k.p.r-k.p.l+"px"}}if(k.p.b-k.p.t>k.p.mih&&k.p.b-k.p.t<k.p.mah){m.top=k.p.t+"px";if(k.p.hasProxy&&k.proxy!=null){m.height=(k.p.b-k.p.t+parseInt(k.o.css("padding-top"),10)+parseInt(k.o.css("padding-bottom"),10))+"px"}else{m.height=k.p.b-k.p.t+"px"}}k.p.ex+=h;k.p.ey+=g;k.fire("resize")}else{k.cursorStyle.call(k.o[0],f)}},resizeEnd:function(g){var f=g.data.j;if(!f.p.canDD){return}g=d.Evt.fix(g);if(g.button==(d.isIElt9?1:0)&&String(f.o.attr("resizing"))=="true"){f.o.attr("resizing",false);if(f.p.hasProxy&&f.proxy!=null){f.o.css({top:f.proxy.css("top"),left:f.proxy.css("left"),width:parseInt(f.proxy.css("width"),10)-parseInt(f.o.css("padding-left"),10)-parseInt(f.o.css("padding-right"),10),height:parseInt(f.proxy.css("height"),10)-parseInt(f.o.css("padding-top"),10)-parseInt(f.o.css("padding-bottom"),10)});f.proxy.hide()}if(d.isIE){f.o[0].releaseCapture()}else{f.o.bind("mousemove",{j:f},f.cursorStyle);b(document).unbind("mouseup",f.resizeEnd).unbind("mousemove",f.resize)}f.fire("resizeEnd")}}});b.fn.extend({ResizeJ:function(e){return new d.ResizeJ(this,e)},REJ:function(e){return b(this).ResizeJ(e)}});this.SplitterJ=this.SPJ=d.SplitterJ=d.SPJ=d.BJ.extend({init:function(e,g){var f=this;this._super(b.extend(true,{fjType:"SPJ",way:"h",oLeft:null,oRight:null,oTop:null,oBottom:null,minX:10,maxX:6000,minY:100,maxY:400,shift:{l:0,t:0},canDD:true,abMode:false,ddPosType:"offset",evts:{splitStart:null,splitEnd:null,split:null}},g));this.initFn();this.o=e;if(this.p.way=="h"){if(!c.isOpera){this.o.css("cursor","col-resize")}else{this.o.css("cursor","w-resize")}}else{if(!c.isOpera){this.o.css("cursor","row-resize")}else{this.o.css("cursor","n-resize")}}this.o.bind("mousedown",{j:this},this.splitStart);if(this.splitBar==null){this.splitBar=b("<div class='noRej'></div>");this.splitBar.css({width:0,height:0,position:"absolute",top:0,left:0,zIndex:1000,backgroundColor:"#797878",cursor:this.p.way=="h"?"col-resize":"row-resize",fontSize:0});this.o.eq(0).after(this.splitBar);if(this.o.length>1){this.o.not("div:first").each(function(h){f["splitBar"+(h+2)]=f.splitBar.clone();f.o.eq(h+1).after(f["splitBar"+(h+2)])})}}return this},initFn:function(){this._super()},splitStart:function(m){var h=m.data.j,g=h.p.ddPosType;if(!h.p.canDD){return}m=d.Evt.fix(m);h.fire("splitStart");var n=h.o[g]().top-(g=="offset"?h.o.parent()[g]().top:0)-(function(e){var j=parseInt(e,10);if(!c.isNaN(j)){return j}else{return 0}})(h.o.parent().css("border-top-width"));var k=h.o[g]().left-(g=="offset"?h.o.parent()[g]().left:0)-(function(e){var j=parseInt(e,10);if(!c.isNaN(j)){return j}else{return 0}})(h.o.parent().css("border-left-width"));if(h.splitBar!=null){h.splitBar.css({width:h.o.eq(0).width(),height:h.o.eq(0).height(),top:n+h.p.shift.t,left:k+h.p.shift.l}).show();if(h.o.length>1){h.o.not("div:first").each(function(e){h["splitBar"+(e+2)].css({width:h.o.eq(e+1).width(),height:h.o.eq(e+1).height(),top:n+h.p.shift.t,left:k+h.p.shift.l}).show()})}}if(h.p.way=="h"){var f=parseInt(h.splitBar.css("left"),10);h.p.lastMouseX=m.clientX;if(h.p.minX!=null){h.p.minMouseX=m.clientX-f+h.p.minX}if(h.p.maxX!=null){h.p.maxMouseX=h.p.minMouseX+h.p.maxX-h.p.minX}}else{var o=parseInt(h.splitBar.css("top"),10);h.p.lastMouseY=m.clientY;if(h.p.minY!=null){h.p.minMouseY=m.clientY-o+h.p.minY}if(h.p.maxY!=null){h.p.maxMouseY=h.p.minMouseY+h.p.maxY-h.p.minY}}b(document).bind("mousemove",{j:h},h.split).bind("mouseup",{j:h},h.splitEnd);if(d.isIE){h.splitBar[0].setCapture()}return false},split:function(n){var k=n.data.j;n=d.Evt.fix(n);var p,g,f,o;if(k.p.way=="h"){var m=n.clientX;g=parseInt(k.splitBar.css("left"),10);if(k.p.minX!=null){m=Math.max(m,k.p.minMouseX)}if(k.p.maxX!=null){m=Math.min(m,k.p.maxMouseX)}f=g+(m-k.p.lastMouseX);k.splitBar.css("left",f+"px");if(k.o.length>1){k.o.not("div:first").each(function(e){k["splitBar"+(e+2)].css("left",f+"px")})}k.p.lastMouseX=m}else{var h=n.clientY;p=parseInt(k.splitBar.css("top"),10);if(k.p.minY!=null){h=Math.max(h,k.p.minMouseY)}if(k.p.maxY!=null){h=Math.min(h,k.p.maxMouseY)}o=p+(h-k.p.lastMouseY);k.splitBar.css("top",o+"px");if(k.o.length>1){k.o.not("div:first").each(function(e){k["splitBar"+(e+2)].css("top",o+"px")})}k.p.lastMouseY=h}k.fire("split");return false},splitEnd:function(r){var m=r.data.j,k=m.p.ddPosType;var h=0,g=0,f=0,n=0;if(m.p.way=="h"){if(m.p.oLeft&&m.p.oRight){var s=parseInt(m.splitBar.css("width"),10),p=parseInt(m.p.oLeft.css("width"),10)+s+parseInt(m.p.oRight.css("width"),10),o=m.splitBar[k]().left;h=parseInt(o-m.p.oLeft[k]().left,10);m.p.oLeft.css("width",h);g=p-h-s;m.p.oRight.css("width",g);if(m.p.abMode){m.o.css("left",o);var q=o+m.o.width();m.p.oRight.css("left",q)}}else{if(m.p.oLeft){h=parseInt(m.splitBar[k]().left-m.p.oLeft[k]().left,10);m.p.oLeft.width(h)}else{if(m.p.oRight){}}}}else{var v=parseInt(m.splitBar.css("height"),10),u=parseInt(m.p.oTop.css("height"),10)+v+parseInt(m.p.oBottom.css("height"),10),t=m.splitBar[k]().top;f=parseInt(t-m.p.oTop.filter(":visible")[k]().top,10);m.p.oTop.css("height",f);n=u-f-v;m.p.oBottom.css("height",n);if(m.p.abMode){m.o.css("top",t);var w=t+m.o.height();m.p.oBottom.css("top",w)}}if(m.splitBar!=null){m.splitBar.css({width:0,height:0});if(m.o.length>1){m.o.not("div:first").each(function(e){m["splitBar"+(e+2)].css({width:0,height:0})})}}b(document).unbind("mousemove",m.split).unbind("mouseup",m.splitEnd);m.fire("splitEnd",{l:h,r:g,t:f,b:n});if(d.isIE){m.splitBar[0].releaseCapture()}}});b.fn.extend({SplitterJ:function(e){return new d.SplitterJ(this,e)},SPJ:function(e){return b(this).SplitterJ(e)}})});FJ.define("widget.Gesture",function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.GestureJ=this.GTJ=d.GestureJ=d.GTJ=d.BJ.extend({init:function(e,f){this._super(b.extend(true,{fjType:"GTJ",multiTapStart:false,preventScroll:true,preventClick:true,scrollElemV:null,scrollElemH:null,durationLimitH:300,durationLimitS:150,distanceLimitH:30,distanceLimitV:75,scrollMaxX:null,scrollMaxY:null,scrollMinX:10,scrollMinY:5,scalePinchClose:0.05,scalePinchOpen:0.05,durationPinch:100,durationRotate:100,durationPan:null,rotationCcw:5,rotationCw:5,tapDuration:350,tapLimitX:0,tapLimitY:0,holdLimitX:1,holdLimitY:1,shakeLimit:0.23,shakeDuration:100,shakeFreezeDelay:800,tapHoverCls:null,tapHoverElem:null,evts:{tapStart:null,tap:null,pan:null,tapEnd:null,tapHold:null,swipe:null,swipeLeft:null,swipeRight:null,swipeTop:null,swipeBottom:null,scrollEnd:null,pinch:null,rotate:null,shake:null}},f));this.oTarget=e;this.initFn();return this},initFn:function(){this._super();if(c.isMobile){this.startPosX=0;this.lastPosX=0;this.startPosY=0;this.lastPosY=0;this.dx=0;this.dy=0;this.lastPinchTime=0;this.lastScale=0;this.lastPanTime=0;this.lastRotateTime=0;this.lastRotation=0;if(this.p.evts.tapHold){if(!this.p.scrollElemV){this.p.scrollElemV=c.oBody}if(!this.p.scrollElemH){this.p.scrollElemH=this.p.scrollElemV}}this.supportShake="DeviceMotionEvent" in window;if(this.supportShake&&this.p.evts.shake){this.lastShakeX=0;this.lastShakeY=0;this.lastShakeZ=0;this.lastTime=0;this.freezeShake=false}}this.bindTouchEvt()},bindTouchEvt:function(){var f={j:this},e=this.p.evts;if(c.isMobile){if(e.tapStart||e.tap||e.pan||e.tapEnd||e.tapHold||e.swipe||e.swipeLeft||e.swipeRight||e.swipeTop||e.swipeBottom||e.scrollEnd||e.pinch){this.oTarget.on("touchstart",f,this.touchStart).on("touchmove",f,this.touchMove).on("touchend",f,this.touchEnd).on("touchcancel",f,this.touchEnd)}if(this.supportShake){this.oTarget.on("devicemotion",f,this.deviceMotion)}}else{if(e.tap){this.oTarget.on("click",function(g){b(this).trigger("tap",{evt:g})})}}if(e.tap){this.oTarget.on("tap",function(j,h){var g=j;if(h&&h.evt){g=h.evt}f.j.fire("tap",{evt:g,param:h})})}},touchStart:function(o,g){var k=o.data.j,m=k.getTouchPos(o),s=m[0],v=s[0],t=s[1],w=m.length,n={evt:o,param:g,x:v,y:t,fingers:w},f=k.p.evts.tapHold,q=null,h=null;k.tapFingers=w;k.startPosX=v;k.lastPosX=v;k.startPosY=t;k.lastPosY=t;if(w==1){k.duration=c.Date.getTime();k.isScroll=null;k.scale=null;k.lastScale=0;k.isPinch=false;k.rotation=null;k.lastRotation=0;k.isRotate=false;k.dx=0;k.dy=0;if(f){q=k.p.scrollElemV[0];k.scrollElemTop=q.scrollTop;h=k.p.scrollElemH[0];k.scrollElemLeft=h.scrollLeft}k.changeTapHover(o);k.fire("tapStart",n);if(f){k.timeoutH=c.lazyDo(function(){if(!k.isPinch&&!k.isRotate&&k.dx<=k.p.holdLimitX&&k.dy<=k.p.holdLimitY&&k.scrollElemTop==q.scrollTop&&k.scrollElemLeft==h.scrollLeft){n.fingers=k.tapFingers;k.fire("tapHold",n)}},k.p.durationLimitH)}}else{if(w==2){var u=m[0],r=m[1];k.fingerDistS=k.getPosDistance(u,r);k.fingerRotateS=k.getPosAngle(u,r)}if(k.p.multiTapStart){k.fire("tapStart",n)}}},touchMove:function(z){var v=z.data.j,w=v.getTouchPos(z),n=w[0],q=n[0],p=n[1],s=v.p.scrollMaxX,r=v.p.scrollMaxY,m=v.p.scrollMinX,h=v.p.scrollMinY,k=w.length,A=k===2&&(v.p.evts.pinch||v.p.evts.rotate);v.lastPosX=q;v.dx=v.lastPosX-v.startPosX;v.lastPosY=p;v.dy=v.lastPosY-v.startPosY;if(A){z.preventDefault()}if(v.isScroll){return}if(v.isScroll==null){if(s!=null&&Math.abs(v.dy)>=h&&Math.abs(v.dx)<=s){v.isScroll=true;return}if(r!=null&&Math.abs(v.dx)>=m&&Math.abs(v.dy)<=r){v.isScroll=true;return}}if(v.p.preventScroll){z.preventDefault()}v.isScroll=false;var t=v.getMoveDir(),o=c.Date.getTime();if(A){var g=o-v.lastPinchTime;if(g>v.p.durationPinch){v.lastPinchTime=o;v.isPinch=true;var B=v.getPosScale(w[0],w[1]),f=null;if(B!=v.lastScale){v.lastScale=B;if(((B<1)&&(B%1)<(1-v.p.scalePinchClose))||((B>1)&&(B%1)>v.p.scalePinchOpen)){f=B<1?-1:1;v.scale=B;v.p.preventScroll=true;v.fire("pinch",{evt:z,scale:B,dir:f})}}}g=o-v.lastRotateTime;if(g>v.p.durationRotate){v.lastRotateTime=o;v.isRotate=true;var u=v.getPosRotation(w[0],w[1]),f=null;if(u!=v.lastRotation){v.lastRotation=u;if(((u<1)&&(-1*(u)>v.p.rotationCcw))||((u>1)&&(u>v.p.rotationCw))){f=u<1?-1:1;v.rotation=u;v.p.preventScroll=true;v.fire("rotate",{evt:z,rotation:u,dir:f})}}}}if(v.p.durationPan==null||o-v.lastPanTime>v.p.durationPan){v.lastPanTime=o;v.fire("pan",{evt:z,x:q,y:p,dx:v.dx,dy:v.dy,dirX:t[0],dirY:t[1],fingers:k,touchId:v.getTouchIndex(z)})}},touchEnd:function(o){var m=o.data.j,k=m.isScroll;if(o.originalEvent.touches.length>0){return}if(m.timeoutH){clearTimeout(m.timeoutH);m.timeoutH=null}m.changeTapHover(o,1);if(m.isScroll){m.fire("scrollEnd",{evt:o});return}var f=m.getMoveDir(),p={evt:o,x:m.lastPosX,y:m.lastPosY,dx:m.dx,dy:m.dy,dirX:f[0],dirY:f[1],fingers:m.tapFingers},q=Math.abs(m.dx)>m.p.distanceLimitH,g=Math.abs(m.dy)>m.p.distanceLimitV,r=c.Date.getTime(),h=r-m.duration;if(h<=m.p.durationLimitS){var n="";if(q){if(f[0]=="l"){n+="l";m.fire("swipeLeft",p)}else{n+="r";m.fire("swipeRight",p)}}if(g){if(f[1]=="t"){n+="t";m.fire("swipeTop",p)}else{n+="b";m.fire("swipeBottom",p)}}if(q||g){p.dirS=n;m.fire("swipe",p)}}if(h<=m.p.tapDuration&&m.dx<=m.p.tapLimitX&&m.dy<=m.p.tapLimitY){if(m.p.preventClick){o.preventDefault()}m.fire("tap",p)}if(m.scale!=null){p.scale=m.scale}if(m.rotation!=null){p.rotation=m.rotation}m.fire("tapEnd",p)},deviceMotion:function(m){var k=m.data.j,h=m.originalEvent.accelerationIncludingGravity,g=c.Date.getTime(),r=g-k.lastTime,n={evt:m};if(r>k.p.shakeDuration){k.lastTime=g;var q=h.x,p=h.y,o=h.z,f=Math.abs(q+p+o-k.lastShakeX-k.lastShakeY-k.lastShakeZ)/r;if(f>k.p.shakeLimit){if(!k.freezeShake){k.freezeShake=true;k.fire("shake",n)}c.lazyDo(function(){this.freezeShake=false},k.p.shakeFreezeDelay,"ld_gtjShake",k)}k.lastShakeX=q;k.lastShakeY=p;k.lastShakeZ=o}},getTouchPos:function(n){var o=n.originalEvent,m=o.touches,k=this.oTarget.offset(),j=null,g=[];for(var h=0,f=m.length;h<f;h++){j=m[h];g[g.length]=[j.pageX-k.left,j.pageY-k.top]}return g},getMoveDir:function(){var f,e;if(this.dx>0){f="r"}else{f="l"}if(this.dy>0){e="b"}else{e="t"}return[f,e]},getTouchIndex:function(j){var m=j.originalEvent,k=m.targetTouches[0],h=m.touches;for(var g=0,f=h.length;g<f;g++){if(h[g].identifier===k.identifier){return g}}},getPosDistance:function(g,f){var e=g[0]-f[0],h=g[1]-f[1];return Math.sqrt(Math.pow(e,2)+Math.pow(h,2))},getPosScale:function(f,e){return this.getPosDistance(f,e)/this.fingerDistS},getPosAngle:function(g,f){var e=g[0]-f[0],h=g[1]-f[1];return Math.atan2(h,e)*180/Math.PI},getPosRotation:function(f,e){return this.getPosAngle(f,e)-this.fingerRotateS},changeTapHover:function(m,k){var f=this,j=f.p,g=j.tapHoverCls,h=j.tapHoverElem,n;if(!g){return}n=h instanceof Object?h:(h==="tap"?b(m.target):f.oTarget);if(k){c.lazyDo(function(){n.removeClass(g)},50)}else{n.addClass(g)}}});b.fn.extend({GestureJ:function(e){if(this&&this.length){return new c.GestureJ(this,c.GTJ_commonConfig?b.extend(true,c.clone(c.GTJ_commonConfig),e):e)}},GTJ:function(e){return b(this).GestureJ(e)},onGestureJ:function(g,e,f){this.each(function(){var j=b(this),h=b.extend(true,{preventScroll:false,scrollMaxX:50,scrollMaxY:50,evts:{}},f);if(!h.tapHoverCls){if(j.hasClass("btnj")||j.hasClass("pj-head-btn")){h.tapHoverCls="btnj-hover"}}h.evts[g]=e;j.GTJ(h)});return this}})});FJ.define("widget.LoadMask",function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.LoadMaskJ=this.LMJ=d.LoadMaskJ=d.LMJ=d.CJ.extend({init:function(e,f){this._super(e,b.extend(true,{fjType:"LMJ",renderTo:e,renderType:"prepend",imgSrc:LMJ.loadImgSrc(11),isCover:true,width:"100%",height:"100%",borderWidth:0,zIndex:1,colorParams:{bgColor:"transparent"}},f));this.initFn();return this},initFn:function(){this._super();this.create()},create:function(){this._super();var e=this;this.divOut.addClass("lmj").attr("id","LMJ_"+this.objId);this.createLoading();return this},createLoading:function(){this.loadH1=b('<div class="lmj_loadH1"></div>');this.loadH2=b('<div class="lmj_loadH2"><div style="width:100%;height:100%;" class="cj_divCvFd1"><div class="cj_divCvFd2"><img class="cj_divCvFd3" src="'+this.p.imgSrc+'" /></div></div></div>');this.loading=b("<div></div>").append(this.loadH1).append(this.loadH2);if(!this.p.isCover){this.loadH1.hide();this.loadH2.css("position","static")}this.divOut.append(this.loading).css({zIndex:this.p.zIndex})},show:function(e){this.divOut.show();return this},hide:function(e){this.divOut.hide();return this}});d.LMJ.loadImgSrc=function(e){return LMJ.imgSrc+"loading"+e+".gif"};d.LMJ.preLoadImg=function(e){d.Image.preLoad(LMJ.loadImgSrc(e))};d.LMJ.getLoadImg=function(g,f){var e='<img src="'+LMJ.loadImgSrc(g)+'" />';if(!f){return b(e)}else{return e}};b.fn.extend({LoadMaskJ:function(e){if(this&&this.length>0){return new d.LoadMaskJ(this,c.LMJ_commonConfig?b.extend(true,c.clone(c.LMJ_commonConfig),e):e)}},LMJ:function(e){return b(this).LoadMaskJ(e)}});d.LMJ.imgSrc=d.imgPath+"LoadMask/"});FJ.define("widget.Panel",["widget.LoadMask"],function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.PanelJ=this.PJ=d.PanelJ=d.PJ=d.CJ.extend({init:function(e,f){this._super(e,b.extend(true,{fjType:"PJ",renderTo:e,renderType:"append",layoutDelay:500,title:"面板",imgTitleSrc:PJ.imgFolderSrc+"HeadIcon1.png",imgCloseSrc:PJ.imgFolderSrc+"FDnewButton.gif",imgSize:{w:16,h:16},showHeadImg:false,isCanClose:true,isCanMinimize:true,isCanFullScreen:false,divState:"max",divStateFs:"normal",isInitShow:true,borderWidth:1,borderWidthB:null,speed:500,showSpeed:300,loadSpeed:1,iframeTimeout:5,minSpeed:500,left:null,top:null,widthB:null,heightB:null,shiftPercentH:0,isAutoSetHeight:true,isAutoSetWidth:true,bodyPadding:null,outPadding:{t:0,r:0,b:0,l:0},zIndex:10,zIndexL:1,loadType:"html",onlyFirstLoad:null,loadAfterShow:true,loadOnInit:false,ajaxParams:{},bodyInId:null,noBodyScroll:false,noBodyScrollX:false,noBodyScrollY:false,iframeId:null,fnHtml:null,pHtml:null,bodyUrl:null,isAsync:true,showLoading:false,headHeight:25,footHeight:27,hasShadow:false,showHead:true,showFoot:true,isRenderHF:true,radius:0,canClose:true,autoBodySize:false,showOnInit:false,showRendorBody:false,hasHeadClose:true,btns:[{txt:"按钮1",fn:null}],hasDivGray:false,grayZindex:100000,grayOpacity:80,grayHideScroll:false,colorParams:{bgColorBody:null,borderBody:null,fontColorBody:null,shadow:null,bgColorHead:null,bgColorHeadJ:null,bgColorHeadJT:null,bgColorFoot:null,bgColorFootJ:null,bgColorFootJT:null,fontColorHead:null,buttonColor:null,buttonColorG:null,grayColor:"#373737"},evts:{afterBodyLoadShow:null,afterBodyLoadReload:null,afterBodyLoad:null,afterClose:null,afterReLayout:null,beforeClose:null},eType:(function(g){return{afterBodyLoadShow:g,afterBodyLoadReload:g,afterBodyLoad:g,afterBodyLoadI:g,afterClose:g,afterRender:g,beforeClose:g,beforeBodyLoad:g,afterFirstLoad:g}})("PJ")},f));if(this.p.loadHTML!=null){this.p.fnHtml=this.p.loadHTML}if(this.p.loadHTMLParams!=null){this.p.pHtml=this.p.loadHTMLParams}if(this.p.urlType!=null){this.p.loadType=this.p.urlType}if(this.p.url!=null){this.p.bodyUrl=this.p.url}if(this.p.id!=null){this.p.bodyInId=this.p.id}if(this.p.modal!=null){this.p.hasDivGray=this.p.modal}this.pjBody=null;this.pjLoad=null;this.objId=null;this.objOff=null;this.pjHead=null;this.pjTitle=null;this.pjBtnClose=null;this.pjBtnMin=null;this.isFirstLoad=true;this.fDdivGray=null;this.initFn();return this},initFn:function(){var e=this;this._super();this.create();if(this.p.loadOnInit){this.loadBody()}if(this.p.showOnInit){this.show()}},create:function(f){var j=this;this._super(f!=null?f:this.p.isInitShow);var n=d.isIElt9||(d.isIEgt9&&this.p.radius<=0);this.divOut.attr("id","PJ_"+this.objId).addClass("pj").css({paddingTop:(this.p.borderWidth>1?this.p.headHeight+2:this.p.headHeight+1)+"px",paddingBottom:(this.p.borderWidth>1?this.p.footHeight+2:this.p.footHeight+1)+"px",paddingLeft:this.p.outPadding.l,paddingRight:this.p.outPadding.r,zIndex:this.p.zIndex,width:this.p.width,height:this.p.isAutoSetHeight?this.p.height:"auto",left:this.p.right==null?this.p.left:"auto",top:this.p.bottom==null?this.p.top:"auto",right:this.p.right!=null?this.p.right:"auto",bottom:this.p.bottom!=null?this.p.bottom:"auto"});if(this.p.colorParams.bgColorHeadJ){this.divOut.css("background-color",this.p.colorParams.bgColorHeadJ)}this.pjHead=b('<div id="pj_head_'+this.objId+'" class="pj_head"></div>');this.pjHead.css("height",this.p.headHeight+"px");if(this.p.colorParams.bgColorHead){this.pjHead.css("background-color",this.p.colorParams.bgColorHead)}if(c.isIElt9){this.pjHead.addClass("pj_filterBgHead")}else{if(c.isOpera||c.isIEgt9){this.pjHead.addClass("pj_svgBgHead")}else{if(c.isFF){this.pjHead.addClass("pj_bgHead_ff")}else{if(c.isWebkit){this.pjHead.addClass("pj_bgHead_wk")}}}}this.pjHead.css({borderBottomWidth:this.p.borderWidth>=3?this.p.borderWidth-1:this.p.borderWidth});if(this.p.colorParams.bgColorHeadJ){this.pjHead.css("border-bottom-color",this.p.colorParams.bgColorHeadJ)}if(!this.p.showHead){this.divOut.css({paddingTop:0});this.pjHead.hide()}this.pjHeadImg=b('<img style="width:'+this.p.imgSize.w+"px;height:"+this.p.imgSize.h+"px;"+(!this.p.showHeadImg?"display:none;":"")+'" class="pj_img" src="'+this.p.imgTitleSrc+'" />');this.pjTitle=b('<div id="pj_title_'+this.objId+'" class="pj_title" >'+this.p.title+"</div>");if(this.p.colorParams.fontColorHead){this.pjTitle.css("color",this.p.colorParams.fontColorHead)}this.pjBtnClose=b('<div title="关闭" class="pj_btnR pj-head-btn pj-close" ><i class="icon-remove-circle" ></i></div>').onGestureJ(c.Evt.click,function(){j.close()});this.pjBtnMin=b('<div title="最小化" class="pj_btnR pj-head-btn pj-min" ><i class="icon-resize-small" ></i></div>').onGestureJ(c.Evt.click,function(r,q){j.maxMin();q.evt.stopPropagation()});this.pjBtnFullScreen=b('<div title="全屏" class="pj_btnR pj-head-btn pj-fullscreen" ><i class="icon-fullscreen" ></i></div>').onGestureJ(c.Evt.click,function(r,q){j.fullScreen(j.p.showSpeed>1?0:1);q.evt.stopPropagation()});var e=this.p.colorParams.buttonColor;if(e){this.pjBtnClose.css("background-color",e);this.pjBtnMin.css("background-color",e);this.pjBtnFullScreen.css("background-color",e)}var h=this.p.colorParams.buttonColorG;if(h){this.pjBtnClose.css("border-color",h);this.pjBtnMin.css("border-color",h);this.pjBtnFullScreen.css("border-color",h)}this.pjHead.addClass("pj-drj").append(this.pjHeadImg.addClass("pj-drj")).append(this.pjTitle.addClass("pj-drj"));if(this.p.hasHeadClose){this.pjHead.append(this.pjBtnClose).append(this.pjBtnFullScreen).append(this.pjBtnMin)}this.pjHead.css("cursor","auto");if(!this.p.isCanClose){this.pjBtnClose.hide()}if(!this.p.isCanMinimize){this.pjBtnMin.hide()}if(!this.p.isCanFullScreen){this.pjBtnFullScreen.hide();if(this.p.autoBodySize){b(window).bind("resize",function(){if(!j.divOut.is(":hidden")){c.lazyDo(function(){this.reLayout()},j.p.layoutDelay,"ld_pj_layout",j)}})}}else{b(window).bind("resize",function(){if(!j.divOut.is(":hidden")&&j.p.divStateFs=="fullscreen"){c.lazyDo(function(){var q=c.pageHeight()-(this.p.borderWidth*2)-parseFloat(this.divOut.css("padding-top"))-parseFloat(this.divOut.css("padding-bottom"));var p=c.pageWidth()-(this.p.borderWidth*2)-parseFloat(this.divOut.css("padding-left"))-parseFloat(this.divOut.css("padding-right"));this.alterSize({height:q,width:p})},j.p.layoutDelay,"ld_pjFS",j)}})}var m=this.p.borderWidthB;this.pjBody=b('<div id="pj_body_'+this.objId+'" class="pj_body" ></div>');if(this.p.bodyPadding){this.pjBody.css("padding",this.p.bodyPadding.t+"px "+this.p.bodyPadding.r+"px "+this.p.bodyPadding.b+"px "+this.p.bodyPadding.l+"px")}if(this.p.widthB!=null){this.pjBody.css("width",this.p.widthB)}if(this.p.heightB!=null){this.pjBody.css("height",this.p.heightB)}if(m!=null){if(c.RX.numZ(m)){this.pjBody.css("border-width",m)}else{if(typeof m==="object"){this.pjBody.css({borderTopWidth:m.t,borderRightWidth:m.r,borderBottomWidth:m.b,borderLeftWidth:m.l})}}}if(this.p.colorParams.bgColorBody){this.pjBody.css("background-color",this.p.colorParams.bgColorBody)}if(this.p.colorParams.fontColorBody){this.pjBody.css("color",this.p.colorParams.fontColorBody)}if(this.p.colorParams.borderBody){this.pjBody.css("border-color",this.p.colorParams.borderBody)}this.bodyIn=b('<div class="pj_bodyIn"></div>');if(this.p.bodyInId){this.bodyIn.attr("id",this.p.bodyInId)}if(this.p.noBodyScroll){this.bodyIn.css("overflow","hidden")}else{if(this.p.noBodyScrollX){this.bodyIn.css("overflow-x","hidden")}if(this.p.noBodyScrollY){this.bodyIn.css("overflow-y","hidden")}}this.pjLoad=b(this.pjBody).LMJ({imgSrc:this.p.imgLoadSrc,zIndex:this.p.zIndexL});this.pjFoot=b('<div id="pj_foot_'+this.objId+'" class="pj_foot"></div>');this.pjFoot.css("height",this.p.footHeight+"px");if(this.p.colorParams.bgColorFoot){this.pjFoot.css("background-color",this.p.colorParams.bgColorFoot)}if(c.isIElt9){this.pjFoot.addClass("pj_filterBgFoot")}else{if(c.isOpera||c.isIEgt9){this.pjFoot.addClass("pj_svgBgFoot")}else{if(c.isFF){this.pjFoot.addClass("pj_bgFoot_ff")}else{if(c.isWebkit){this.pjFoot.addClass("pj_bgFoot_wk")}}}}this.pjFoot.css({borderTopWidth:this.p.borderWidth>=3?this.p.borderWidth-1:this.p.borderWidth});if(this.p.colorParams.bgColorFootJT){this.pjFoot.css("border-top-color",this.p.colorParams.bgColorFootJT)}if(!this.p.showFoot){this.divOut.css({paddingBottom:0});this.pjFoot.hide()}if(this.p.btns!=null){for(var g=0;g<this.p.btns.length;g++){this["pjBtn"+(g+1)]=b("<input type='button' value='"+this.p.btns[g].txt+"' class='pj_btn' />").addClass("pj_btnBottom");(function(p){j["pjBtn"+(p+1)].click(function(){if(j.p.btns[p].fn!=null){j.p.btns[p].fn.call(j)}})})(g);this.pjFoot.append(this["pjBtn"+(g+1)])}}var k;if(d.isFF){if(!d.isFFgt4){k="-moz-border-radius"}else{k="border-radius"}}else{if(d.isWebkit){k="-webkit-border-radius"}else{if(d.isOpera||d.isIEgt9){k="border-radius"}}}if(k&&this.p.radius>0){this.divOut.css(k,this.p.radius+"px");this.pjHead.css(k,this.p.radius+"px "+this.p.radius+"px 0 0");this.pjFoot.css(k,"0 0 "+this.p.radius+"px "+this.p.radius+"px")}this.radiusStyle=k;var o;if(this.p.hasShadow&&this.p.showType!=="slide"){this.divOut.addClass("pj_shadow");if(this.p.colorParams.shadow){if(d.isFF){if(!d.isFFgt4){o="-moz-box-shadow"}else{o="box-shadow"}}else{if(d.isWebkit){o="-webkit-box-shadow"}else{if(d.isOpera||d.isIEgt9){o="box-shadow"}}}if(o){this.divOut.css(o,"0px 0px 5px "+this.p.colorParams.shadow)}}}if(this.p.isRenderHF){this.divOut.append(this.pjHead)}this.divOut.append(this.pjBody.append(this.bodyIn));if(this.p.isRenderHF){this.divOut.append(this.pjFoot)}this.fire("afterRenderI");this.fire("afterRender","PJ");return this},show:function(g,e,f){this._super();if(this.p.loadAfterShow&&!g){this.loadBody("show",null,e,f)}this.reLayout();return this},close:function(){if(this.fire("beforeClose","PJ")===false){return this}this._super();this.fire("afterClose","PJ")},loadBody:function(j,e,f,k){if(j==null){j="show"}if(j!=="reload"&&this.p.onlyFirstLoad!=null){if(this.p.onlyFirstLoad){this.p.onlyFirstLoad=false}else{if(e){e.call(this)}this.fire("afterFirstLoad");return this}}var h=this;if(!e){this.showLoad(true)}this.fire("beforeBodyLoad","PJ");var g=function(){switch(h.p.loadType){case"html":if(h.p.fnHtml!=null){var s=h.p.fnHtml.call(h,h.p.pHtml);if(e!=null){e.call(h)}var y=document.createDocumentFragment();h.bodyIn.contents().each(function(){y.appendChild(this)});h.bodyIn.append(s);var n=y.childNodes;for(var r=0,o=n.length;r<o;r++){if(n[r]){y.removeChild(n[r])}}y=null}h.loadBodyComplete(j,e,f,k);break;case"ajax":b.ajax(b.extend(true,{type:"get",url:h.p.bodyUrl,cache:false,async:h.p.isAsync,success:function(A){if(e!=null){e.call(h)}var z=h.fire("ajaxLoadComplete",{data:A});if(!z){z=A}h.bodyIn.html(z);h.loadBodyComplete(j,e,f,k)},error:function(B,z){if(e!=null){e.call(h)}var A=h.fire("ajaxLoadError",{xhr:B,status:z});if(!A){A=""}h.bodyIn.html(A);h.loadBodyComplete(j,e,f,k)}},h.p.ajaxParams));break;case"iframe":var u=h.p.bodyUrl.indexOf("?")!=-1?(h.p.bodyUrl+"&ts="+new Date().getTime()):(h.p.bodyUrl+"?ts="+new Date().getTime());var p=!h.p.iframeId?"iframe_"+h.objId:h.p.iframeId;h.bodyIn.html("<iframe id='"+p+"' style='position:absolute;z-index:0;border:0;' src='"+u+"' frameborder=none width=100% height=100%></iframe><div id='moveIframe_"+h.objId+"' style='display:none;width:100%;height:100%;position:absolute;z-index:100003;'></div>");var t=h.bodyIn.find("#"+p),q=t[0],w=false;h.bodyIframe=t;if(q.attachEvent){q.attachEvent("onload",function(){if(!v){if(e!=null){e.call(h)}h.loadBodyComplete(j,e,f,k);w=true}})}else{q.onload=function(){if(!v){if(e!=null){e.call(h)}h.loadBodyComplete(j,e,f,k);w=true}}}var r=0,v=false;var m=setInterval(function(){if(w){clearInterval(m)}r++;if(r>=h.p.iframeTimeout){v=true;if(e!=null){e.call(h)}h.loadBodyComplete(j,e,f,k);clearInterval(m)}},1000);break}};if(h.p.loadSpeed>1){c.lazyDo(function(){g()},h.p.loadSpeed)}else{g()}return h},loadBodyComplete:function(g,e,f,h){switch(g){case"show":this.fire("afterBodyLoadShow","PJ");break;case"reload":this.fire("afterBodyLoadReload","PJ");break}this.bodyIn.scrollTop(0);this.fire("afterBodyLoadI","PJ");this.fire("afterBodyLoad","PJ");this.fire("afterFirstLoad","PJ");if(!e){this.showLoad(false)}this.isFirstLoad=false;this.fire("afterBodyLoadTabs",{type:g,p:h});if(f){f.call(this)}},reload:function(g,f,e){if(g){this.p.bodyUrl=g}if(f){this.p.ajaxParams=b.extend(true,this.p.ajaxParams,f)}this.loadBody("reload",null,e)},showLoad:function(e){if(this.p.showLoading&&this.pjLoad!=null){if(e===true||e===1||e==null){this.pjLoad.show()}else{this.pjLoad.hide()}}return this},alterTitle:function(e){if(this.pjTitle!=null){this.pjTitle.html(e)}},alterSize:function(g,f){var e=this;this.alterP(g);if(f!=null&&!c.isIElt9){this.divOut.animate({width:this.p.width,height:this.p.height,left:this.p.left,top:this.p.top},f,function(){c.lazyDo(function(){this.reLayout()},200,"ld_pjAS",e)})}else{this.divOut.css({width:this.p.width,height:this.p.height,left:this.p.left,top:this.p.top});this.reLayout()}},min:function(f,e){if(this.pjBtnMin!=null){if(this.p.divState=="max"){this.maxMin(null,f,e)}}},max:function(f,e){if(this.pjBtnMin!=null){if(this.p.divState=="min"){this.maxMin(null,f,e)}}},minFn:function(f,e){if(this.rej!=null&&!e){this.rej.p.onlyH=true}this.divOut.css({borderBottomWidth:this.p.borderWidth>=3?this.p.borderWidth-2:1,borderBottomStyle:"solid"});this.pjBtnMin.attr("title","最大化");if(this.p.showFoot){this.divOut.css({paddingBottom:0});this.pjFoot.hide()}this.pjBody.hide();this.p.divState="min";if(f){f.call(this)}},maxFn:function(f,e){if(this.rej!=null&&!e){this.rej.p.onlyH=false}this.divOut.css({borderBottomWidth:this.p.borderWidth,borderBottomStyle:"solid"});this.pjBtnMin.attr("title","最小化");if(this.p.showFoot){this.divOut.css({paddingBottom:(this.p.borderWidth>1?this.p.footHeight+2:this.p.footHeight+1)+"px"});this.pjFoot.show()}this.p.divState="max";if(f){f.call(this)}},maxMin:function(g,j,f){var h=this,e=this.p.isAutoSetHeight,k=this.divOut;if(j==null){j=this.p.minSpeed}if(this.pjBtnMin!=null&&this.p.divStateFs=="normal"){if(this.p.divState=="max"){if(j>1){if(!e){k.css("height",k.height())}c.lazyDo(function(){k.transitionJ({height:0,evts:{stop:function(){h.minFn(g,f)}}})},25)}else{this.divOut.height(0);this.minFn(g,f)}}else{if(this.p.divState=="min"){this.pjBody.show();if(j>1){k.transitionJ({height:this.p.height,evts:{stop:function(){h.maxFn(g,f)}}})}else{this.divOut.height(this.p.height);this.maxFn(g,f)}}}}},fullScreen:function(g){if(this.pjBtnFullScreen!=null&&this.p.divState=="max"){if(this.p.divStateFs=="normal"){this.pjBtnFullScreen.attr("title","退出全屏");var j=b("html"),m=j.scrollTop(),k=j.scrollLeft();this.ofO=j.css("overflow");j.css("overflow","hidden");this.topO=parseFloat(this.divOut.css("top"));this.leftO=parseFloat(this.divOut.css("left"));this.hO=this.divOut.height();this.wO=this.divOut.width();var f=c.pageHeight()-(this.p.borderWidth*2)-parseFloat(this.divOut.css("padding-top"))-parseFloat(this.divOut.css("padding-bottom"));var e=c.pageWidth()-(this.p.borderWidth*2)-parseFloat(this.divOut.css("padding-left"))-parseFloat(this.divOut.css("padding-right"));this.alterSize({height:f,width:e,top:m!=null?m:0,left:k!=null?k:0},!g?300:null);if(this.p.fjType!="PJ"&&typeof DRJ!="undefined"){if(this.drj){this.drj.p.canDD=false}if(this.rej){this.rej.p.canDD=false}}this.p.divStateFs="fullscreen"}else{if(this.p.divStateFs=="fullscreen"){this.pjBtnFullScreen.attr("title","全屏");this.alterSize({height:this.hO,width:this.wO,top:this.topO,left:this.leftO},!g?300:null);var j=b("html");j.css("overflow",this.ofO);if(this.p.fjType!="PJ"&&typeof DRJ!="undefined"){if(this.drj){this.drj.p.canDD=true}if(this.rej){this.rej.p.canDD=true}}this.p.divStateFs="normal"}}}},addDivGray:function(){var e=this;if(!e.p.hasDivGray){return}if(!this.winjStoGrayFn){this.winjStoGrayFn=function(){c.lazyDo(function(){this.fDdivGray.css({width:c.pageWidth(),height:"100%"})},300,"ld_winjModal",e)}}this.divOut.css("z-index",this.p.grayZindex+2);this.fDdivGray=b('<div id="divDg_'+this.objId+'" style="background-color:'+this.p.colorParams.grayColor+";filter:alpha(opacity="+this.p.grayOpacity+");opacity:"+this.p.grayOpacity/100+";position:fixed;top:0;left:0;z-index:"+this.p.grayZindex+';"></div>');this.fDdivGray.css({width:c.pageWidth(),height:"100%"});b(window).bind("resize",this.winjStoGrayFn)},renderDivGray:function(){var e=this;if(!e.p.hasDivGray){return}if(e.p.grayHideScroll){var f=b("html");e.ofOW=f.css("overflow");f.css("overflow","hidden")}d.oBody.prepend(e.fDdivGray)},deleteDivGray:function(){var e=this;if(!e.p.hasDivGray){return}c.lazyDo(function(){if(e.p.grayHideScroll){var f=b("html");f.css("overflow",e.ofOW)}if(b("#divDg_"+e.objId).length>0){e.divOut.css("z-index",e.p.zIndex);if(e.p.showSpeed>1){e.fDdivGray.animate({opacity:0},300,function(){e.fDdivGray.remove()})}else{e.fDdivGray.remove()}if(e.winjStoGrayFn){b(window).unbind("resize",e.winjStoGrayFn)}}},100)},reLayout:function(){var h=this,g=h.p,f=g.shiftPercentH,e=h.divOut;if(f&&c.RX.percent(g.height)){e.height(g.height).height(e.height()-f)}h.fire("afterReLayout");if(g.evts.afterFixSize){h.fire("afterFixSize")}return h}});b.fn.extend({PanelJ:function(e){if(this&&this.length>0){return new d.PanelJ(this,c.PJ_commonConfig?b.extend(true,c.clone(c.PJ_commonConfig),e):e)}},PJ:function(e){return b(this).PanelJ(e)}});PJ.imgFolderSrc=d.imgPath+"Panel/"});FJ.define("widget.Window",["widget.Panel","widget.DragDrop"],function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.WindowJ=this.WINJ=d.WindowJ=d.WINJ=d.PJ.extend({init:function(e,f){this._super(e,b.extend(true,{fjType:"WINJ",renderTo:"body",title:"浮动窗口",outPadding:{t:0,r:0,b:0,l:0},isInitShow:false,isCanFullScreen:true,dragLeft:0,dragTop:0,dragRight:0,dragBottom:0,isCanDrag:c.isMobile?false:true,dragDir:null,isResizable:c.isMobile?false:true,minWidth:100,maxWidth:null,minHeight:100,maxHeight:null,hasDivGray:false,zIndex:100001,grayZindex:100000,grayOpacity:80,grayHideScroll:false,showType:"fade",showLoading:true,speed:1,showSpeed:d.isIElt9?1:300,tranDuration:0.3,animateOpacity:0,loadSpeed:1,hasDdProxy:true,minOnClosing:false,typeSign:"static",closeMode:"hide",radius:0,showHead:true,showFoot:false,showHeadImg:false,headHeight:40,initFullScreen:false,hasSound:true,colorParams:{grayColor:"#373737"},eType:(function(g){return{afterClose:g,afterRender:g,beforeClose:g,afterShow:g,beforeShow:g}})("WINJ")},f));return this},initFn:function(){this.tranState="close";this.countShowPos();this._super()},create:function(){var e=this,f=c.RX.percent(this.p.width);if(b("#WINJ_"+this.objId).length==0){this._super();this.divOut.attr("id","WINJ_"+this.objId).addClass("winj").css({position:"absolute"});this.pjHead.css("cursor","move")}if(typeof(d.REJ)!="undefined"){if(this.p.isResizable){this.pjHead[0].cur="move";this.rej=b(this.divOut[0]).REJ({d:(this.p.borderWidth>4?this.p.borderWidth:4),miw:this.p.minWidth||100,mih:this.p.minHeight||100,maw:this.p.maxWidth||1500,mah:this.p.maxHeight||1500,padW:parseFloat(this.divOut.css("padding-left"))+parseFloat(this.divOut.css("padding-right")),padH:parseFloat(this.divOut.css("padding-top"))+parseFloat(this.divOut.css("padding-bottom")),hasProxy:this.p.hasDdProxy,evts:{resizeStart:function(h,g){b("#moveIframe_"+e.objId).show()},resizeEnd:function(h,g){b("#moveIframe_"+e.objId).hide();if(e.p.divState=="max"){e.p.height=e.divOut.height()}e.p.left=parseFloat(e.divOut.css("left"));e.p.top=parseFloat(e.divOut.css("top"));e.setDragMaxRB();e.reLayout()}}})}}if(typeof(d.DRJ)!="undefined"){if(this.p.isCanDrag){this.drj=b(this.pjHead[0]).DRJ({oRoot:this.divOut,dir:this.p.dragDir,minX:this.p.dragLeft,maxX:this.p.dragRight,minY:this.p.dragTop,maxY:this.p.dragBottom,hasProxy:this.p.hasDdProxy,drjCls:"pj-drj",isSetLeft:!f,evts:{dragStart:function(h,g){b("#moveIframe_"+e.objId).show()},dragEnd:function(h,g){b("#moveIframe_"+e.objId).hide();e.p.top=parseFloat(e.divOut.css("top"));if(!f){e.p.left=parseFloat(e.divOut.css("left"))}e.setDragMaxRB()}}})}}if(this.p.dragRight==0){b(window).bind("scroll",function(){if(!e.divOut.is(":hidden")){c.lazyDo(function(){this.setDragMaxRB()},500,"ld_winjScW",e)}}).bind("resize",function(){if(!e.divOut.is(":hidden")){c.lazyDo(function(){this.setDragMaxRB()},500,"ld_winjRsW",e)}})}this.fire("afterRender","WINJ");return this},countShowPos:function(){if(this.p.left==null){this.p.left=d.pageWidth()/2-this.p.width/2+d.leftPosition()}if(this.p.top==null){this.p.top=d.pageHeight()/2-this.p.height/2+d.topPosition();if(this.p.top<0){this.p.top=0}}},show:function(){var e=this;if(this.p.showRendorBody){this.divOut.appendTo(d.oBody)}if(this.rej!=null){this.rej.p.onlyH=false}this.addDivGray();this.renderDivGray();if(this.p.showType==="fade"){this.showReady();c.Animate.fadeIn(this.divOut,{duration:this.p.tranDuration,evts:{stop:function(){e.showFinish()}}})}return this},close:function(){if(this.fire("beforeClose","WINJ")===false){return this}var f=this;if(this.p.minOnClosing){this.min(1,true)}this.deleteDivGray();if(this.p.showType==="fade"){var e=this.p.tranDuration;this.closeReady();c.Animate.fadeOut(this.divOut,{duration:e,evts:{stop:function(){f.closeFinish()}}});c.lazyDo(function(){if(this.tranState!=="close"){this.closeFinish()}},(e+0.2)*1000,"ld_forceClose",this)}},loadBodyComplete:function(e){this._super(e);switch(e){case"show":break;case"reload":break}this.isFirstLoad=false},maxMin:function(f,h,e){var g=this;this._super(function(){g.setDragMaxRB()},h,e)},setDragMaxRB:function(){if(this.p.dragRight==0&&this.drj){this.drj.p.minX=document.documentElement.scrollLeft+document.body.scrollLeft;this.drj.p.maxX=document.documentElement.clientWidth+document.documentElement.scrollLeft+document.body.scrollLeft-(parseInt(this.divOut[0].clientWidth,10)+parseInt(this.divOut.css("border-left-width"),10)+parseInt(this.divOut.css("border-right-width"),10));this.drj.p.minY=document.documentElement.scrollTop+document.body.scrollTop;this.drj.p.maxY=null}},showReady:function(){var e=this.divOut;e.css({opacity:0,display:"block"});this.fire("beforeShow","WINJ");this.pjBody.show();if(this.p.showFoot){e.css({paddingBottom:(this.p.borderWidth>1?this.p.footHeight+2:this.p.footHeight+1)+"px"});this.pjFoot.show()}},showFinish:function(){this.tranState="show";if(parseFloat(this.divOut.css("top"))<0){this.divOut.css("top",0)}this.p.height=this.divOut.height();this.reLayout();this.fire("afterShowBeforeBodyLoad");if(this.p.loadAfterShow){this.loadBody("show")}this.setDragMaxRB();this.fire("afterShow","WINJ");if(this.p.initFullScreen){this.fullScreen(1)}if(!this.p.isAutoSetHeight){this.divOut.css("height","auto")}},closeReady:function(){},closeFinish:function(){this.tranState="close";this.divOut.hide();if(this.p.showRendorBody){this.divOut.appendTo(this.p.renderTo)}if(this.p.closeMode=="remove"){this.remove()}else{if(this.p.divState=="min"){this.p.divState="max";this.pjBtnMin.attr("title","最小化")}if(this.p.divStateFs=="fullscreen"){this.fullScreen(true)}if(this.p.loadType=="iframe"){this.bodyIn.find("iframe").attr("src","")}}this.fire("afterClose","WINJ")}});d.WINJ.init=function(e){return new d.WINJ(null,b.extend(true,{btns:null,footHeight:4,hasDivGray:true},e))};d.WINJ.show=function(e){return new d.WINJ(null,e).show()};d.WINJ.corner=function(e){return d.WINJ.show(b.extend(true,{zIndex:100,left:-10000,top:-10000,width:260,height:150,minWidth:260,minHeight:150,maxWidth:260,maxHeight:150,minSpeed:1500,minOnClosing:false,speed:1,showSpeed:1,loadSpeed:1,isCanClose:false,isCanFullScreen:false,headHeight:25,isCanDrag:false,isResizable:false,urlType:"html",footHeight:4,showFoot:true,btns:null,evts:{afterBodyLoadShow:function(g,f){this.min(0);this.divOut.fixFloatJ()}}},e))};b.fn.extend({WindowJ:function(e){if(this&&this.length>0){return new d.WindowJ(this,c.WINJ_commonConfig?b.extend(true,c.clone(c.WINJ_commonConfig),e):e)}},WINJ:function(e){return b(this).WindowJ(e)}});this.MessageBoxJ=this.MBJ=d.MessageBoxJ=d.MBJ=d.WINJ.extend({init:function(e){this._super(null,b.extend(true,{fjType:"MBJ",title:"系统提示",outPadding:{t:0,r:0,b:0,l:0},msgType:"alert",msgContent:"",msgImg:PJ.imgFolderSrc+"important.gif",msgImgWidth:100,msgConHeight:null,msgBtns:[],callBackOK:null,callBackCancel:null,dragTop:0,dragLeft:0,speed:1,showSpeed:1,tranDuration:0.1,tranShiftH:10,tranShiftW:10,loadSpeed:1,width:320,height:100,maxHeight:300,isAutoSetHeight:false,hasShadow:true,isCanMinimize:false,isCanFullScreen:false,isResizable:false,showLoading:false,headHeight:40,hasDivGray:true,grayZindex:1000000,closeTimeout:null,loadType:"html",closeMode:"remove",onlyFirstLoad:true,loadAfterShow:false,footHeight:4,showFoot:false,btns:null,btnTxt1:"确定",btnTxt2:"取消",loadHTML:function(j){var g=this;this.mbjTable=b("<table class='mbj_table'></table>");this.mbjTr1=b("<tr></tr>");this.mbjTr2=b("<tr></tr>");this.mbjTdL1=b("<td class='mbj_td_left' rowspan='2'></td>");if(this.p.msgImgWidth!=null){this.mbjTdL1.width(this.p.msgImgWidth)}this.mbjTdR1=b("<td class='mbj_td_right_1'></td>");this.mbjContent=b("<div style='overflow:auto;padding-top:2px;'>"+this.p.msgContent+"</div>");if(this.p.msgConHeight!=null){this.mbjContent.height(this.p.msgConHeight)}this.mbjTdR1.append(this.mbjContent);this.mbjTdR2=b("<td class='mbj_td_right_2'></td>");this.mbjImg=b("<img class='fj-img-fill' src='"+this.p.msgImg+"' />");this.mbjBtnOK=b("<button type='button' class='btnj'>"+this.p.btnTxt1+"</button>");this.mbjBtnOK.onGestureJ(c.Evt.click,function(){if(g.timeoutClose){clearTimeout(g.timeoutClose)}if(g.p.callBackOK!=null){if(g.p.callBackOK.call(g)!=MBJ.FAILD){g.close()}}else{g.close()}});this.mbjTdL1.append(this.mbjImg);this.mbjTr1.append(this.mbjTdL1).append(this.mbjTdR1);this.mbjTable.append(this.mbjTr1).append(this.mbjTr2);switch(this.p.msgType){case"alert":this.mbjTr2.append(this.mbjTdR2);this.mbjTdR2.append(this.mbjBtnOK);break;case"confirm":this.mbjTr2.append(this.mbjTdR2);if(this.p.msgBtns.length==0){this.mbjBtnCancel=b("<button type='button' class='btnj' style='margin-left:10px;' >"+this.p.btnTxt2+"</button>");this.mbjBtnCancel.onGestureJ(c.Evt.click,function(){if(g.timeoutClose){clearTimeout(g.timeoutClose)}if(g.p.callBackCancel!=null){g.p.callBackCancel.call(g)}g.close()});this.mbjTdR2.append(this.mbjBtnOK).append(this.mbjBtnCancel)}else{for(var f=0,h=this.p.msgBtns;f<h.length;f++){h[f].btn=b("<button type='button' class='btnj'>"+h[f].text+"</button>");if(f>0){h[f].btn.css({marginLeft:5})}(function(k){k.btn.onGestureJ(c.Evt.click,function(){k.click.call(g)})})(h[f]);this.mbjTdR2.append(h[f].btn)}}break;case"prompt":this.mbjTr2.append(this.mbjTdR2);this.mbjBtnCancel=b("<button type='button' class='btnj' style='margin-left:10px;'>"+this.p.btnTxt2+"</button>");this.mbjBtnCancel.onGestureJ(c.Evt.click,function(){if(g.timeoutClose){clearTimeout(g.timeoutClose)}if(g.p.callBackCancel!=null){g.p.callBackCancel.call(g)}g.close()});this.mbjTxt=b("<input type='text' class='fj-form-elem' style='width:"+(this.p.width-120)+"px;float:left;margin-bottom:5px;' />");if(this.p.txtO){this.mbjTxt.val(this.p.txtO)}this.mbjTdR2.append(this.mbjTxt).append(this.mbjBtnOK).append(this.mbjBtnCancel);this.mbjBtnOK.css("margin-bottom",5);this.mbjBtnCancel.css("margin-bottom",5);break;case"loading":this.mbjTdR1.attr("rowspan","2").css("padding-top","0");this.pjBtnClose.hide();if(this.btnBg1){this.btnBg1.hide()}break}this.pjBtnClose.unbind("click").on("click",function(){if(g.timeoutClose){clearTimeout(g.timeoutClose)}g.close(true)});if(this.p.closeTimeout!=null){this.timeoutClose=setTimeout(function(){g.close(true)},this.p.closeTimeout)}return this.mbjTable},grayOpacity:1,evts:{afterBodyLoad:function(k,j){this.mbjBtnOK.focus();if(this.p.msgConHeight==null){if(this.divOut.height()>this.p.maxHeight){this.mbjContent.height(this.p.maxHeight)}else{this.mbjContent.css("height","auto")}}var h=this.divOut.height(),g=c.pageHeight(),f=h<=g?(g/2-h/2+c.topPosition()):0;this.divOut.css("top",f)},afterReLayout:function(g,f){if(this.p.callBackLoad){this.p.callBackLoad.call(this)}}},eType:(function(f){return{afterRender:f}})("MBJ")},e))},create:function(){this._super();this.divOut.addClass("mbj");this.fire("afterRender","MBJ");return this},show:function(){var e=this;if(this.p.hasSound){switch(e.p.msgType){case"alert":d.playSound.play("mbj2");break;case"confirm":d.playSound.play("mbj1");break;case"prompt":d.playSound.play("mbj1");break}}this.loadBody();this._super();this.bodyIn.css({overflowX:"hidden",overflowY:"hidden",overflow:"hidden"});return this},loadBodyComplete:function(e){this._super(e)},close:function(e){if(e){switch(this.p.msgType){case"alert":if(this.p.callBackOK!=null){this.p.callBackOK()}break;case"confirm":if(this.p.callBackCancel!=null){this.p.callBackCancel()}break}}this._super();switch(this.p.msgType){case"alert":c.playSound.reset("mbj2");break;case"confirm":c.playSound.reset("mbj1");break;case"prompt":c.playSound.reset("mbj1");break}}});d.MBJ.FAILD="mbj_faild";d.MBJ.getCommonConfig=function(e){if(d.MBJ_commonConfig){var f=c.clone(d.MBJ_commonConfig);if(typeof e=="undefined"){e=f}else{e=b.extend(true,f,e)}}return e};d.MBJ.show=function(e){e=MBJ.getCommonConfig(e);return new d.MBJ(e).show()};d.MBJ.alert=function(h,g,j,f,e){e=MBJ.getCommonConfig(e);return new d.MBJ(b.extend(true,{title:h,msgContent:g,callBackOK:j,msgType:"alert",msgImg:PJ.imgFolderSrc+"info.png",closeTimeout:f},e)).show()};d.MBJ.confirm=function(j,h,k,g,f){f=MBJ.getCommonConfig(f);var e=b.extend(true,{title:j,msgContent:h,msgType:"confirm",msgImg:PJ.imgFolderSrc+"info.png"},f);if(typeof k=="function"||typeof k=="undefined"){e.callBackOK=k;e.callBackCancel=g}else{e.msgBtns=k;if(f&&f.width!=null){e.width=f.width}else{e.width=320}}return new d.MBJ(e).show()};d.MBJ.prompt=function(j,h,k,g,f,e){e=MBJ.getCommonConfig(e);return new d.MBJ(b.extend(true,{title:j,msgContent:h,callBackOK:k,txtO:g,msgType:"prompt",msgImg:PJ.imgFolderSrc+"info.png",height:110},e)).show()};d.MBJ.loading=function(h,g,e,f){f=MBJ.getCommonConfig(f);return new d.MBJ(b.extend(true,{title:h,msgContent:g,msgType:"loading",msgImg:LMJ.loadImgSrc(11),speed:1,showSpeed:1,height:50,hasHeadClose:false,callBackLoad:e},f)).show()};if(!c.isMobile){d.playSound.init("mbj1",d.mediaPath+"XP_dingdangsheng.wav");d.playSound.init("mbj2",d.mediaPath+"XP_jingtanhao.wav")}});FJ.define("widget.Tooltip",["widget.Panel"],function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.TooltipJ=this.TTJ=d.TooltipJ=d.TTJ=d.PJ.extend({init:function(e,f){this._super(e,b.extend(true,{fjType:"TTJ",renderTo:"body",hoverDirect:"top",hoverSpeed:777,hoverType:"over",isInitShow:false,hoverOnTip:true,shiftLeft:0,shiftTop:0,shiftHeight:5,onlyShiftPos:false,borderWidth:1,isHoverShow:true,isBodyEmpty:false,showType:"fade",showLoading:true,isRenderHF:false,loadDelay:0,loadSpeed:200,closeDelay:0,showHead:false,showFoot:false,radius:0,radiusB:0,isFixScroll:false,posType:"offset",posParam:null,posRight:false,opacity:null,isAutoSetHeight:true,arrowDirect:null,arrowMargin:null,position:"absolute",overflow:null,autoTurn:true,tranDuration:0.1,tranShiftS:0,tranOrigin:null,tranScaleShow:"scale(1, 1)",tranScaleClose:"scale(1, 1)",tranEasing:"ease-in-out",bodyScrollDelay:200,zIndex:600,loadAfterShow:false,revisePos:false,tapCancelBubble:true,tapFocus:false,closeCheckScroll:false,colorParams:{arrowBorder:null,arrowBody:null,arrowShadow:null},evts:{afterRenderI:function(){if(!this.p.isAutoSetHeight){if(!c.RX.percent(this.p.height)){this.bodyIn.css({wordWrap:"break-word",overflow:"hidden"});this.divOut.css("background","none")}}},afterBodyLoadI:function(){if(!this.p.isAutoSetHeight){this.divOut.css("height",(!c.RX.percent(this.p.height)?"auto":this.p.height))}},afterShowI:function(){if(this.p.opacity!=null){this.divOut.css("opacity",this.p.opacity)}}},eType:(function(g){return{afterRender:g,afterShow:g,afterShowI:g,afterBodyLoad:g,afterBodyLoadI:g,onMouseenter:g,onMouseleave:g,afterClose:g,afterShowFn:g}})("TTJ")},f));this.timeOut=null;this.hoverId=null;return this},initFn:function(){if(c.isMobile&&this.p.hoverType==="over"){this.p.hoverType="click"}this._super();this.tranState="close";if(this.p.showType==="offCanvas"){if(c.Evt.transform){var e=d.Evt.transform.style,g=this.divOut,f=this.p.borderWidth;switch(this.p.hoverDirect){case"top":g.css(e,"translate(0 ,"+(this.p.height*-1-f*2)+"px)");break;case"right":g.css({left:"auto",right:0}).css(e,"translate("+(this.p.width+f*2)+"px, 0)");break;case"bottom":g.css({top:"auto",bottom:0}).css(e,"translate(0, "+(this.p.height+f*2)+"px)");break;case"left":g.css(e,"translate("+(this.p.width*-1-f*2)+"px, 0)");break}}if(c.isMobile){b(window).on("scroll",{thiz:this},this.pageScroll)}}else{if(this.p.tranOrigin){this.divOut[0].style[c.Evt.transformOrigin.prop]=this.p.tranOrigin}}},create:function(){var e=this;this._super(this.p.showType!=="offCanvas"?null:true);this.divOut.attr("id","TTJ_"+this.objId).addClass("ttj").css({position:this.p.position,backgroundColor:this.p.colorParams.bgColor});if(this.p.overflow){this.divOut.css("overflow",this.p.overflow)}if(this.radiusStyle&&this.p.radius>0){this.pjBody.css(this.radiusStyle,this.p.radiusB);this.bodyIn.css(this.radiusStyle,this.p.radiusB)}if(this.p.showHead){this.pjBtnMin.hide();this.pjBtnClose.unbind("click").click(function(){var f=e.p.hoverSpeed;e.p.hoverSpeed=0;e.close();e.p.hoverSpeed=f})}if(this.p.arrowDirect){this.arrow=b('<span class="ttj_arrow'+(c.isMobile?" fj-mobile":"")+'"><em '+(this.p.colorParams.arrowBorder?'style="color:'+this.p.colorParams.arrowBorder+';"':"")+">◆</em><i "+(this.p.colorParams.arrowBody?'style="color:'+this.p.colorParams.arrowBody+';"':"")+">◆</i></span>");if(this.p.colorParams.arrowShadow){this.arrow.css("text-shadow",this.p.colorParams.arrowShadow)}switch(this.p.arrowDirect){case"top":this.arrow.addClass("ttj_arrow_top");if(this.p.arrowMargin){this.arrow.css("left",this.p.arrowMargin)}break;case"right":this.arrow.addClass("ttj_arrow_right");if(this.p.arrowMargin){this.arrow.css("top",this.p.arrowMargin)}break;case"bottom":this.arrow.addClass("ttj_arrow_bottom");if(this.p.arrowMargin){this.arrow.css("left",this.p.arrowMargin)}break;case"left":this.arrow.addClass("ttj_arrow_left");if(this.p.arrowMargin){this.arrow.css("top",this.p.arrowMargin)}break}this.divOut.append(this.arrow)}this.bindMouseEvt();this.fire("afterRender","TTJ");return this},show:function(k,q,j){if(!this.p.isHoverShow){return}var m=this;if(this.p.showRendorBody){this.divOut.appendTo(d.oBody)}if(this.p.showType==="offCanvas"){var g={duration:0.45,evts:{start:function(){m.divOut.addClass("pj_shadow")},stop:function(){m.showFinish()}}},o=this.p.borderWidth,p=this.divOut,e=this.p.width,h=this.p.tranShiftS,n=c.Evt.transform.prop;switch(this.p.hoverDirect){case"top":g.transform="translate(0, "+(0-o)+"px)";break;case"bottom":g.transform="translate(0, "+(0+o)+"px)";break;case"left":g.transform="translate("+(0-o)+"px, 0)";if(h){p[0].style[n]="translate("+(e*-1-o*2+h)+"px, 0)"}break;case"right":g.transform="translate("+(0+o)+"px, 0)";break}c.lazyDo(function(){p.transitionJ(g,j)})}else{if(!this.currentObj){this.currentObj=this.bindObj.eq(0)}var r=this.currentObj.attr("id");if(!r){r="ttj_obj_"+c.Date.getTime();this.currentObj.attr("id",r)}if(this.hoverId!=r||q){this.hoverId=r;if(this.p.isBodyEmpty){this.bodyIn.empty()}this.fire("preShow");var f=null;if(this.p.posParam==null){f=this.currentObj[this.p.posType]()}else{f=this.currentObj[this.p.posType](this.p.posParam)}this.bodyIn[0].scrollTop=0;this.addDivGray();this.renderDivGray();this.showReady(f,k);c.Animate.fadeIn(this.divOut,{duration:this.p.tranDuration,transformOrigin:this.p.tranOrigin,scale:this.p.tranScaleShow,evts:{stop:function(){m.showFinish()}}})}}this.fire("afterShowFn","TTJ")},close:function(k){if(!this.p.isHoverShow){return}var f=this;if(this.p.showType==="offCanvas"){var j=this.divOut,g={duration:0.45,evts:{stop:function(){if(e){j[0].style[c.Evt.transform.prop]="translate("+(j[0].clientWidth*-1-h*2)+"px, 0)"}j.removeClass("pj_shadow");f.closeFinish()}}},h=this.p.borderWidth,e=this.p.tranShiftS;switch(this.p.hoverDirect){case"top":g.transform="translate(0, "+(j[0].clientHeight*-1-h*2+e)+"px)";break;case"right":g.transform="translate("+(j[0].clientWidth+h*2+e)+"px, 0)";break;case"bottom":g.transform="translate(0, "+(j[0].clientHeight+h*2+e)+"px)";break;case"left":g.transform="translate("+(j[0].clientWidth*-1-h*2+e)+"px, 0)";break}j.transitionJ(g,k)}else{this.deleteDivGray();this.closeReady();if(this.divOut.is(":visible")){this.timeOut=c.lazyDo(function(){c.Animate.fadeOut(f.divOut,{duration:f.p.tranDuration,transformOrigin:f.p.tranOrigin,scale:f.p.tranScaleClose,evts:{stop:function(){f.closeFinish()}}})},this.p.hoverType=="over"?this.p.hoverSpeed:0)}}},countPosition:function(m,n){var e={},k=this.currentObj[0],h=this.p;e.width=h.width;e.height=this.p.isAutoSetHeight?h.height:this.bodyIn[0].scrollHeight;if(!this.p.onlyShiftPos){if(!n){switch(this.p.hoverDirect){case"top":e.left=m.left+k.offsetWidth/2-e.width/2+h.shiftLeft;e.top=m.top-k.offsetHeight/2-(e.height-h.shiftHeight)+h.shiftTop;break;case"right":e.left=m.left+k.offsetWidth+h.shiftLeft;e.top=m.top-k.offsetHeight+h.shiftTop;break;case"bottom":e.left=m.left+k.offsetWidth/2-e.width/2+h.shiftLeft;var j=0,g=this.p.autoTurn;if(g){j=this.divOut.height()}if(g&&m.top>document.documentElement.clientHeight-j){e.top=m.top-j-h.shiftTop}else{e.top=m.top+k.offsetHeight/2+h.shiftTop}break;case"left":e.left=m.left-k.offsetWidth+h.shiftLeft;e.top=m.top-k.offsetHeight+h.shiftTop;break;case"fixed":e.left=h.left+h.shiftLeft;e.top=h.top+h.shiftTop;break}}else{e.left=n.left;e.top=n.top}}else{e.left=h.shiftLeft;e.top=h.shiftTop}if(this.p.posRight){e.right=c.pageWidth()-m.left-k.offsetWidth}if(this.p.isFixScroll){var f=h.showRendorBody?c.body:h.renderTo[0];e.top+=f.scrollTop;e.left+=f.scrollLeft}return e},showAt:function(g){if(!this.currentObj){this.currentObj=this.bindObj.eq(0)}var f=this.currentObj.offset();var e=this.countPosition(f,g);this.divOut.css({left:e.left,top:e.top})},bindMouseEvt:function(){var g=this;var h;if(this.p.selCondition!=null){h=b(this.p.selCondition)}else{h=this.p.obj}this.bindObj=h;if(this.p.hoverType!=="free"){this.divOut.bind("mouseenter",function(){if(g.p.hoverOnTip){clearTimeout(g.timeOut)}if(g.p.hoverType==="focus"||g.p.hoverType==="click"){if(!c.isMobile||(c.isMobile&&g.tranState==="show")){g.overByFocus=true}}g.fire("onMouseenter","TTJ")}).bind("mouseleave",function(){if(g.p.hoverType==="focus"){g.overByFocus=false;if(!g.closeByFocus){g.currentObj.focus()}}else{if(g.p.hoverType==="click"){g.overByFocus=false}else{g.setVisible(false)}}g.fire("onMouseleave","TTJ")});var f,e;switch(this.p.hoverType){case"over":f="mouseenter";e="mouseleave";break;case"focus":f="focus";e="blur";this.overByFocus=false;break;case"click":if(!this.p.isRightClick&&!this.p.isAcjClick){f="click"}e="click";this.overByFocus=false;break}if(f){if(this.p.hoverType!=="click"){this.event1=f;this.eventFn1=function(j){if(g.p.hoverType==="over"){if(g.stoLeave){clearTimeout(g.stoLeave)}}g.currentObj=b(this);g.setVisible(true)};h.on(this.event1,this.eventFn1)}else{this.event1=c.Evt.click;this.eventFn1=function(k,j){if(!c.isMobile||g.p.tapCancelBubble){j.evt.stopPropagation()}g.currentObj=this.oTarget;if(g.p.tapFocus){g.currentObj.focus()}g.setVisible(true)};h.onGestureJ(this.event1,this.eventFn1,{preventClick:false})}}if(e){if(this.p.hoverType!=="click"){this.event2=e;this.eventFn2=function(){if(g.p.hoverType!=="focus"){if(g.p.hoverType==="over"&&g.p.closeDelay>0){g.stoLeave=setTimeout(function(){g.setVisible(false)},g.p.closeDelay)}else{g.setVisible(false)}}else{if(!g.overByFocus){g.setVisible(false)}}};h.on(this.event2,this.eventFn2)}else{this.event2=c.isMobile?"touchend":e;this.eventFn2=function(k){if(g.p.isAcjClick){var j=g.currentObj;if(j&&k.target.id==g.currentObj.attr("id")){return c.isMobile?true:false}if(c.isMobile){if(k.target.className.indexOf&&k.target.className.indexOf("acj")!=-1){return}else{if(j){j.blur()}}}}if(g.divOut.is(":visible")&&!g.overByFocus&&!g.closeByFocus){if(!c.isMobile||!g.p.closeCheckScroll||c.bodyScrollTop==c.body.scrollTop){g.setVisible(false)}}g.fire("afterCloseClick")};b(document).on(this.event2,this.eventFn2)}}}},setVisible:function(f,e,g){if(f){this.closeByFocus=false}else{this.closeByFocus=true}clearTimeout(this.timeOut);if(f){this.show(e,g)}else{if(this.p.canClose){this.close()}}},loadBodyComplete:function(e){this.showLoad(false);this.fire("afterBodyLoadI","TTJ");this.fire("afterBodyLoad","TTJ");this.fire("afterFirstLoad");this.isFirstLoad=false},remove:function(){this._super();if(this.event1){if(c.isMobile){this.bindObj.off("touchstart").off("touchmove").off("touchend").off("touchcancel")}this.bindObj.off(this.event1,this.eventFn1)}if(this.event2){if(this.p.hoverType!=="click"){this.bindObj.off(this.event2,this.eventFn2)}else{b(document).off(this.event2,this.eventFn2)}}if(this.p.showType==="offCanvas"&&c.isMobile){b(window).off("scroll",this.pageScroll)}},showReady:function(g,f){var h=this.divOut;h.css({opacity:0,display:"block"});this.loadBody();var e=this.countPosition(g,f);h.css({width:e.width,height:e.height,left:e.right==null?e.left:"auto",top:e.top,right:e.right!=null?e.right:"auto"})},showFinish:function(){var f={elem:this.currentObj},k=this;this.tranState="show";this.fire("afterShowI",f,"TTJ");this.fire("afterShow",f,"TTJ");this.reLayout();var n=function(){if(k.p.loadAfterShow){k.loadBody("show")}k.fire("afterBodyLoad2")};if(this.p.loadDelay>0){c.lazyDo(function(){n()},k.p.loadDelay,"ld_ttjStarted",k)}else{n()}if(!this.p.isAutoSetHeight&&!c.RX.percent(this.p.height)){this.divOut.css("height","auto")}if(this.p.revisePos){var o=this.divOut,g=parseFloat(o.css("left")),m=parseFloat(o.css("top")),q=g+o[0].offsetWidth-c.pageWidth()-c.leftPosition(),e=m+o[0].offsetHeight-c.pageHeight()-c.topPosition(),j=null,h=null;if(q>0){j=g-q}if(g<0){j=0}if(j!=null){o.css("left",j)}if(e>0){h=m-e}if(m<0){h=0}if(h!=null){o.css("top",h)}}},closeReady:function(){this.hoverId=null},closeFinish:function(){if(this.hoverId!=null){return}var e=this;this.tranState="close";if(this.p.showType!=="offCanvas"){this.divOut.hide()}this.overByFocus=false;if(this.p.showRendorBody){this.divOut.appendTo(this.p.renderTo)}this.fire("afterClose","TTJ")},pageScroll:function(g){var f=g.data.thiz;c.lazyDo(function(){if(f.p.shiftPercentH){f.reLayout()}else{var e=this.divOut;e.height(e[0].clientHeight).height("100%")}},f.p.bodyScrollDelay,"ld_ttj_bodyScroll",f)}});b.fn.extend({TooltipJ:function(e){if(this&&this.length>0){return new d.TooltipJ(this,c.TTJ_commonConfig?b.extend(true,c.clone(c.TTJ_commonConfig),e):e)}},TTJ:function(e){return b(this).TooltipJ(e)}})});FJ.define("widget.Layout",["widget.DragDrop","widget.Tooltip"],function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.LayoutJ=this.LAJ=d.LayoutJ=d.LAJ=d.BJ.extend({init:function(e,f){if(!f.north){f.north={isExist:false,hasBar:false}}if(!f.west){f.west={isExist:false,hasBar:false}}if(!f.east){f.east={isExist:false,hasBar:false}}if(!f.south){f.south={isExist:false,hasBar:false}}this._super(b.extend(true,{fjType:"LAJ",isInBody:true,ddPosType:"offset",layoutDelay:100,firstDelay:null,north:{isExist:true,size:150,isCanClose:true,isCanToggle:false,isResizable:true,isHide:false,isHideB:false,hasBar:true,hasToggleBtn:false,barTip:null,barTipH:null,sizeB:10,minY:50,maxY:200,barTipOpen:null,barTipClose:null,isInO:true,ocScroll:true,top:0,cName:"laj_north"},west:{isExist:true,size:150,isCanClose:true,isCanToggle:false,isResizable:true,isHide:false,isHideB:false,hasBar:true,hasToggleBtn:false,sizeB:10,minX:50,maxX:200,isInO:true,ocScroll:true,offCanvas:{top:0,shiftPercentH:0},cName:"laj_west"},east:{isExist:true,size:150,isCanClose:true,isCanToggle:false,isResizable:true,isHide:false,isHideB:false,hasBar:true,hasToggleBtn:false,sizeB:10,minX:50,maxX:200,isInO:true,ocScroll:true,cName:"laj_east"},south:{isExist:true,size:150,isCanClose:true,isCanToggle:false,isResizable:true,isHide:false,isHideB:false,hasBar:true,hasToggleBtn:false,sizeB:10,minY:50,maxY:200,isInO:true,ocScroll:true,cName:"laj_south"},center:{cName:"laj_center",shiftWidth:0,shiftHeight:0},minW:320,minH:300,hasDivGray:false,layerDelay:400,isInBody:true,bodyScroll:false,bodyScrollX:true,responsive:false,responsiveParam:{"(max-width: 480px)|LAJ":{params:{north:{size:45},west:{isHide:true,isHideB:true,isInO:false},bodyScrollX:false},handler:function(g){c.pollDo(function(){if(this.initLayer){this.ttj&&this.ttj.loadBody();return false}},null,null,this)}},"(min-width: 481px) and (max-width: 768px)|LAJ":{params:{north:{size:50},west:{isHide:true,isHideB:true,isInO:false},bodyScrollX:false},handler:function(g){c.pollDo(function(){if(this.initLayer){this.ttj&&this.ttj.loadBody();return false}},null,null,this)}},"(min-width: 769px) and (max-width: 1024px)|LAJ":{params:{north:{size:50},west:{isHide:false,isHideB:false,isInO:true,size:180},bodyScrollX:false},handler:function(g){if(!g){this.p.west.area.css("position","fixed");this.o.prepend(this.p.west.area);if(this.ttj){this.ttj.p.onlyFirstLoad=true;this.ttj.close(true)}}}},"(min-width: 1025px)|LAJ":{params:{north:{size:100},west:{isHide:false,isHideB:false,isInO:true,size:190},bodyScrollX:true},handler:function(g){if(!g){this.p.west.area.css("position","fixed");this.o.prepend(this.p.west.area);if(this.ttj){this.ttj.p.onlyFirstLoad=true;this.ttj.close(true)}}}}},evts:{afterOpenN:null,afterCloseN:null,afterLayout:null,afterOffCanvasLoad:null}},f));this.o=e;if(this.p.isInBody){this.p.ddPosType="offset"}else{this.p.ddPosType="position"}this.initFn();return this},initFn:function(){var f=this;this._super();this.isFirst=true;this.create();var e=function(){f.reLayout();if(f.p.responsive){c.lazyDo(function(){f.ttj=f.o.TTJ(b.extend(true,{borderWidth:0,hoverDirect:"left",hoverType:"free",showType:"offCanvas",onlyFirstLoad:true,loadAfterShow:false,speed:1,showSpeed:200,loadDelay:0,width:180,height:"100%",autoBodySize:true,tranShiftS:90,zIndex:499,isAutoSetHeight:false,hasShadow:true,position:"fixed",noBodyScroll:!f.p.west.ocScroll,colorParams:{borderOut:"gray"},loadHTML:function(){return f.p.west.area},evts:{afterBodyLoad:function(){f.p.west.area.css({display:"block",width:"100%",height:"100%",top:0,left:0,position:"absolute"});this.reLayout()},afterFirstLoad:function(){f.fire("afterOffCanvasLoad",{dir:"west"})}}},f.p.west.offCanvas));f.initLayer=true},f.p.layerDelay)}f.fire("afterLayoutFirst",f.p)};if(this.p.firstDelay!=null){c.lazyDo(function(){e()},this.p.firstDelay)}else{e()}b(window).bind("resize",function(){if(!f.o.is(":hidden")){c.lazyDo(function(){this.reLayout()},f.p.layoutDelay,"ld_laj_resize",f)}})},create:function(){var m=this,f=this.p,n=f.north,g=f.west,e=f.east,j=f.south,k=this.p.responsive;this.o.addClass("laj");if(n.hasBar){this.barN=b('<div class="laj_northBar laj_bar" style="height:'+n.sizeB+'px;left:0;"></div>');if(n.hasToggleBtn){this.toggleBtnN=b('<div class="laj_barTogglerBtn laj_northTogglerBtn"></div>');if(n.barTip){this.toggleBtnN.attr("title",n.barTip)}this.toggleArrowN=b('<div class="laj_arrow laj_arrow_top"></div>');this.barN.append(this.toggleBtnN.append(this.toggleArrowN))}else{this.barN.append('<div class="laj_northToggler"></div>')}if(n.barTipOpen){this.barN.attr("title",!n.isHideB?n.barTipOpen:n.barTipClose)}this.o.append(this.barN);if(n.isHideB){this.barN[0].style.display="none"}}if(g.hasBar){this.barW=b('<div class="laj_westBar laj_bar" style="width:'+g.sizeB+'px;"></div>');if(g.hasToggleBtn){this.barW.addClass("cj_divCvFd1");var h=b('<div class="cj_divCvFd2"></div>');this.toggleBtnW=b('<div class="laj_barTogglerBtn laj_westTogglerBtn cj_divCvFd3"></div>');if(g.barTip){this.toggleBtnW.attr("title",g.barTip)}this.toggleArrowW=b('<div class="laj_arrow laj_arrow_left"></div>');this.barW.append(h.append(this.toggleBtnW.append(this.toggleArrowW)))}else{this.barW.append('<div class="laj_westToggler"></div>')}if(g.barTipOpen){this.barW.attr("title",!g.isHideB?g.barTipOpen:g.barTipClose)}this.o.append(this.barW);if(g.isHideB){this.barW[0].style.display="none"}}if(e.hasBar){this.barE=b('<div class="laj_eastBar laj_bar" style="width:'+e.sizeB+'px;"></div>');if(e.hasToggleBtn){this.barE.addClass("cj_divCvFd1");var h=b('<div class="cj_divCvFd2"></div>');this.toggleBtnE=b('<div class="laj_barTogglerBtn laj_eastTogglerBtn cj_divCvFd3"></div>');if(e.barTip){this.toggleBtnE.attr("title",e.barTip)}this.toggleArrowE=b('<div class="laj_arrow laj_arrow_right"></div>');this.barE.append(h.append(this.toggleBtnE.append(this.toggleArrowE)))}else{this.barE.append('<div class="laj_eastToggler"></div>')}if(e.barTipOpen){this.barE.attr("title",!e.isHideB?e.barTipOpen:e.barTipClose)}this.o.append(this.barE);if(e.isHideB){this.barE[0].style.display="none"}}if(j.hasBar){this.barS=b('<div class="laj_southBar laj_bar" style="height:'+j.sizeB+'px;left:0;"></div>');if(j.hasToggleBtn){this.toggleBtnS=b('<div class="laj_barTogglerBtn laj_southTogglerBtn"></div>');if(j.barTip){this.toggleBtnS.attr("title",j.barTip)}this.toggleArrowS=b('<div class="laj_arrow laj_arrow_bottom"></div>');this.barS.append(this.toggleBtnS.append(this.toggleArrowS))}else{this.barS.append('<div class="laj_southToggler"></div>')}if(j.barTipOpen){this.barS.attr("title",!j.isHideB?j.barTipOpen:j.barTipClose)}this.o.append(this.barS);if(j.isHideB){this.barS[0].style.display="none"}}n.area=n.isExist?this.o.find("."+n.cName):null;n.bar=n.hasBar?this.barN:null;g.area=g.isExist?this.o.find("."+g.cName):null;g.bar=g.hasBar?this.barW:null;e.area=e.isExist?this.o.find("."+e.cName):null;e.bar=e.hasBar?this.barE:null;j.area=j.isExist?this.o.find("."+j.cName):null;j.bar=j.hasBar?this.barS:null;f.center.area=this.o.find("."+f.center.cName);if(n.isExist){n.area.height(n.size).addClass("laj_elem").css({top:0,left:0});if(n.hasBar){n.bar.addClass("laj_elem")}if(this.p.bodyScroll){n.area.addClass("laj-body-scroll")}if(n.isHide){n.area.hide()}}if(g.isExist){g.area.width(g.size).addClass("laj_elem laj_centerAll").css({left:0});if(g.hasBar){g.bar.addClass("laj_elem laj_centerAll")}if(this.p.bodyScroll){g.area.addClass("laj-body-scroll")}if(g.isHide){g.area.hide()}}if(e.isExist){e.area.width(e.size).addClass("laj_elem laj_centerAll");if(e.hasBar){e.bar.addClass("laj_elem laj_centerAll")}if(e.isHide){e.area.hide()}}if(j.isExist){j.area.height(j.size).addClass("laj_elem").css({left:0});if(j.hasBar){j.bar.addClass("laj_elem")}if(j.isHide){j.area.hide()}}f.center.area.addClass("laj_elem laj_centerAll");if(this.p.bodyScroll){f.center.area.addClass("laj-body-scroll")}f.center.allErea=this.o.find(".laj_centerAll");if(this.p.hasDivGray){this.divG=b('<div style="display:none;position:absolute;background-color:#fff;filter:alpha(opacity=1);-moz-opacity:0.01;opacity:0.01;z-index:999;"></div>');this.o.append(this.divG)}if(n.hasBar&&n.isResizable){this.spjN=n.bar.SPJ({way:"v",minY:50,maxY:200,oTop:n.area,oBottom:f.center.allErea,abMode:true,ddPosType:this.p.ddPosType});if(this.p.hasDivGray){this.spjN.bindEvt("splitStart",function(r,q){m.divG.show()});this.spjN.bindEvt("splitEnd",function(r,q){m.divG.hide()})}}if(g.hasBar&&g.isResizable){this.spjW=g.bar.SPJ({minX:50,maxX:200,oLeft:g.area,oRight:f.center.area,abMode:true,ddPosType:this.p.ddPosType});if(this.p.hasDivGray){this.spjW.bindEvt("splitStart",function(r,q){m.divG.show()});this.spjW.bindEvt("splitEnd",function(r,q){m.divG.hide()})}}if(e.hasBar&&e.isResizable){this.spjE=e.bar.SPJ({minX:50,maxX:50,oLeft:f.center.area,oRight:e.area,abMode:true,ddPosType:this.p.ddPosType});if(this.p.hasDivGray){this.spjE.bindEvt("splitStart",function(r,q){m.divG.show()});this.spjE.bindEvt("splitEnd",function(r,q){m.divG.hide()})}}if(j.hasBar&&j.isResizable){this.spjS=j.bar.SPJ({way:"v",minY:50,maxY:50,oTop:f.center.allErea,oBottom:j.area,abMode:true,ddPosType:this.p.ddPosType});if(this.p.hasDivGray){this.spjS.bindEvt("splitStart",function(r,q){m.divG.show()});this.spjS.bindEvt("splitEnd",function(r,q){m.divG.hide()})}}if(g.hasBar&&g.isCanToggle){var o=!g.hasToggleBtn?g.bar:this.toggleBtnW;o.click(function(){m.showArea("w",null,true)})}if(e.hasBar&&e.isCanToggle){var o=!e.hasToggleBtn?e.bar:this.toggleBtnE;o.click(function(){m.showArea("e",null,true)})}if(n.hasBar&&n.isCanToggle){var o=!n.hasToggleBtn?n.bar:this.toggleBtnN;o.click(function(){m.showArea("n",null,true)})}if(j.hasBar&&j.isCanToggle){var o=!j.hasToggleBtn?j.bar:this.toggleBtnS;o.click(function(){m.showArea("s",null,true)})}},showArea:function(n,f,e,q){var j,g=this.p,h,m,k=this.p.responsive;switch(n){case"n":j=g.north;m=this.toggleArrowN;h=this.toggleBtnN;break;case"w":j=g.west;m=this.toggleArrowW;h=this.toggleBtnW;break;case"e":j=g.east;m=this.toggleArrowE;h=this.toggleBtnE;break;case"s":j=g.south;m=this.toggleArrowS;h=this.toggleBtnS;break}if(f==null){f=!j.isHide}if(j.area&&j.isCanClose){if(f){if(!k){j.area.hide()}if(!e&&j.bar){j.bar.hide();j.isHideB=true}if(j.barTipClose){j.bar.attr("title",j.barTipClose)}j.isHide=true}else{j.area.show();if(!e&&j.bar){j.bar.show();j.isHideB=false}if(j.barTipOpen){j.bar.attr("title",j.barTipOpen)}j.isHide=false}if(!q){this.reLayout()}if(m){switch(n){case"n":if(f){m.swapClassJ("laj_arrow_top","laj_arrow_bottom")}else{m.swapClassJ("laj_arrow_bottom","laj_arrow_top")}break;case"w":if(f){m.swapClassJ("laj_arrow_left","laj_arrow_right")}else{m.swapClassJ("laj_arrow_right","laj_arrow_left")}break;case"e":if(f){m.swapClassJ("laj_arrow_right","laj_arrow_left")}else{m.swapClassJ("laj_arrow_left","laj_arrow_right")}break;case"s":if(f){m.swapClassJ("laj_arrow_bottom","laj_arrow_top")}else{m.swapClassJ("laj_arrow_top","laj_arrow_bottom")}break}}if(j.barTip){if(f){h.attr("title",j.barTipH)}else{h.attr("title",j.barTip)}}var r=n.toUpperCase();this.fire("afterShowArea"+r,j)}},reLayout:function(){var Q=this.p,B=Q.north.area,z=Q.north.bar,v=Q.south.bar,t=Q.south.area,r,m,I=this.p.responsive,f=Q.bodyScroll;if(this.p.isInBody){m=c.pageWidth()}else{m=this.o.width()}if(I&&m<Q.minW){m=Q.minW}if(m>=Q.minW||this.isFirst){var N=Q.west.area;var q=Q.west.bar;var e=Q.center.area;var P=Q.east.bar;var s=Q.east.area;var M=0,L=0;if(N){if(!Q.west.isHide){N.show();if(I){M=Q.west.size;N.innerWidth(M)}else{M=N.width()}}else{if(Q.west.isInO){N.hide()}}}if(q){if(!Q.west.isHideB){q.show();if(I){L=Q.west.sizeB;q.innerWidth(L)}else{L=q.width()}}else{q.hide()}}var K=e.width();var J=0,H=0;if(P){if(!Q.east.isHideB){P.show();if(I){J=Q.east.sizeB;P.innerWidth(J)}else{J=P.width()}}else{P.hide()}}if(s){if(!Q.east.isHide){s.show();if(I){H=Q.east.size;s.innerWidth(H)}else{H=s.width()}}else{if(Q.east.isInO){s.hide()}}}if(!f){if(B){B.width(m)}if(z){z.width(m)}if(v){v.width(m)}if(t){t.width(m)}}var j=m-M-L-J-H+Q.center.shiftWidth;var n=M+L+j;if(q){q.css("left",M);if(this.spjW){this.spjW.p.minX=Q.west.minX;this.spjW.p.maxX=Q.west.maxX}}if(!f){e.innerWidth(j).css("left",M+L)}else{var O=e[0],R=M+L;if(!this.p.bodyScrollX){e.css({marginLeft:Q.west.isInO?R:0});d.oBody.css("overflow-x","hidden");this.o.css("width","100%")}else{e.css({marginLeft:R});d.oBody.css("overflow-x","auto");if(O.scrollWidth+R>m){this.o.innerWidth(R+O.scrollWidth)}else{this.o.css("width","100%")}}}if(P){P.css("left",n);if(this.spjE){var A=m-Q.east.maxX;this.spjE.p.minX=A>=0?A:0;var h=m-Q.east.minX;this.spjE.p.maxX=h>=0?h:0}}if(s){s.css("left",n+J)}}if(this.p.isInBody){r=c.pageHeight()}else{r=this.o.height()}if(I&&r<Q.minH){r=Q.minH}if(r>=Q.minH||this.isFirst){var w=Q.center.allErea;var G=0,F=0;if(B){if(!Q.north.isHide){B.show();if(I){G=Q.north.size;B.innerHeight(G)}else{G=B.height()}}else{if(Q.north.isInO){B.hide()}}}if(z){if(!Q.north.isHideB){z.show();if(I){F=Q.north.sizeB;z.innerHeight(F)}else{F=z.height()}}else{z.hide()}}var E=w.height();var D=0,C=0;if(v){if(!Q.south.isHideB){v.show();if(I){D=Q.south.sizeB;v.innerHeight(D)}else{D=v.height()}}else{v.hide()}}if(t){if(!Q.south.isHide){t.show();if(I){C=Q.south.size;t.innerHeight(C)}else{C=t.height()}}else{if(Q.south.isInO){t.hide()}}}var o=r-G-F-D-C+Q.center.shiftHeight,k=G+F+o,u=Q.north.top;if(f&&B){B.css("top",u)}if(z){z.css("top",f?G+u:G);if(this.spjN){this.spjN.p.minY=Q.north.minY;this.spjN.p.maxY=Q.north.maxY}}w.each(function(){if(Q.west.isHide&&this.className.indexOf("laj_west")!=-1){return}else{if(Q.east.isHide&&this.className.indexOf("laj_east")!=-1){return}}if(!f){b(this).innerHeight(o).css("top",G+F)}else{if(this.className.indexOf("laj_center ")!=-1){Q.center.area.css("padding-top",G+F+u)}else{b(this).innerHeight(o-u).css("top",G+F+u)}}});if(v){v.css("top",k);if(this.spjS){var y=r-Q.south.maxY;this.spjS.p.minY=y>=0?y:0;var g=r-Q.south.minY;this.spjS.p.maxY=g>=0?g:0}}if(t){t.css("top",k+D)}}if(this.p.hasDivGray){this.divG.css({width:m,height:r})}this.isFirst=false;this.fire("afterLayout",Q)},responsiveHandle:function(e){if(!this.o.is(":hidden")){this._super(e)}}});b.fn.extend({LayoutJ:function(e){if(this&&this.length>0){return new d.LayoutJ(this,c.LAJ_commonConfig?b.extend(true,c.clone(c.LAJ_commonConfig),e):e)}},LAJ:function(e){return b(this).LayoutJ(e)}})});FJ.define("widget.Calendar",["widget.DragDrop","widget.Tooltip"],function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.CalendarJ=this.CDRJ=d.CalendarJ=d.CDRJ=d.CJ.extend({init:function(e,f){this._super(e,b.extend(true,{fjType:"CDRJ",renderTo:e,width:370,height:270,hasMonthE:true,showMoreDay:true,dateFormat:"yyyy-mm-dd",dateInit:d.Date.toFormatString(new Date(),"yyyy-mm-dd"),isTimeInit:true,dayColor:[],hasGradient:false,borderWidth:0,menuSpeed:d.isIElt9?1:100,isShowWatermark:true,isShowToday:false,isShowSelectYear:true,isShowTimePicker:false,fontFamily:"宋体",fontSizeMonth:13,fontSizeMonthE:18,fontSizeBody:12,headPaddingH:c.isIE7?0:4,weekPaddingH:0,bodyPaddingH:0,cdrheadHeight:35,bodyShiftH:67,menuShiftT:7,dateRange:null,hasDayTitle:true,inSameMonth:function(m,k){var h=m.split("-"),g=k.split("-"),j=false;if(h[0]==g[0]&&h[1]==g[1]){j=true}return j},colorParams:{borderOut:null,bgColor:null,bgColor1:null,bgColor2:null,headerBackColor:null,headerFontColor:null,menuOverColor:null,bodyBarBackColor:null,bodyBarFontColor:null,bodyFontColor:null,bodyHolidayFontColor:null,borderDay:"#868686",watermarkColor:null,moreDayColor:null},evts:{clickDay:null,getDayColor:null,afterBindDate:null,leaveTimePicker:null}},f));this.date=null;this.timer=null;this.initFn();return this},initFn:function(){var e=this;this._super();this.dateSelect=this.p.dateInit;this.create();if(c.isMobile){this.cdrBodyOut.onGestureJ(c.Evt.click,function(h,g){g.evt.stopPropagation();var f=b(g.evt.target);if(f.hasClass("fj-tap-elem")){c.lazyDo(function(){f.trigger(c.Evt.customClick)})}},{tapHoverCls:"cdrj-tap",tapHoverElem:"tap"});this.cdrMenu.on("touchend",function(f){f.stopPropagation()})}this.show()},create:function(){this._super();var g=this;this.divOut.addClass("cdrj").attr("id","CalendarJ"+this.objId).css({height:d.isWebkit?g.p.height-4:g.p.height});this.divOut.addClass("cdrj_bg").css({borderWidth:1});if(this.p.hasGradient){if(c.isIElt9){this.filterBg=b('<div class="cdrj_filterBg"></div>');this.divOut.append(this.filterBg)}else{if(c.isOpera||d.isIEgt9){this.svgBg=b('<div class="cdrj_svgBg"></div>');this.divOut.css({borderRadius:"5px"}).append(this.svgBg)}else{if(c.isFF){this.divOut.addClass("cdrj_bg_ff")}else{if(c.isWebkit){this.divOut.addClass("cdrj_bg_wk")}}}}}else{this.divOut.addClass("cdrj_bg_img")}this.cdrWmYear=b('<div class="cj_divCvFd3" >2010</div>');this.cdrWatermark=(b('<div class="cdrj_watermark cj_divCvFd1"></div>').css({height:this.p.height+"px"}).append(b('<div class="cj_divCvFd2"></div>').append(this.cdrWmYear)));if(this.p.colorParams.watermarkColor){this.cdrWatermark.css("color",this.p.colorParams.watermarkColor)}if(!this.p.isShowWatermark){this.cdrWatermark.hide()}this.cdrBodyOut=b('<div class="cdrj_bodyOut"></div>');this.cdrMenu=b('<div style="position:absolute;z-index:10;left:0px;top:0px;display:none;" ></div>').hover(function(){g.showMenu(null,true)},function(){g.hideMenu()});this.divOut.append(this.cdrWatermark).append(this.cdrBodyOut.append(this.getHeader()).append(this.getBodyBar()).append(this.getBody()).append(this.getBodyToday())).append(this.cdrMenu);if(this.p.isShowTimePicker){this.timePicker=b('<div class="cdrj_timePicker"></div>');this.time=this.p.isTimeInit?c.Date.toFormatString(new Date(),"hh:MM:ss"):"00:00:00";this.timePos=2;var j=function(){if(g.currentInput){var o=g.currentInput.val();if(d.RX.datetime(o)){var p=o.split(" ")[0];g.currentInput.val(p+" "+g.time)}}};this.timeInput=b('<input class="cdrj_timeInput" type="text" value="'+this.time+'" />');this.timeInput.click(function(){var o=g.timeInput.textPositionJ();switch(o){case 0:case 1:case 2:g.timeInput.selectRangeJ(0,2);g.timePos=0;break;case 3:case 4:case 5:g.timeInput.selectRangeJ(3,5);g.timePos=1;break;case 6:case 7:case 8:g.timeInput.selectRangeJ(6,8);g.timePos=2;break}}).bind("change",function(){var p=g.timeInput.val();if(!d.RX.time(p)){g.timeInput.val(g.time)}else{var r=parseFloat(p.substr(0,2));var o=parseFloat(p.substr(3,2));var q=parseFloat(p.substr(6,2));if(r>=0&&r<=23&&o>=0&&o<=59&&q>=0&&q<=59){g.time=p}else{g.timeInput.val(g.time)}}}).bind("mouseleave",function(){g.timeInput.trigger("change");j();g.fire("leaveTimePicker",{time:g.time})});var n=b('<div class="cdrj_timeDiv"></div>');var m=b('<input class="cdrj_timeBtn" type="button" />');var h=function(){b(this).removeClass("cdrj_timeBtnLeave").addClass("cdrj_timeBtnHover")};var e=function(){b(this).removeClass("cdrj_timeBtnHover").addClass("cdrj_timeBtnLeave")};var f=function(){var q=b(this).attr("bNum");var o=g.timeInput.val();var p=0;switch(g.timePos){case 0:p=parseFloat(o.substr(0,2));break;case 1:p=parseFloat(o.substr(3,2));break;case 2:p=parseFloat(o.substr(6,2));break}if(q==1){p+=1}else{p-=1}switch(g.timePos){case 0:if(p>23){p=0}else{if(p<0){p=23}}break;case 1:case 2:if(p>59){p=0}else{if(p<0){p=59}}break}switch(g.timePos){case 0:g.time=d.Math.addZero(p)+o.substr(2,6);g.timeInput.val(g.time);g.timeInput.selectRangeJ(0,2);break;case 1:g.time=o.substr(0,3)+d.Math.addZero(p)+o.substr(5,3);g.timeInput.val(g.time);g.timeInput.selectRangeJ(3,5);break;case 2:g.time=o.substr(0,6)+d.Math.addZero(p);g.timeInput.val(g.time);g.timeInput.selectRangeJ(6,8);break}j()};m.css({backgroundImage:"url("+d.CDRJ.imgFolderSrc+"spinner_arrow_up.gif)",backgroundRepeat:"no-repeat",backgroundPosition:"5px 1px"});var k=m.clone().css({backgroundImage:"url("+d.CDRJ.imgFolderSrc+"spinner_arrow_down.gif)",backgroundRepeat:"no-repeat",backgroundPosition:"5px 1px"}).attr("bNum","2").hover(h,e).click(f);m.attr("bNum","1").hover(h,e).click(f);n.append(m).append(k);this.divOut.append(this.timePicker.append("<img src='"+d.CDRJ.imgFolderSrc+"time.gif' />").append(this.timeInput).append(n))}this.cdrHeader.find("td").css({fontFamily:this.p.fontFamily,fontSize:this.p.fontSizeMonth+"px"});this.cdrHeader.find("td.currentMonthE").css((function(){var o={fontSize:g.p.fontSizeMonthE+"px"};if(d.isChrome){o.textAlign="left"}return o})());this.divOut.find(".cdrj_bodyBar span,.cdrj_bodyBar td,.cdrj_body td").css({fontFamily:this.p.fontFamily,fontSize:this.p.fontSizeBody+"px"});return this},show:function(){this._super();this.bindDate(this.p.dateInit);return this},getHeader:function(){var e=this;this.cdrHeader=b('<table class="cdrj_header" cellSpacing="2" ></table>');this.cdrHeader.css({width:(this.p.width-this.p.headPaddingH*2)+"px",height:this.p.cdrheadHeight+"px"});if(this.p.colorParams.headerBackColor){this.cdrHeader.css("background-color",this.p.colorParams.headerBackColor)}if(this.p.colorParams.headerFontColor){this.cdrHeader.css("color",this.p.colorParams.headerFontColor)}var f=b('<tr align="center"></tr>');this.previousYear=b('<td class="cdrj-previousYear" title="上一年份" style="cursor:pointer;width:10px;" ></td>').on(c.Evt.customClick,function(){e.onChangeYear(false)});var h=b("<div class='cdrj-head-btn"+(c.isMobile?"":" fj-pc")+" icon-chevron-left fj-tap-elem'></div>").on(c.Evt.customClick,function(m){m.stopPropagation();e.onChangeYear(false)});this.previousYear.append(h);this.previousMonth=b('<td class="cdrj-previousMonth" title="上一月份" style="cursor:pointer;width:10px;" ></td>');var j=b("<div class='cdrj-head-btn"+(c.isMobile?"":" fj-pc")+" icon-chevron-left fj-tap-elem'></div>").on(c.Evt.customClick,function(m){m.stopPropagation();e.onChangeMonth(false)});this.previousMonth.append(j);this.previousMonth.on(c.Evt.customClick,function(){e.onChangeMonth(false)});this.currentYear=b('<td class="cdrj-currentYear fj-tap-elem" style="width:90px;cursor:pointer;" >0</td>').on(c.Evt.customClick,function(){e.showMenu(true)}).on("mouseout",function(){e.hideMenu()});this.currentMonth=b('<td class="cdrj-currentMonth fj-tap-elem" style="width:70px;cursor:pointer;" >0</td>').on(c.Evt.customClick,function(){e.showMenu(false)}).on("mouseout",function(){e.hideMenu()});this.currentMonthE=b('<td class="currentMonthE" style="width:100px;" >September</td>');this.nextMonth=b('<td class="cdrj-nextMonth" title="下一月份" style="cursor:pointer;width:10px;" ></td>');var g=b("<div class='cdrj-head-btn"+(c.isMobile?"":" fj-pc")+" icon-chevron-right fj-tap-elem'></div>").on(c.Evt.customClick,function(m){m.stopPropagation();e.onChangeMonth(true)});this.nextMonth.append(g);this.nextMonth.on(c.Evt.customClick,function(){e.onChangeMonth(true)});this.nextYear=b('<td class="cdrj-nextYear" title="下一年份" style="cursor:pointer;width:10px;" ></td>').on(c.Evt.customClick,function(){e.onChangeYear(true)});var k=b("<div class='cdrj-head-btn"+(c.isMobile?"":" fj-pc")+" icon-chevron-right fj-tap-elem'></div>").on(c.Evt.customClick,function(m){m.stopPropagation();e.onChangeYear(true)});this.nextYear.append(k);this.cdrHeader.append(f.append(this.previousYear).append(this.currentYear).append(this.nextYear).append((function(){if(e.p.hasMonthE){return e.currentMonthE}else{return null}})).append(this.previousMonth).append(this.currentMonth).append(this.nextMonth));if(!this.p.isShowSelectYear){this.previousYear.hide();this.nextYear.hide()}return this.cdrHeader},getBodyBar:function(){this.cdrBodyBar=b('<table class="cdrj_bodyBar" cellSpacing="2" cellPadding="0"></table>');this.cdrBodyBar.css({width:(this.p.width-this.p.weekPaddingH*2)+"px"});if(this.p.colorParams.bodyBarBackColor){this.cdrBodyBar.css("background-color",this.p.colorParams.bodyBarBackColor)}if(this.p.colorParams.bodyBarFontColor){this.cdrBodyBar.css("color",this.p.colorParams.bodyBarFontColor)}var f=b('<tr align="center"></tr>');var e=['<span class="cdrj_holiday" '+(this.p.colorParams.bodyHolidayFontColor?('style="color:'+this.p.colorParams.bodyHolidayFontColor)+'"':"")+" >日</span>","一","二","三","四","五",'<span class="cdrj_holiday" '+(this.p.colorParams.bodyHolidayFontColor?('style="color:'+this.p.colorParams.bodyHolidayFontColor)+'"':"")+" >六</span>"];for(i=0;i<7;i++){f.append("<td >"+e[i]+"</td>")}this.cdrBodyBar.append(f);return this.cdrBodyBar},getBody:function(){var h=0,g;this.cdrBody=b('<table class="cdrj_body" cellSpacing="2" cellPadding="0"></table>');this.cdrBody.css({width:(this.p.width-this.p.bodyPaddingH*2)+"px",height:(this.p.height-this.p.bodyShiftH)+"px",borderCollapse:"separate",borderSpacing:"2px"});if(this.p.colorParams.bodyFontColor){this.cdrBody.css("color",this.p.colorParams.bodyFontColor)}this.cdrDay=[];for(var f=0;f<6;f++){g=b('<tr align="center"></tr>');for(var e=0;e<7;e++){this.cdrDay[h]=b('<td class="cdrj_dayOut" width="13%"></td>');g.append(this.cdrDay[h]);h++}this.cdrBody.append(g)}return this.cdrBody},getBodyToday:function(){var f=this;this.cdrBodyToday=b('<table class="cdrj_bodyBar" style="" cellSpacing="2" cellPadding="0"></table>');if(!this.p.isShowToday){this.cdrBodyToday.hide()}var e=b('<tr align="center" ></tr>');this.cdrTodayBtn=b('<td style="cursor:pointer;" >今天：'+d.Date.toFormatString(new Date(),"yyyy年mm月dd日")+"</td>").bind("click",function(){f.getToday()});this.cdrBodyToday.append(e.append(this.cdrTodayBtn));return this.cdrBodyToday},showMenu:function(g,e){if(this.timer){clearTimeout(this.timer)}if(g!=null){var f=g?this.currentYear:this.currentMonth;if(g){this.getYearMenu(this.date.getFullYear()-5)}else{this.getMonthMenu()}this.cdrMenu.css({top:f[0].offsetTop+f[0].offsetHeight-this.p.menuShiftT,left:f[0].offsetLeft+this.p.headPaddingH,width:f[0].offsetWidth})}if(!e){if(this.p.menuSpeed>1){this.cdrMenu.stop().css({opacity:0}).show().animate({opacity:0.95},this.p.menuSpeed)}else{this.cdrMenu.show()}}else{this.cdrMenu.show()}},hideMenu:function(){var e=this;this.timer=window.setTimeout(function(){if(e.p.menuSpeed>1){e.cdrMenu.stop().animate({opacity:0},e.p.menuSpeed,function(){e.cdrMenu.hide()})}else{e.cdrMenu.hide()}},500)},getYearMenu:function(o){var j=this;this.yearMenu=b('<table cellSpacing="0" class="cdrj_Menu" cellPadding="0"></table>');var n="",p,k;for(var g=1;g<=10;g++){var h=o+g;var r=new Date(h,this.date.getMonth(),this.date.getDate());p=b('<tr align="center" ></tr>');n="<td ";if(this.date.getFullYear()!=h){n+="onmouseover=\"this.className='cdrj_menuOver'\" onmouseout=\"this.className=''\" "}else{n+='class="cdrj_menuOver"'}n+=">"+h+"年</td>";k=b(n);(function(s){k.bind("click",function(){j.bindDate(d.Date.toFormatString(s,"-"))})})(r);this.yearMenu.append(p.append(k))}var f=b('<tr align="center"></tr>');var q=b("<td></td>");var m=b('<table style="font-size:12px;width:100%;" cellSpacing="0" cellPadding="0"></table>');var e=b('<tr class="cdrj-year-menu-nav"></tr>');this.btnSubYear=b('<td style="height:20px;" onmouseover="this.className=\'cdrj_menuOver\'" onmouseout="this.className=\'\'" ><i class="icon-double-angle-left"></i></td>').bind("click",function(){j.getYearMenu(o-10)});this.btnAddYear=b('<td onmouseover="this.className=\'cdrj_menuOver\'" onmouseout="this.className=\'\'" ><i class="icon-double-angle-right"></i></td>').bind("click",function(){j.getYearMenu(o+10)});this.yearMenu.append(f.append(q.append(m.append(e.append(this.btnSubYear).append(this.btnAddYear)))));this.cdrMenu.html(this.yearMenu)},getMonthMenu:function(){var j=this;this.monthMenu=b('<table cellSpacing="0" class="cdrj_Menu" cellPadding="0"></table>');var m="",h,k;for(var g=1;g<=12;g++){var f=this.date.getDate();if(g==2){f=28}var e=new Date(this.date.getFullYear(),g-1,f);h=b('<tr align="center"></tr>');m="<td ";if(this.date.getMonth()+1!=g){m+="onmouseover=\"this.className='cdrj_menuOver'\" onmouseout=\"this.className=''\" "}else{m+='class="cdrj_menuOver"'}m+=">"+g+"月</td>";k=b(m);(function(n){k.bind("click",function(){j.bindDate(d.Date.toFormatString(n,"-"))})})(e);this.monthMenu.append(h.append(k))}this.cdrMenu.html(this.monthMenu)},onChangeYear:function(h){var g=this.date.getFullYear();var f=this.date.getMonth()+1;var e=this.date.getDate();if(g>999&&g<10000){if(h){g++}else{g--}}else{alert("年份超出范围（1000-9999）!")}this.bindDate(g+"-"+f+"-"+e)},onChangeMonth:function(h){var g=this.date.getFullYear();var f=this.date.getMonth()+1;var e=this.date.getDate();if(h){f++}else{f--}if(g>999&&g<10000){if(f<1){f=12;g--}if(f>12){f=1;g++}}else{alert("年份超出范围（1000-9999）!")}if(f==2){e=28}this.bindDate(g+"-"+f+"-"+e)},bindDate:function(B){var D=this;this.dateM=B;this.fire("getDayColor",{date:B});var g=[31,30,31,30,31,30,31,31,30,31,30,31];var j=B.replace(/[^\d]/ig,"-").replace(/^\-|\-$/ig,"").split("-");var r=new Date(j[0],j[1]-1,j[2]);if(isNaN(r)){r=new Date()}this.date=r;this.bindHeader();var h=r.getFullYear();var q=r.getMonth();var C=1;var A=new Date();var o=A.getMonth();var y=A.getFullYear();var v=new Date(h,q,1).getDay();var w=q==0?h-1:h;var n=q==0?11:q-1;var u=g[n];if(n==1){u=((w%4==0)&&(w%100!=0)||(w%400==0))?29:28}u-=v-1;var t=1;g[1]=((h%4==0)&&(h%100!=0)||(h%400==0))?29:28;for(i=0;i<42;i++){var e=this.cdrDay[i],m=null;e.css({backgroundColor:"transparent"}).removeClass("hasColor_"+this.objId+" cdrj_currentDay").attr("date","");e.unbind("mouseover").bind("mouseover",function(){D.onMouseOver(this)}).unbind("mouseout").bind("mouseout",function(){D.onMouseOut(this)});this.onMouseOut(e[0]);e.css("color","");if(i<v){if(this.p.showMoreDay){var f=new Date(h,q-1,u);m=b("<div class='cdrj-day-bg fj-tap-elem'>"+u+"</div>");e.html(m).removeClass("cdrj_normalDay cdrj_normalDayN cdrj_normalDayS");if(this.p.hasDayTitle){e.attr("title",d.Date.toFormatString(f,"yyyy年mm月dd日"))}var k=d.Date.toFormatString(f,this.p.dateFormat);e.attr("value",k);e.addClass("cdrj_moreDay");if(this.p.colorParams.moreDayColor){e.css("color",this.p.colorParams.moreDayColor)}this.setDayColor(f,e,u);if(k==this.dateSelect){this.setDaySelect(k,e)}u++}else{e.html("");e.attr("title","")}}else{if(C>g[q]){if(this.p.showMoreDay){var s=new Date(h,q+1,t);m=b("<div class='cdrj-day-bg fj-tap-elem'>"+t+"</div>");e.html(m).removeClass("cdrj_normalDay cdrj_normalDayN cdrj_normalDayS");if(this.p.hasDayTitle){e.attr("title",d.Date.toFormatString(s,"yyyy年mm月dd日"))}var k=d.Date.toFormatString(s,this.p.dateFormat);e.attr("value",k);e.addClass("cdrj_moreDay");if(this.p.colorParams.moreDayColor){e.css("color",this.p.colorParams.moreDayColor)}this.setDayColor(s,e,t);if(k==this.dateSelect){this.setDaySelect(k,e)}t++}else{e.html("");e.attr("title","")}}else{if(i>=new Date(h,q,1).getDay()&&C<=g[q]){m=b("<div class='cdrj-day-bg fj-tap-elem'>"+C+"</div>");e.html(m).removeClass("cdrj_moreDay cdrj_normalDayN cdrj_normalDayS");var z="";if(C==new Date().getDate()){if(q==o&&h==y){e.addClass("cdrj_currentDay");z="今天:"}}else{e.removeClass("cdrj_currentDay")}if(this.isHoliday(h,q,C)){if(this.p.colorParams.bodyHolidayFontColor){e.css("color",this.p.colorParams.bodyHolidayFontColor)}else{e.addClass("cdrj_holiday")}}var p=new Date(h,q,C);if(this.p.hasDayTitle){e.attr("title",z+d.Date.toFormatString(p,"yyyy年mm月dd日"))}var k=d.Date.toFormatString(p,this.p.dateFormat);e.attr("value",k);e.addClass("cdrj_normalDay");this.setDayColor(this.date,e,C);if(k==this.dateSelect){this.setDaySelect(k,e)}C++}else{e.html("");e.attr("title","")}}}if(m){m.on(c.Evt.customClick,function(){D.onClick(this)})}}this.cdrMenu.hide();this.p.dayColor=[];this.fire("afterBindDate",{date:B})},bindHeader:function(){this.currentYear.text(d.Date.toFormatString(this.date,"yyyy年"));var e=d.Date.toFormatString(this.date,"mm",true);this.currentMonth.text(e+"月");this.cdrWmYear.text(this.date.getFullYear());if(this.p.hasMonthE){switch(e){case"1":this.currentMonthE.text("January");break;case"2":this.currentMonthE.text("February");break;case"3":this.currentMonthE.text("March");break;case"4":this.currentMonthE.text("April");break;case"5":this.currentMonthE.text("May");break;case"6":this.currentMonthE.text("June");break;case"7":this.currentMonthE.text("July");break;case"8":this.currentMonthE.text("August");break;case"9":this.currentMonthE.text("September");break;case"10":this.currentMonthE.text("October");break;case"11":this.currentMonthE.text("November");break;case"12":this.currentMonthE.text("December");break}}},onClick:function(m,f){if(m.innerHTML!=""){if(this.p.isShowTimePicker){this.timeInput.blur()}var o=f?b(m):b(m).parent(),j=o.attr("value"),n=o.hasClass("hasColor_"+this.objId),r=true,h=this.p.dateRange,g=true;this.gtLimit=false;if(h){if((h[0]!=null&&c.Date.dateDiff(j,c.Date.parse(h[0]))<0)||(h[1]!=null&&c.Date.dateDiff(j,c.Date.parse(h[1]))>0)){r=false}}if(this.p.verifyGt){var p=this.ttj.currentObj.attr("dpjType"),e,k;if(p=="start"){e=j;k=this.endElem.val()}else{if(p=="end"){e=this.startElem.val();k=j}}if(c.RX.datetimeO(e)&&c.RX.datetimeO(k)){g=(k>=e);if(g&&this.p.limitDays){var q=c.Date.dateDiff(k,e);if(q>this.p.limitDays){this.gtLimit=true}}}}this.setDaySelect(j);this.fire("clickDay",{date:j,time:this.time,inRange:r,hasColor:n,dayElement:o,endGtStart:g,gtLimit:this.gtLimit})}},selectDate:function(f,j){for(var g=0,e=this.cdrDay.length;g<e;g++){var h=this.cdrDay[g];if(f==h.attr("value")){if(j){return h}this.onClick(h[0],true);break}}},changeDrawTheme:function(e){},refresh:function(e){this.bindDate(e!=null?e:c.Date.toFormatString(this.date,"-"))},setDayColor:function(g,h,e){for(var f=0;f<this.p.dayColor.length;f++){var k=this.p.dayColor[f];if(k.date==c.Date.toFormatString(g,"yyyy-mm-")+c.Math.addZero(e)){if(k.borderColor){h.css("border-color",k.borderColor)}h.css({backgroundColor:k.color,color:k.fontColor}).addClass("hasColor_"+this.objId).addClass("cdrj_normalDayN");for(var m in k){h.attr(m,k[m])}break}}},setDaySelect:function(e,f){this.dateSelect=e;this.cdrBody.find("td").removeClass("cdrj_normalDayS");if(!f){f=this.selectDate(e,true)}f.addClass("cdrj_normalDayS")},getToday:function(){var e=new Date();this.bindDate(d.Date.toFormatString(e,"-"))},isHoliday:function(g,h,f){var e=new Date(g,h,f);return(e.getDay()==6||e.getDay()==0)},onMouseOver:function(e){b(e).addClass("cdrj_normalDayH")},onMouseOut:function(e){b(e).removeClass("cdrj_normalDayH")}});d.CDRJ.show=function(e){return new d.CDRJ(d.oBody,e).show()};b.fn.extend({CalendarJ:function(e){if(this&&this.length>0){return new d.CalendarJ(this,c.CDRJ_commonConfig?b.extend(true,c.clone(c.CDRJ_commonConfig),e):e)}},CDRJ:function(e){return b(this).CalendarJ(e)}});d.CDRJ.imgFolderSrc=d.imgPath+"Calendar/";this.DatePickerJ=this.DPJ=d.DatePickerJ=d.DPJ=d.CalendarJ.extend({init:function(e,h){var g=this;this.ttj=b(e).TTJ(b.extend(true,{borderWidth:0,width:360,height:270,hoverDirect:"bottom",shiftLeft:10,shiftTop:20,loadType:"html",hoverType:"click",hasShadow:true,onlyFirstLoad:true,isAsync:false,loadSpeed:1,speed:1,showSpeed:d.isIElt9?1:100,isRenderHF:false,tranOrigin:"50% 0%",tranScaleShow:"scale(0.5, 0.5)",tranScaleClose:"scale(0.7, 0.7)",loadHTML:function(){g.divOut.show();return g.divOut},colorParams:{bgColorBody:"#e6e6e6",bgColor:"transparent"},overflow:"hidden",radius:5,closeCheckScroll:c.isMobile?true:false,responsive:true,responsiveParam:{"(min-width: 641px)|DPJ":{preHandler:function(j){if(!j){this.setVisible(false)}},params:{zIndex:600,onlyShiftPos:false,isFixScroll:false,tranOrigin:"50% 0%"},handler:function(){var j=this.p;if(j.shiftLeftI!=null){j.shiftLeft=j.shiftLeftI}if(j.shiftTopI!=null){j.shiftTop=j.shiftTopI}c.lazyDo(function(){j.hasDivGray=false;j.showRendorBody=false},300)}},"(max-width: 640px)|DPJ":{preHandler:function(j){if(!j){this.setVisible(false)}},params:{hasDivGray:true,zIndex:100001,showRendorBody:true,onlyShiftPos:true,isFixScroll:true,tranOrigin:"50% 50%"},handler:function(){var j=this.p;if(j.shiftLeftI==null){j.shiftLeftI=j.shiftLeft}if(j.shiftTopI==null){j.shiftTopI=j.shiftTop}j.shiftLeft=c.pageWidth()/2-j.width/2;j.shiftTop=c.pageHeight()/2-j.height/2;if(j.shiftTop<20){j.shiftTop=20}}}},evts:{afterBodyLoad:function(k,j){if(this.p.hasShadow&&!d.isIElt9){this.divOut.css("background-color","#e6e6e6")}if(g.p.isShowTimePicker){g.timePicker.css("left",g.divOut.width()/2-g.timePicker.width()/2)}},afterBodyLoad2:function(r,q){if(!(g.p.autoDate||g.p.isShowTimePicker)){return}var k=this.currentObj.val();if(g.p.autoDate){var m=g.dateM,s=g.dateSelect;if(c.RX.datetimeO(k)){var j=k.split(" ")[0];if(g.p.inSameMonth(j,m)){if(j!=s){g.setDaySelect(j)}}else{g.dateSelect=j;g.bindDate(j)}}}if(g.p.isShowTimePicker){g.currentInput=this.currentObj;if(d.RX.datetime(k)){g.time=k.split(" ")[1];g.timeInput.val(g.time)}else{var n=this.currentObj.attr("dpjType"),o=c.Date.toFormatString(new Date(),"hh:MM:ss");if(n){if(n=="start"){g.time=g.p.isTimeInit?o:"00:00:00"}else{if(n=="end"){g.time="23:59:59"}}}else{if(g.p.isTimeInit){g.time=o}}g.timeInput.val(g.time)}}},onMouseleave:function(){if(d.isIE7){g.cdrMenu.hide()}}}},h));var f=0;if(d.isWebkit){f=4}h.width=this.ttj.p.width-2;h.height=this.ttj.p.height-2+f;this._super(d.oBody,b.extend(true,{fjType:"DPJ",canDrag:true,menuSpeed:d.isIElt9?1:100,closeBySelect:true,menuShiftT:10,autoDate:false,verifyGt:false,limitDays:null,evts:{clickDay:function(m,k){var j=k.date;if(k.time){j+=" "+k.time}if(k.inRange&&k.endGtStart&&(this.ttj.currentObj.attr("type")=="text"||this.ttj.currentObj[0].tagName.toLowerCase()=="textarea")){this.ttj.currentObj.val(j).blur()}if(this.p.closeBySelect){this.ttj.closeByFocus=true;this.ttj.p.hoverSpeed=0;this.ttj.close();k.dayElement.trigger("mouseleave");this.ttj.p.hoverSpeed=777;if(c.isMobile){this.ttj.currentObj.blur()}}this.fire("clickDayP",{date:k.date,time:k.time,inRange:k.inRange,endGtStart:k.endGtStart,gtLimit:k.gtLimit});if(c.isIElt8){this.cdrMenu.hide()}}}},h));if(this.p.canDrag){this.drj=b(this.cdrBodyOut).DRJ({oRoot:this.ttj.divOut,drjCls:"dpj-drj"})}if(this.p.readOnly){this.ttj.p.obj.attr("readonly",true)}this.ttj.bodyIn.css({overflowX:"hidden",overflowY:"hidden"});if(this.p.verifyGt){e.each(function(){var k=b(this),j=k.attr("dpjType");if(j=="start"){g.startElem=k}else{if(j=="end"){g.endElem=k}}})}this.divOut.hide();return this},remove:function(){this.ttj.remove();this._super()}});b.fn.extend({DatePickerJ:function(e){if(this&&this.length>0){return new DatePickerJ(this,c.DPJ_commonConfig?b.extend(true,c.clone(c.DPJ_commonConfig),e):e)}},DPJ:function(e){return b(this).DatePickerJ(e)}})});FJ.define("widget.Validate",["widget.Tooltip"],function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.ValidateJ=this.VAJ=d.ValidateJ=d.VAJ=d.CJ.extend({init:function(e,f){this._super(e,b.extend(true,{fjType:"VAJ",renderTo:"body",regType:"Empty",input:e,inputE:null,hasTxtErrorColor:true,txtBorderWidth:1,isShowTrue:false,isRegOnReadonly:false,valElem:null,regMsg:"不能为空!",regMsgT:null,regExp:null,allowBlank:null,regFn:null,showMsg:true,isInline:false,msgShift:{t:0,l:0},msgDirect:"bottom",isFixPos:false,isFixScroll:false,onlyShiftPos:false,group:null,width:150,height:22,onlyFirstLoad:null,borderWidth:0,showTrueBg:false,posType:"offset",posParam:null,watermark:null,opacity:0.87,layoutDelay:800,autoTurn:false,colorParams:{bgColor:"transparent",watermark:"#9c9c9c",inputColor:"#333",trueColor:"#333",errorColor:"#333",txtErrorColor:"#edca70",txtColor:"#8EB5D4"},evts:{preReg:null,afterReg:null}},f));this.initFn();return this},initFn:function(){this.p.inputE=(typeof this.p.inputE=="string"?b("#"+this.p.inputE):this.p.inputE);this.p.valElem=(this.p.valElem!=null?(typeof this.p.valElem=="string"?b("#"+this.p.valElem):this.p.valElem):null);this.regMsgTmp=this.p.regMsg;this.regMsgTmpT=this.p.regMsgT;this.regFnMsg=null;this._super();this.create();if(this.p.group){if(!VAJ.group[this.p.group]){VAJ.group[this.p.group]=[]}VAJ.group[this.p.group].push(this)}b(window).on("resize",{thiz:this},this.pageResize)},create:function(){this._super();this.divOut.attr("id","VAJ_"+this.objId).addClass("vaj").css({width:"100%",height:"auto"});this.conTable=b("<table class='vaj_table'></table>");this.conTr=b("<tr></tr>");this.conTdL=b("<td class='vaj_td_left'></td>");this.conTdR=b("<td class='vaj_td_right'></td>");this.icon=b('<img class="vaj_iconError" src="'+c.imgPath+'Datagrid/treegrid/s.gif" />');this.msgArea=b("<span></span>");this.divOut.append(this.conTable.append(this.conTr.append(this.conTdL.append(this.icon)).append(this.conTdR.append(this.msgArea))));this.bindInput();return this},bindInput:function(){var e=this;this.p.input.css({borderWidth:this.p.txtBorderWidth,borderColor:this.p.colorParams.txtColor,borderStyle:"solid",color:this.p.colorParams.inputColor});this.setWatermark();switch(this.p.regType){case"Empty":case"Equal":case"Exp":case"Custom":this.p.input.bind("blur",function(f){e.reg()});break;case"MaxLength":this.p.showTrueBg=1;this.p.input.bind("keyup",function(){e.reg()});break}this.ttj=b(this.p.input).TTJ({renderTo:this.p.renderTo,hoverDirect:this.p.msgDirect,shiftLeft:this.p.msgShift.l,shiftTop:this.p.msgShift.t,onlyShiftPos:this.p.onlyShiftPos,radius:0,hoverType:"free",speed:1,showSpeed:200,width:this.p.width,height:this.p.height,isAsync:false,hasShadow:true,loadType:"html",loadSpeed:1,borderWidth:1,onlyFirstLoad:this.p.onlyFirstLoad,isFixScroll:this.p.isFixScroll,posType:this.p.posType,posParam:this.p.posParam,isAutoSetHeight:false,opacity:this.p.opacity,showLoading:false,isRenderHF:false,responsive:this.p.responsive,responsiveParam:this.p.responsiveParam,autoTurn:this.p.autoTurn,colorParams:{borderOut:this.p.colorParams.ttBorderColor,bgColorBody:this.p.colorParams.ttBgColor}});this.ttj.divOut.bind("mouseover",function(){VAJ.zIndex+=1;b(this).css("z-index",VAJ.zIndex)});if(this.p.isFixPos){this.p.renderTo.bind("scroll",function(){c.lazyDo(function(){this.ttj.showAt()},200,"ld_vajScrollP",e)});b(window).bind("resize",function(){if(!e.ttj.divOut.is(":hidden")){c.lazyDo(function(){this.ttj.showAt()},200,"ld_vajScrollP",e)}})}return this},showInfo:function(e,j){var g=this;var h;this.ttj.setVisible(false);if(e&&this.p.showTrueBg){var f=this.p.colorParams.ttBgColorT;if(f){if(d.isIE){this.ttj.bodyIn[0].style.filter="alpha(opacity=100) progid:DXImageTransform.Microsoft.Gradient(GradientType=0, EndColorStr='"+f+"', StartColorStr='"+f+"')"}else{this.ttj.pjBody.css("background-color",f)}}}else{var k=this.p.colorParams.ttBgColor;if(k){if(d.isIE){this.ttj.bodyIn[0].style.filter="alpha(opacity=100) progid:DXImageTransform.Microsoft.Gradient(GradientType=0, EndColorStr='"+k+"', StartColorStr='"+k+"')"}else{this.ttj.pjBody.css("background-color",k)}}}if(e){if(this.p.hasTxtErrorColor){this.p.input.css("border",this.p.txtBorderWidth+"px solid "+this.p.colorParams.txtColor)}if(this.p.isShowTrue){this.divOut.css({color:this.p.colorParams.trueColor});this.icon.swapClassJ("vaj_iconError","vaj_iconTrue");this.msgArea.text(j?j:this.p.regMsgT)}else{return}}else{if(this.p.hasTxtErrorColor){this.p.input.css("border",this.p.txtBorderWidth+"px solid "+this.p.colorParams.txtErrorColor)}this.divOut.css({color:this.p.colorParams.errorColor});this.icon.swapClassJ("vaj_iconTrue","vaj_iconError");this.msgArea.text(j?j:this.p.regMsg)}this.ttj.p.fnHtml=function(){return g.divOut.show()};this.ttj.reload();this.ttj.setVisible(true)},reg:function(h,m){var f=this;if(this.p.input.attr("readonly")&&!this.p.isRegOnReadonly){return true}var e=false,g=f.p.input.val(),k=b.trim(g);if(this.p.watermark&&k===this.p.watermark){k=""}var j=function(){switch(f.p.regType){case"Empty":e=k!="";break;case"Equal":e=k==b.trim(f.p.inputE.val());break;case"Exp":var o=d.RX.test(f.p.regExp,k);if(f.p.allowBlank){e=o||k==""}else{e=o}break;case"Custom":var o=false,n=k;if(f.p.regFn){o=f.p.regFn.call(f,n,h)}if(f.p.allowBlank){e=o||n==""}else{e=o}break;case"MaxLength":if(g.length>f.p.maxLength){f.p.regMsg=f.regMsgTmp.replace(/\{0\}/g,f.p.maxLength);e=0}else{f.p.regMsgT=f.regMsgTmpT.replace(/\{0\}/g,f.p.maxLength-g.length);if(f.p.allowBlank){e=1}else{if(k!=""){e=1}else{f.p.regMsg=f.p.regMsgB;e=0}}}if(e&&f.p.regFn){var n=k,o=f.p.regFn.call(f,n);if(f.p.allowBlank){e=o||n==""}else{e=o}if(!e){f.p.regMsg=f.p.regMsgF}}break}};if(this.p.evts.preReg){if(this.fire("preReg")){e=true}else{j()}}else{j()}if(!m){this.showInfo(e,this.regFnMsg)}this.regFnMsg=null;if(k===""){this.setWatermark()}this.fire("afterReg",{result:e,val:k,sign:h});return e},reset:function(){if(this.p.hasTxtErrorColor){this.p.input.css({borderColor:this.p.colorParams.txtColor})}this.setWatermark(1);this.ttj.setVisible(0)},setWatermark:function(f){if(this.p.watermark!=null){var e=this;if(f){this.p.input.unbind("focus")}this.p.input.css("color",this.p.colorParams.watermark).val(this.p.watermark).one("focus",function(){b(this).css("color",e.p.colorParams.inputColor).val("")})}},pageResize:function(h){var g=h.data.thiz,f=g.ttj;c.lazyDo(function(){if(f.tranState==="show"){f.setVisible(true,null,true)}},g.p.layoutDelay,"ld_vaj_layout",g)},remove:function(){this.ttj.remove();this._super();b(window).off("resize",this.pageResize)}});d.VAJ.zIndex=100;d.VAJ.group={};d.VAJ.clearGroup=function(e){if(VAJ.group[e]){delete VAJ.group[e]}};d.VAJ.reg=function(k,j){var f=VAJ.group[k];if(f&&f.length>0){var e=true;for(var h=0,g=f.length;h<g;h++){if(!f[h].reg(j)){e=false}}return e}else{return false}};d.VAJ.reset=function(h){var e=VAJ.group[h];if(e&&e.length>0){for(var g=0,f=e.length;g<f;g++){e[g].reset()}}};b.fn.extend({ValidateJ:function(e){if(this&&this.length>0){return new d.ValidateJ(this,c.VAJ_commonConfig?b.extend(true,c.clone(c.VAJ_commonConfig),e):e)}},VAJ:function(e){return b(this).ValidateJ(e)}})});FJ.define("widget.ScrollBar",function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.ScrollBarJ=this.SBJ=d.ScrollBarJ=d.SBJ=d.CJ.extend({init:function(e,f){this._super(e,b.extend(true,{fjType:"SBJ",renderTo:e,width:450,height:17,widthC:1000,direction:"h",borderWidth:0,colorParams:{borderOut:"#d0d8e8",bgColor:"#fff"},evts:{scroll:null}},f));this.initFn();return this},initFn:function(){this._super();this.create();if(!c.isMobile){this.show()}},create:function(){var e=this;this._super();this.container=b("<div></div>").css({width:"100%",height:this.p.height+18,position:"relative",top:-19,overflowX:"auto",overflowY:"hidden",clear:"both"});this.content=b("<div></div>").css({height:this.p.height,width:this.p.widthC});this.divOut.attr("id","SBJ_"+this.objId).css({width:this.p.width,height:this.p.height,clear:"both"}).append(this.container.append(this.content));switch(this.p.direction){case"h":this.divOut.css("overflow-y","hidden");break;case"v":this.divOut.css("overflow-x","hidden");break}this.container.bind("scroll",function(){e.fire("scroll",{s:this})});return this},getScrollLeft:function(){return this.container.scrollLeft()},setScrollLeft:function(e){return this.container.scrollLeft(e)},width:function(f,e){this.divOut.width(f);this.content.width(e)},left:function(e){this.divOut.css("margin-left",e)},hasScrollH:function(){return this.content.width()>this.divOut.width()}});b.fn.extend({ScrollBarJ:function(e){if(this&&this.length>0){return new d.ScrollBarJ(this,c.SBJ_commonConfig?b.extend(true,c.clone(c.SBJ_commonConfig),e):e)}},SBJ:function(e){return b(this).ScrollBarJ(e)}})});FJ.define("widget.SelectBox",function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.SelectBoxJ=this.SBXJ=d.SelectBoxJ=d.SBXJ=d.CJ.extend({init:function(e,g){var f;if(g){if(g.type==null||g.type=="checkbox"){f=""}else{f="_"+g.type}if(g.cNameLabel==null){g.cNameLabel="sbxj_label"+f}if(g.cNameNoCheck==null){g.cNameNoCheck="sbxj_noCheck"+f}if(g.cNameNoCheckH==null){g.cNameNoCheckH="sbxj_noCheck"+f+"_h"}if(g.cNameChecked==null){g.cNameChecked="sbxj_checked"+f}if(g.cNameCheckedH==null){g.cNameCheckedH="sbxj_checked"+f+"_h"}if(g.cNameNoCheckDisabled==null){g.cNameNoCheckDisabled="sbxj_noCheck"+f+"_disabled"}if(g.cNameCheckedDisabled==null){g.cNameCheckedDisabled="sbxj_checked"+f+"_disabled"}}this._super(e,b.extend(true,{fjType:"SBXJ",renderTo:e,width:null,height:null,type:"checkbox",cNameLabel:"sbxj_label",cNameNoCheck:"sbxj_noCheck",cNameNoCheckH:"sbxj_noCheck_h",cNameChecked:"sbxj_checked",cNameCheckedH:"sbxj_checked_h",cNameIndeterminate:"sbxj_indeterminate",cNameIndeterminateH:"sbxj_indeterminate_h",cNameNoCheckDisabled:"sbxj_noCheck_disabled",cNameCheckedDisabled:"sbxj_checked_disabled",cNameIndeterminateDisabled:"sbxj_indeterminate_disabled",initChecked:null,initDisabled:null,inputId:null,inputClass:null,initClass:null,name:null,title:null,canQuery:true,isInitHide:null,evts:{onChecked:null,beforeClick:null}},g));this.initFn();return this},initFn:function(){var e=this;this._super();if(this.p.initChecked===1){this.p.initChecked=true}else{if(this.p.initChecked===0){this.p.initChecked=false}}if(this.p.renderTo&&this.p.renderTo[0].tagName.toLowerCase()=="input"){this.isWrap=true;this.input=this.p.renderTo;this.inputId=this.input.attr("id");if(this.p.initChecked==null){this.checked=this.input[0].checked}else{this.checked=this.p.initChecked;if(this.checked===false){this.input[0].checked=false}else{this.input[0].checked=true}}if(this.p.initDisabled==null){this.disabled=this.input[0].disabled}else{this.disabled=this.p.initDisabled;this.input[0].disabled=this.disabled}if(this.p.name==null){this.name=this.input.attr("name")}else{this.name=this.p.name}if(this.p.title==null){this.p.title=this.input.attr("title")}if(this.p.isInitHide==null){this.p.isInitHide=this.input.is(":hidden")}if(this.input[0].style.marginLeft!==""){this.input[0].style.marginLeft="-10000px"}}else{this.isWrap=false;this.inputId=this.p.inputId;this.checked=this.p.initChecked!=null?this.p.initChecked:false;this.disabled=this.p.initDisabled!=null?this.p.initDisabled:false;this.name=this.p.name}this.create()},create:function(){var h=this,g;this.sbxjId="SBXJ_"+this.objId;if(this.inputId==null){this.inputId=this.sbxjId+"_B";if(this.isWrap){this.input.attr("id",this.inputId)}}if(this.checked===true){if(!this.disabled){g=this.p.cNameChecked}else{g=this.p.cNameCheckedDisabled}}else{if(this.checked===2){if(!this.disabled){g=this.p.cNameIndeterminate}else{g=this.p.cNameIndeterminateDisabled}}else{if(!this.disabled){g=this.p.cNameNoCheck}else{g=this.p.cNameNoCheckDisabled}}}if(!this.input){var f=this.p.type;if(f=="collapse"){f="checkbox"}this.input=b('<input type="'+f+'" id="'+this.inputId+'"'+(this.checked?" checked":"")+(this.disabled?" disabled":"")+' autocomplete="off" hidefocus />');if(this.p.inputClass!=null){this.input.addClass(this.p.inputClass)}}if(this.name!=null){this.input.attr("name",this.name);if(!SBXJ.group[this.name]){SBXJ.group[this.name]={}}SBXJ.group[this.name][this.sbxjId]=this}this.divOut=b('<label id="'+this.sbxjId+'" class="sbxj '+this.p.cNameLabel+" "+g+'" for="'+this.inputId+'"></label>');if(this.p.initClass){this.divOut.addClass(this.p.initClass)}if(this.p.isInitHide){this.divOut.hide()}if(this.p.title!=null&&b.trim(this.p.title)!=""){this.divOut.attr("title",this.p.title)}if(this.p.style!=null){this.divOut.attr("style",this.p.style)}if(this.p.width!=null){this.divOut.css("width",this.p.width)}if(this.p.height!=null){this.divOut.css("height",this.p.height)}if(this.isWrap){this.input.after(this.divOut)}else{if(this.p.renderTo){this.p.renderTo.append(this.divOut)}}if(this.p.canQuery){var e=b("<span id='"+this.inputId+"Q' class='sbxj_inputQ'></span>");e[0].sbxj=this;this.divOut.append(e)}this.divOut.append(this.input.addClass("sbxj_input")).click(function(j){j.stopPropagation()});this.input.click(function(n,m){n.stopPropagation();if(!h.disabled){var k=this.checked,j=h.fire("beforeClick",{checked:k,param:m});if(j!=null){k=j}h.setChecked(k,true)}});this.divOut.hover(function(){if(!h.disabled){if(h.checked===true){h.divOut.swapClassJ(h.p.cNameChecked,h.p.cNameCheckedH)}else{if(h.checked===2){h.divOut.swapClassJ(h.p.cNameIndeterminate,h.p.cNameIndeterminateH)}else{h.divOut.swapClassJ(h.p.cNameNoCheck,h.p.cNameNoCheckH)}}h.divOut.addClass("sbxj_hover")}},function(){if(!h.disabled){if(h.checked===true){h.divOut.swapClassJ(h.p.cNameCheckedH,h.p.cNameChecked)}else{if(h.checked===2){h.divOut.swapClassJ(h.p.cNameIndeterminateH,h.p.cNameIndeterminate)}else{h.divOut.swapClassJ(h.p.cNameNoCheckH,h.p.cNameNoCheck)}}h.divOut.removeClass("sbxj_hover")}})},setChecked:function(e,m,h,p){if(this.disabled){return}if(!m){if(e===1){e=true}else{if(e===0){e=false}}var f;if(e===2){f=true}else{f=e}this.input[0].checked=f}var k=this.divOut.hasClass("sbxj_hover");if(e===true){this.divOut.swapClassJ(this.p.cNameNoCheck+" "+this.p.cNameNoCheckH+" "+this.p.cNameIndeterminate+" "+this.p.cNameIndeterminateH,k?this.p.cNameCheckedH:this.p.cNameChecked)}else{if(e===2){this.divOut.swapClassJ(this.p.cNameChecked+" "+this.p.cNameCheckedH+" "+this.p.cNameNoCheck+" "+this.p.cNameNoCheckH,k?this.p.cNameIndeterminateH:this.p.cNameIndeterminate)}else{this.divOut.swapClassJ(this.p.cNameChecked+" "+this.p.cNameCheckedH+" "+this.p.cNameIndeterminate+" "+this.p.cNameIndeterminateH,k?this.p.cNameNoCheckH:this.p.cNameNoCheck)}}this.checked=e;if(this.p.type=="radio"&&this.checked===true){var j=SBXJ.group[this.name];for(var n in j){if(this.sbxjId!=n&&j[n].checked){j[n].setChecked(false,null,true);break}}}if(!h){this.fire("onChecked",b.extend(true,{checked:e},p))}},setDisabled:function(e){if(this.checked===true){if(e){this.divOut.swapClassJ(this.p.cNameChecked+" "+this.p.cNameCheckedH,this.p.cNameCheckedDisabled)}else{this.divOut.swapClassJ(this.p.cNameCheckedDisabled,this.p.cNameChecked)}}else{if(this.checked===2){if(e){this.divOut.swapClassJ(this.p.cNameIndeterminate+" "+this.p.cNameIndeterminateH,this.p.cNameIndeterminateDisabled)}else{this.divOut.swapClassJ(this.p.cNameIndeterminateDisabled,this.p.cNameIndeterminate)}}else{if(e){this.divOut.swapClassJ(this.p.cNameNoCheck+" "+this.p.cNameNoCheckH,this.p.cNameNoCheckDisabled)}else{this.divOut.swapClassJ(this.p.cNameNoCheckDisabled,this.p.cNameNoCheck)}}}this.input[0].disabled=e;this.disabled=e},getValue:function(){return this.input.val()},setValue:function(e){this.input.val(e);return this}});c.SBXJ.init=function(e){return new c.SBXJ(null,e)};c.SBXJ.group={};c.SBXJ.clearGroup=function(e){if(e!=null){if(SBXJ.group[e]){delete SBXJ.group[e]}}else{c.SBXJ.group={}}};c.SBXJ.allCheck=function(j,h,e){var f=SBXJ.group[j];if(f){if(h==null){h=true}for(var k in f){f[k].setChecked(h,null,e)}}};b.fn.extend({SelectBoxJ:function(f){if(this&&this.length>0){if(this.length==1){return new d.SelectBoxJ(this,c.SBXJ_commonConfig?b.extend(true,c.clone(c.SBXJ_commonConfig),f):f)}else{var e=[];this.each(function(h){var g=c.SBXJ_commonConfig?b.extend(true,c.clone(c.SBXJ_commonConfig),f):c.clone(f);if(g&&g.type=="radio"&&g.initChecked!=null){if(c.RX.numZ(g.initChecked)){if(g.initChecked==h){g.initChecked=true}else{g.initChecked=false}}else{if(g.initChecked==this.id){g.initChecked=true}else{g.initChecked=false}}}e.push(new d.SelectBoxJ(b(this),g))});return e}}},SBXJ:function(e){return b(this).SelectBoxJ(e)},setCheckedSBXJ:function(e,f){this.each(function(){var g=b("#"+this.id+"Q");if(g.length>0){g[0].sbxj.setChecked(e,null,f)}});return this},setDisabledSBXJ:function(e){this.each(function(){var f=b("#"+this.id+"Q");if(f.length>0){f[0].sbxj.setDisabled(e)}});return this},setValueSBXJ:function(e){this.each(function(){var f=b("#"+this.id+"Q");if(f.length>0){f[0].sbxj.setValue(e)}});return this}})});FJ.define("widget.Menu",["widget.Tooltip","widget.SelectBox"],function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.MenuJ=this.MUJ=d.MenuJ=d.MUJ=d.TooltipJ.extend({init:function(e,f){this._super(e,b.extend(true,{fjType:"MUJ",hoverDirect:"bottom",cMenuDirect:"right",autoDirect:true,shiftLeft:50,shiftTop:15,hoverType:"click",isRightClick:false,hoverSpeed:100,closeMenuDelay:100,closeDelay:100,radius:2,radiusB:2,speed:1,showSpeed:d.isIElt9?1:100,loadSpeed:1,onlyFirstLoad:true,width:100,height:24,forecastMenuH:24,maxHeight:0,hasShadow:true,renderTo:"body",showRendorBody:false,isRenderHF:false,isAutoSetHeight:false,selectIndex:null,fnHtml:function(){this.pjBody.addClass("muj_pjBody");return this.menuContainer},menus:[],colorParams:{fontColor:null},evts:{afterClose:function(){if(!this.parentMenu){this.cascade(this,function(g){if(g.divOut.is(":visible")){g.p.isHoverShow=true;g.close()}},true)}else{this.p.isHoverShow=true}},afterItemRender:null}},f));return this},initFn:function(){this.cMenus=[];this.chks=[];this.forecastH=this.p.forecastMenuH*this.p.menus.length;this._super();this.divOut.attr("id","MUJ_"+this.objId)},create:function(){var f=this;this._super();this.divOut.addClass("muj-ttj");this.menuContainer=b('<ul class="muj"></ul>');this.items=[];for(var e=0;e<this.p.menus.length;e++){this.createMenuItem(this.p.menus[e],e)}if(this.cMenus.length>0){this.bindEvt("onItemMouseover",function(j,h){var g=0;this.cascade(this,function(k){if(g!=0){if(k==h.menu){return false}if(k.divOut.is(":visible")){k.p.isHoverShow=true;k.close()}}g++})})}return this},createMenuItem:function(q,f){var j=this,e=b("<li></li>"),k=this.p.cMenuDirect,n=this.p.selectIndex;this.items.push(e);if(this.p.colorParams.fontColor){e.css("color",this.p.colorParams.fontColor)}if(q.title){e.attr("title",q.title)}var h=b('<div class="muj-icon"></div>');if(k&&!q.icon&&!q.hasChk){if(k==="right"){h.html('<i class="icon-caret-right"></i>')}else{h.html('<i class="icon-caret-left"></i>')}}if(!q.hasChk){var g=null;if(q.icon){g=b(q.icon).addClass("muj-icon-custom");h.append(g);if(n!=null&&n!==f){g.hide()}}if(q.click){e.onGestureJ(c.Evt.click,function(s,r){j.changeSelectIcon(f);q.click.call(j,{e:r.evt,item:e,menuItem:q});e.trigger("mouseleave");j.setVisible(false)},{tapHoverCls:"muj-hover"})}}else{var o=SBXJ.init({inputId:(q.id?"mujChk_"+q.id+"_"+this.objId:null),initChecked:!q.noCheck?true:false,canQuery:false,evts:{onChecked:function(s,r){q.click.call(j,{checked:r.checked,chk:this})}}});this.chks.push(o);e.click(function(){o.setChecked(o.checked?false:true,null,true);q.click.call(j,{checked:o.checked,chk:o})});h.append(o.divOut)}var m=b("<div class='muj-item-content'></div>");this.menuContainer.append(e.append(h).append(m.text(q.text)));var p;if(q.menus&&q.menus.length>0){p=e.MUJ(b.extend(true,{renderTo:this.p.renderTo,showRendorBody:this.p.showRendorBody,hoverType:"over",hoverDirect:this.p.cMenuDirect,cMenuDirect:this.p.cMenuDirect,autoDirect:this.p.autoDirect,shiftLeft:this.p.cMenuDirect=="left"?-4:2,shiftTop:j.p.forecastMenuH-1,maxHeight:q.maxHeight,zIndex:this.p.zIndex,tranOrigin:this.p.tranOrigin,tranScaleShow:this.p.tranScaleShow,tranScaleClose:this.p.tranScaleClose,evts:{afterRender:function(){var r=this;this.parentMenu=j;j.cMenus.push(this);this.bubble(this,function(s){if(!s.parentMenu){r.rootMenu=s}})},preShow:function(){var v=this.currentObj.offset();if(this.p.autoDirect){var r=this.currentObj[0].offsetWidth;var u=this.p.shiftLeft;var t=this.divOut.width();if(this.p.hoverDirect=="right"){var y=document.documentElement.clientWidth+document.documentElement.scrollLeft+document.body.scrollLeft-(t+parseInt(this.divOut.css("border-left-width"),10)+parseInt(this.divOut.css("border-right-width"),10))-r-u;var A=v.left+r+u;if(A>y){this.p.hoverDirect="left";this.p.shiftLeft=-4+(r-t)}else{this.p.hoverDirect="right";this.p.shiftLeft=2}}else{if(this.p.hoverDirect=="left"){var A=v.left-r+u;if(A<0){this.p.hoverDirect="right";this.p.shiftLeft=2}else{this.p.hoverDirect="left";this.p.shiftLeft=-4+(r-t)}}}}var z=v.top+(j.p.forecastMenuH*q.menus.length)-document.documentElement.clientHeight;if(z>0){this.p.shiftTop=z*-1}else{this.p.shiftTop=j.p.forecastMenuH-1}},onMouseenter:function(){this.rootMenu.overByFocus=true;if(this.p.hoverType=="over"){this.p.isHoverShow=false}},onMouseleave:function(){this.rootMenu.overByFocus=false;if(this.rootMenu.hoverType=="focus"){this.rootMenu.currentObj.focus()}}}},q));p.icon=h}e.hover(function(){if(j.stoCloseMenu){clearTimeout(j.stoCloseMenu)}j.stoCloseMenu=setTimeout(function(){j.fire("onItemMouseover",{item:e,menu:p})},j.p.closeMenuDelay)},function(){if(j.stoCloseMenu){clearTimeout(j.stoCloseMenu)}j.fire("onItemMouseleave",{item:e})});this.fire("afterItemRender",{id:q.id,item:e,menu:p});return this},cascade:function(e,g,h){var j=null;if(!h){j=g.call(e,e)}if(j!==false&&e.cMenus){for(var f=0;f<e.cMenus.length;f++){this.cascade(e.cMenus[f],g)}}},bubble:function(e,f,g){var h=null;if(!g){h=f.call(e,e)}if(h!==false&&e.parentMenu){this.bubble(e.parentMenu,f)}},changeSelectIcon:function(e){if(this.p.selectIndex!=null){this.menuContainer.find(".muj-icon-custom").hide();this.items[e].find(".muj-icon-custom").show()}}});d.MUJ.imgSrc=d.imgPath+"Menu/";d.Image.preLoad(MUJ.imgSrc+"copy.gif");b.fn.extend({MenuJ:function(e){if(this&&this.length>0){return new d.MenuJ(this,c.MUJ_commonConfig?b.extend(true,c.clone(c.MUJ_commonConfig),e):e)}},MUJ:function(e){return b(this).MenuJ(e)}});this.ContextMenuJ=this.CMJ=d.ContextMenuJ=d.CMJ=d.MenuJ.extend({init:function(e,g){var f=this;this._super(e,b.extend(true,{fjType:"CMJ",isRightClick:true,showOnSelectText:true,eType:(function(h){return{afterShow:h}})("CMJ")},g));e.bind("contextmenu",function(j){var k=false;if(!f.p.showOnSelectText){var h="";if(document.selection){h=document.selection.createRange().text}else{if(window.getSelection){h=window.getSelection().toString()}}if(h.length>0){k=true}}if(!k){j.stopPropagation();j.returnValue=false;f.showAt(j,this);return false}});return this},initFn:function(){this._super();this.divOut.attr("id","CMJ_"+this.objId)},showAt:function(h,g){this.currentObj=b(g);var f=h.pageX,j=h.pageY;if(j>document.documentElement.clientHeight-this.forecastH){j=j-this.forecastH}this.setVisible(true,{left:f,top:j},true);this.cascade(this,function(e){if(e!=this&&e.divOut.is(":visible")){e.p.isHoverShow=true;e.close()}});this.fire("afterShow","CMJ")}});b.fn.extend({ContextMenuJ:function(e){if(this&&this.length>0){return new d.ContextMenuJ(this,c.CMJ_commonConfig?b.extend(true,c.clone(c.CMJ_commonConfig),e):e)}},CMJ:function(e){return b(this).ContextMenuJ(e)}})});FJ.define("widget.ScrollButton",function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.ScrollButtonJ=this.SBNJ=d.ScrollButtonJ=d.SBNJ=d.CJ.extend({init:function(e,f){this._super(e,b.extend(true,{fjType:"SBNJ",renderTo:e,targetElem:e,width:"100%",height:"100%",borderWidth:0,top:null,layoutDelay:1000,hasAnimate:c.isMobile?0:1},f));this.initFn();return this},initFn:function(){var e=this;this._super();this.create();this.checkShow();b(window).on("resize",{thiz:this},this.pageResize)},create:function(){var e=this,g=e.p.targetElem[0],f=this.p.hasAnimate;this.scrollBtnL=b("<div class='sbnj sbnj-left"+(f?" fj-has-animate":"")+"'></div>").append("<i class='icon-chevron-left'></i>");this.scrollBtnR=b("<div class='sbnj sbnj-right"+(f?" fj-has-animate":"")+"'></div>").append("<i class='icon-chevron-right'></i>");if(!c.isMobile){this.scrollBtnL.on("mousedown",function(){e.stopTabLeft=false;(function(){g.scrollLeft-=10;if(e.checkBtnShow("left")){g.scrollLeft=0}if(!e.stopTabLeft){setTimeout(arguments.callee,50)}})()}).bind("mouseup",function(){e.stopTabLeft=true;if(e.checkBtnShow("left")){e.scrollBtnL.hide()}e.scrollBtnR.show()});this.scrollBtnR.on("mousedown",function(){e.stopTabRight=false;(function(){g.scrollLeft+=10;if(!e.stopTabRight){setTimeout(arguments.callee,50)}})()}).bind("mouseup",function(){e.stopTabRight=true;if(e.checkBtnShow("right")){e.scrollBtnR.hide()}e.scrollBtnL.show()})}else{this.p.targetElem.on("scroll",function(){c.lazyDo(function(){if(this.checkBtnShow("left")){this.scrollBtnL.hide()}else{this.scrollBtnL.show()}if(this.checkBtnShow("right")){this.scrollBtnR.hide()}else{this.scrollBtnR.show()}},50,"ld_sbnj_scroll",e)})}this.divOut=this.scrollBtnL.add(this.scrollBtnR);if(this.p.top){this.divOut.css("top",this.p.top)}this.p.renderTo.append(this.scrollBtnL).append(this.scrollBtnR);return this},checkShow:function(f){var e=this.checkBtnShow();if(e&&!f){this.display(1);if(this.checkBtnShow("left")){this.scrollBtnL.hide()}if(this.checkBtnShow("right")){this.scrollBtnR.hide()}}else{this.display(0)}return e},checkBtnShow:function(f){var g=this.p.targetElem[0],e=null;switch(f){case"left":e=g.scrollLeft<=0;break;case"right":e=g.scrollLeft+g.clientWidth>=g.scrollWidth;break;default:e=g.scrollWidth>g.clientWidth;break}return e},reLayout:function(){this.checkShow()},pageResize:function(g){var f=g.data.thiz;c.lazyDo(function(){this.reLayout()},f.p.layoutDelay,"ld_sbnj_layout",f)},remove:function(){this._super();b(window).off("resize",this.pageResize)}});b.fn.extend({ScrollButtonJ:function(e){if(this&&this.length>0){return new d.ScrollButtonJ(this,c.SBNJ_commonConfig?b.extend(true,c.clone(c.SBNJ_commonConfig),e):e)}},SBNJ:function(e){return b(this).ScrollButtonJ(e)}})});FJ.define("widget.Tabs",["widget.Panel","widget.ScrollButton"],function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.TabsJ=this.TBJ=d.TabsJ=d.TBJ=d.CJ.extend({init:function(e,f){this._super(e,b.extend(true,{fjType:"TBJ",renderTo:e,layoutDelay:500,width:300,height:150,heightTabs:30,hasTabsBg:false,heightTabsBg:22,hideTabBtns:false,radius:0,borderWidth:1,panelBorder:null,showLoading:false,showTabBottom:false,asyncLoading:false,emptyPanelOnChange:false,selectInit:0,selectIndex:0,btnMarginLeft:15,panels:[],initLoadPanel:false,btnShiftW:12,scrollBtnTop:null,isLazyLoad:false,isAutoSetHeight:true,items:[],colorParams:{bgColor:null,tabBtnArea:null},evts:{onSelect:null},eType:(function(g){return{afterRender:g}})("TBJ")},f));this.initFn();return this},initFn:function(){var g=this,j=this.p.isLazyLoad,h=this.p.selectInit;this.tbjId="TBJ_"+this.objId;this._super();this.tabBtns=[];this.idToIndex={};if(this.p.hideTabBtns){this.p.hasTabsBg=false}this.shiftTop=this.p.hasTabsBg?4:2;this.create();this.show();if(this.p.isAutoSetHeight){this.areaTabPanels.height(this.divOut.height()-this.p.heightTabs)}if(j){this.addItem(this.p.items[h])}else{for(var f=0,e=this.p.items.length;f<e;f++){this.addItem(this.p.items[f],f)}}b(window).bind("resize",function(){if(!g.divOut.is(":hidden")){c.lazyDo(function(){this.reLayout()},g.p.layoutDelay,"ld_tbj_layout",g)}});this.fire("afterRender","TBJ");if(this.p.items.length){this.tabBtns[j?0:h].trigger(c.Evt.click)}c.lazyDo(function(){g.countTabBottom();g.checkScrollBtn()},100)},create:function(){var e=this;this._super();this.divOut.attr("id","TBJ_"+this.objId).addClass("tbj");if(!this.p.isAutoSetHeight){this.divOut.css("height","auto")}this.areaTabBtns=b('<div class="tbj_areaTabBtns"></div>').css("height",this.p.heightTabs);if(this.p.hasTabsBg){this.areaTabBtnsBg=b('<div class="tbj-area-tabbtns-bg"></div>').css({height:e.p.heightTabsBg,top:e.p.heightTabs-e.p.heightTabsBg});this.areaTabBtns.append(this.areaTabBtnsBg)}if(this.p.colorParams.tabBtnArea){this.areaTabBtns.css("background-color",this.p.colorParams.tabBtnArea)}if(this.p.hideTabBtns){this.areaTabBtns.hide();this.p.heightTabs=0}this.atbBorder=b('<div class="tbj-atb-border"></div>').css("top",e.p.heightTabs-1);this.areaTabBtnsBody=b('<div class="tbj_areaTabBtnsBody'+(c.isMobile?" fj-mobile":"")+'"></div>').css({marginLeft:this.p.btnMarginLeft});this.areaTabBtns.append(this.areaTabBtnsBody.append(this.atbBorder));if(!this.p.hideTabBtns){this.sbnj=this.areaTabBtns.SBNJ({targetElem:this.areaTabBtnsBody,top:this.p.scrollBtnTop})}this.areaTabPanels=b('<div class="tbj_areaTabPanels"></div>');if(this.p.colorParams.bgColor){this.areaTabPanels.css("background-color",this.p.colorParams.bgColor)}this.divOut.append(this.areaTabBtns).append(this.areaTabPanels);return this},changePanel:function(q,g,e){var f,j=this;if(!g){f=this.tabBtns[q]}else{f=g;q=b.inArray(g,this.tabBtns)}if(f&&!this.checkSelectBtn(f)){var h=f.find("td"),k=this.p.panels;this.fire("beforeSelect",{no:q,panel:k[q]});f.swapClassJ("tbj_tabBtnNormal","tbj_tabBtnDown");if(this.selectedBtn){this.selectedBtn.swapClassJ("tbj_tabBtnDown","tbj_tabBtnNormal")}this.selectedBtn=f;var o=k[this.p.selectIndex],n=this.p.selectIndex!=q;if(o){if(!this.p.asyncLoading){if(this.p.emptyPanelOnChange&&n){o.bodyIn.empty()}o.hide()}else{if(n){o.showLoad(true)}}}var m=k[q];this.p.selectIndex=q;this.selectId=m.p.bodyInId;if(!this.p.asyncLoading||!n){m.show(null,null,e)}else{m.loadBody("show",function(){if(o){if(j.p.emptyPanelOnChange&&n){var p={no:q,panelId:o.p.bodyInId,panel:o,p:e};j.fire("beforeClearPanel",p);o.bodyIn.empty();j.fire("afterClearPanel",p)}o.showLoad(false).hide()}this.show(true)},null,e)}var r=this.getItem(q);this.fire("onSelect",{no:q,panelId:m.p.bodyInId,panel:m,p:e,isOpened:r?r.isOpened:null});if(r){r.isOpened=true}}},select:function(k,j,e){var m,h;if(!c.RX.numZ(k)){m=k;k=this.idToIndex[k]}if(k==null&&this.p.isLazyLoad){h=this.getItemById(m);if(!h){return}this.addItem(h,null,true);k=this.tabBtns.length-1}var f=this.tabBtns[k];if(f){if(e){var g=this;this.cbPjLoad=function(){e.call(g,k,m)}}f.trigger(c.Evt.click,[j]);if(h){this.reLayout()}return this}else{return false}},getPanel:function(e){e=this.getNoById(e);if(e!=null){return this.p.panels[e]}},reloadPanel:function(g,e){var f=this.getPanel(g);this.fire("beforeReloadPanel",{no:g,panelId:f.p.bodyInId,panel:f});f.reload(e);return this},addItem:function(f,j,g){var m=this,o=false;if(j==null){o=true;if(!this.p.isLazyLoad){j=this.p.items.length;this.p.items.push(f)}else{j=this.tabBtns.length}}var e=this.p.heightTabs-this.shiftTop,h=b('<div class="tbj_tabBtn tbj_tabBtnNormal" style="height:'+e+"px;line-height:"+e+"px;top:"+this.shiftTop+'px;">'+(f.icon?'<img class="tbj_btnC1" src="'+f.icon+'" />':"")+'</span><span class="tbj_btnC2" >'+f.text+"</span><span>&nbsp;</span></div>");if(this.p.hasTabsBg){h.arrow=b("<div class='tbj_btnArrow'></div>");h.append(h.arrow);h.addClass("tbj_tbg")}if(f.canClose){var k=b('<img class="tbj_closeBtn tbj_btnC3" src="'+c.imgPath+'Datagrid/treegrid/s.gif" />');k.onGestureJ(c.Evt.click,function(q,p){p.evt.stopPropagation();m.removeItem(null,h)});h.append(k)}this.tabBtns[this.tabBtns.length]=h;h.onGestureJ(c.Evt.click,function(q,p){m.changePanel(null,h,p.param)});this.atbBorder.before(h);var n=this.areaTabPanels.PJ(b.extend(true,f,{width:!(c.isIElt8)?"100%":"99.7%",height:"100%",isAutoSetHeight:this.p.isAutoSetHeight,showHead:false,showFoot:false,bodyPadding:f.bodyPadding,isRenderHF:false,borderWidth:0,borderWidthB:this.p.panelBorder,isInitShow:false,onlyFirstLoad:f.loadOnShow?null:true,showLoading:this.p.showLoading,loadType:(function(){var p;if(f.iframe){p="iframe"}else{if(f.ajax){p="ajax"}else{p="html"}}return p})(),bodyInId:f.id,iframeId:f.iframeId,bodyUrl:f.url,ajaxParams:f.ajaxParams,fnHtml:function(){return f.html?f.html:""},colorParams:{bgColor:"#ffffff"},evts:b.extend(true,{afterBodyLoadTabs:function(q,p){m.fire("afterTabPageLoad",{no:j,panelId:this.p.bodyInId,panel:this,type:f.type,p:p});if(m.cbPjLoad){m.cbPjLoad();m.cbPjLoad=null}}},f.evts)}));h.pj=n;this.p.panels[this.p.panels.length]=n;if(c.isWebkit){n.bodyIn.bind("scroll",function(){c.lazyDo(function(){this.reLayout()},500,"ld_tbj_fixWebkitScroll",m)})}if(f.id!=null){this.idToIndex[f.id]=j}if(this.p.initLoadPanel&&j!=this.p.selectInit){n.show(null,function(){this.hide()})}if(o&&!g){c.lazyDo(function(){m.countTabBottom();m.checkScrollBtn()},50,"ld_tbj_addItemD",this)}},removeItem:function(h,g){if(this.tabBtns.length<=1){return}if(!g){g=this.tabBtns[h]}else{h=b.inArray(g,this.tabBtns)}g.remove();c.arr.removeAt(this.tabBtns,h);g.pj.remove();c.arr.removeAt(this.p.panels,h);if(!this.p.isLazyLoad){c.arr.removeAt(this.p.items,h)}else{var f=this.getItemById(h);if(f){f.isOpened=false}}this.loopIdToIndex(function(n,m,k){if(n==h){delete k[m]}else{if(n>h){k[m]=n-1}}});if(h==this.p.selectIndex){var j=h,e=this.tabBtns.length;if(h>=e){j=e-1}this.p.selectIndex-=1;this.changePanel(j)}else{if(h<this.p.selectIndex){this.p.selectIndex-=1}}if(this.p.selectIndex<0){this.p.selectIndex=0}this.countTabBottom();this.checkScrollBtn()},reLayout:function(){var n=this.p.responsive,o=this.p.heightTabs;if(!this.p.hideTabBtns){this.areaTabBtns.show();this.countTabBottom();this.checkScrollBtn();if(n){var f=this.p.heightTabsBg,g=o-this.shiftTop;this.areaTabBtns.height(o)[0].offsetHeight;this.atbBorder.css("top",o-1);if(this.p.hasTabsBg){this.areaTabBtnsBg.css({height:f,top:o-f})}for(var k=0,e=this.tabBtns.length;k<e;k++){var j=this.tabBtns[k];j.css({height:g,lineHeight:g+"px",top:this.shiftTop})}}}else{this.areaTabBtns.hide()}if(this.p.isAutoSetHeight){var m=this.divOut.height()-(this.areaTabBtns.is(":visible")?o:0);this.areaTabPanels.height(m)}},checkScrollBtn:function(f){var e=false;if(!this.p.hideTabBtns){e=this.sbnj.checkShow()}return e},checkSelectBtn:function(e){var f=e.hasClass("tbj_tabBtnDown");return f},getItem:function(e){if(!this.p.isLazyLoad){e=this.getNoById(e);if(e!=null){return this.p.items[e]}}else{if(e!=null){return this.getItemById(e)}else{var f=this.getIdByNo(this.p.selectIndex);return this.getItemById(f)}}},getItemById:function(h){if(c.RX.numZ(h)){h=this.getIdByNo(h)}for(var f=0,e=this.p.items.length;f<e;f++){var g=this.p.items[f];if(h==g.id){return g}}},loopIdToIndex:function(e){var f=this.idToIndex;for(var h in f){var g=f[h];if(e.call(this,g,h,f)===false){break}}},getNoById:function(e){if(e!=null){if(!c.RX.numZ(e)){e=this.idToIndex[e]}}else{e=this.p.selectIndex}return e},getIdByNo:function(e){var f;this.loopIdToIndex(function(j,h,g){if(j==e){f=h;return false}});return f},countTabBottom:function(){this.atbBorder.css("width",0).width(this.areaTabBtnsBody[0].scrollWidth)},changeDrawTheme:function(e){}});b.fn.extend({TabsJ:function(e){if(this&&this.length>0){return new d.TabsJ(this,c.TBJ_commonConfig?b.extend(true,c.clone(c.TBJ_commonConfig),e):e)}},TBJ:function(e){return b(this).TabsJ(e)}})});FJ.define("widget.Datagrid",["widget.ScrollBar","widget.Menu","widget.Window"],function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.DatagridJ=this.DGJ=d.DatagridJ=d.DGJ=d.CJ.extend({init:function(e,f){this._super(e,b.extend(true,{fjType:"DGJ",renderTo:e,renderType:"prepend",renderToMuj:"body",layoutDelay:500,columns:[{text:"ID",dataIndex:"id"}],showOnInit:true,emptyTxt:"没有数据",emptyRowH:30,hasChk:false,hideChk:false,hasChkAll:false,isChkAll:false,hasChkG:false,hasChkGR:false,hasChkT:false,isCheckOne:false,defaultH:20,defaultHH:20,defaultHF:20,defaultW:150,defaultMinW:30,defaultAlign:"center",lockColumn:0,lockColumnR:0,lcMinWidth:80,dynamicLockColumn:false,hasGroup:false,renderGroupRow:null,renderSonRow:null,sonRowName:"sonRows",asyncLoadSonRow:false,collapseSonRow:false,collapseAnimate:false,collapseSpeed:400,isTree:false,isTreeGrid:false,nodeIndex:"nodes",idField:"id",nodePathField:"nodePath",nodeChkField:"nodeChk",asyncLoadTree:false,treeUrl:null,judgeLeaf:null,isRowHighlight:c.isMobile?false:true,treeLocalLazy:true,checkAsyncLoad:null,nodeDeepRetract:17,easing:"easeOutExpo",chkStyle:true,chkCollapse:false,groupRowH:null,useSingleThColor:false,useNewRowColor:false,chkWidth:20,canColumeDD:c.isMobile?false:true,hideColumeDD:[],canSort:true,isCustomSort:false,noSortSp:null,defaultSortCol:null,defaultSortAsc:true,canCopy:true,canHideCol:true,canFullScreen:true,canExportCsv:true,csvDot:"'",canChangeTheme:true,canRefreshPage:true,csvMenuName:"导出excel",csvFileName:"导出表格数据",ddPosType:"offset",isLazyLoad:false,lazyLoadSpeed:5,lazyInfo:'表格数据还未完全显示,您可以向下拖动滚动条继续查看,或在右键菜单中选择"显示全部数据"。',lazyDataLimit:20,lazyScrollBottom:150,isPageCache:false,highLightFade:d.isIElt9?0:1,hasFloatBtn:true,floatBtnImg:null,fbSpace:c.isMobile?false:true,stopHideColumn:[],defaultHideColumn:[],hasSelectColor:true,hasGridFoot:false,isMergeCellF:false,pMergeCellF:{n:2,j:1},isMergeCellV:false,mcShift:7,hasRowContextMenu:c.isMobile?false:true,hideMenuWidth:150,contextMenuItems:[],zIndexMenu:601,zIndexMenuC:602,canSelectRow:false,canSelectRowR:false,isReservedSbjH:false,hideScrollH:c.isMobile?true:false,isAutoSetHeight:true,isAutoSetWidth:true,width:450,height:"auto",borderWidth:0,storeName:null,quickRenderMode:false,sortLoading:false,exportCol:null,noGridBorder:false,noBorder:false,isShowNodeImg:true,hideImgB:false,imgBw:16,imgBmarginR:2,nodeMarginL:10,filterTag:null,isHideHead:false,hasHeadTip:false,headTipConfig:null,autoNo:null,cellPadding:null,cellInnerPadding:null,editSetHeight:false,compatibleMode:false,useObjParam:false,percentWidth:false,hideBlankImg:false,colorParams:{borderOut:null,bgColor:null,highlight:null,select:"#d2e1f6",trColor1:null,trColor2:null,thColor:null,groupRow:null,groupRow2:null,newRow:"#e1e1e1",spRowColor:"#FFCC00",selectColor:null,trColorFoot:null},evts:{dataLoaded:null,afterSetWidth:null,preColumnRender:null,rowContextMenu:null,beforeCopy:null,beforeSortLoading:null,afterSortLoading:null},eType:(function(g){return{afterRender:g,initComplete:g,beforeRemove:g}})("DGJ")},f));this.initFn();return this},initFn:function(){var p=this;this.hasAnimateHl=false;if(c.jQversion){if(c.jQversion[0]<2&&c.jQversion[1]<8){this.hasAnimateHl=jQuery.fx.step.backgroundColor&&this.p.highLightFade}}if(this.p.isTree){this.p.hideChk=true}LMJ.preLoadImg(3);LMJ.preLoadImg(4);this.useMbj=true;this.data=[];this.data.lengthD=0;this.rows=[];this.pageNo=1;this._super();this.isLoading=false;if(this.p.isPageCache){this.pageCache=[];this.datas=[]}if(this.p.isLazyLoad){this.lazyRowNo=0}else{this.p.lazyDataLimit=-1}if(this.p.collapseSonRow){this.shiftG=10;if(d.isIElt8){this.shiftG=12}else{if(d.isIE8||d.isIE9||d.isIE10||d.isWebkit||d.isOpera){this.shiftG=11}}}if(this.p.canFullScreen){this.isFullScreen=false}if(this.p.storeName){try{var r=d.LocalStorage.getItem({key:this.p.storeName+"_hide"});if(r){var j=JSON.parse(r);for(var n=0,h=j.length;n<h;n++){var u=j[n];this.p.columns[u].isHide=true}}else{this.hideColumnD()}var q=d.LocalStorage.getItem({key:this.p.storeName+"_colWidth"});if(q){var m=JSON.parse(q);for(var f in m){this.p.columns[f].width=m[f]}}}catch(s){}}else{this.hideColumnD()}for(var n=0,h=this.p.columns.length;n<h;n++){var g=this.p.columns[n];if(this.p.lockColumn&&n<this.p.lockColumn-1){g.lockCol="l"}else{if(this.p.lockColumnR&&n>=this.p.lockColumnR-1){g.lockCol="r"}}g.colId=n}var k=b("#nbspFixJ");if(!k.length){k=b('<input type="hidden" id="nbspFixJ" value="&nbsp;" />');d.oBody.prepend(k)}this.nbspJ=k.val();if(this.p.isTreeGrid){this.blankImg='<img class="dgj_blank'+(this.p.hideBlankImg?" fj-hidden-pc":"")+'" style="width:'+this.p.imgBw+"px;margin-right:"+this.p.imgBmarginR+'px;" src="'+c.imgPath+'Datagrid/treegrid/s.gif" />';if(this.p.asyncLoadTree){this.p.treeLocalLazy=false}this.p.chkStyle=false}if(this.p.isTree){this.p.isHideHead=true}if(this.p.noGridBorder){this.p.mcShift-=2}if(this.p.isMergeCellV){this.p.canSort=false}for(var n=0,t=this.p.columns,h=t.length;n<h;n++){if(t[n].columnGroup!=null){this.columnGroup={};this.p.canHideCol=false;break}}if(c.isMobile){this.p.canExportCsv=false;this.p.hasRowContextMenu=false}this.create();if(this.p.showOnInit){this.show();p.clearData(true);p.fire("initComplete","DGJ")}if(this.p.hasGridFoot&&this.p.isMergeCellF){this.mergeCellFn(this.p.pMergeCellF.n,this.p.pMergeCellF.j,this.trF)}if(this.p.lockColumn){this.p.collapseAnimate=false}if(c.isFF){setTimeout(function(){p.reLayout()},1000)}},create:function(){var f=this;this._super();this.divOut.attr("id","DGJ_"+this.objId).addClass("dgj").css({width:this.p.width,height:this.p.height});if(c.isMobile){this.divOut.addClass("fj-mobile")}this.headContainer=b('<div class="dgj_headContainer"></div>');if(this.p.isHideHead){this.headContainer.height(0)}if(this.p.borderWidth){this.headContainer.addClass("dgj_headContainerB")}this.bodyContainer=b('<div class="dgj_bodyContainer'+(c.isMobile?" fj-mobile":"")+'"></div>');if(!this.p.isTree){this.bodyContainer.bind("scroll",function(){if((d.isIElt8)&&f.p.lockColumn){f.lcContainer.css("position","static");d.lazyDo(function(){this.lcContainer.css("position","relative");var j=this.sbj.getScrollLeft();if(j>0){this.sbj.setScrollLeft(j+1);this.sbj.setScrollLeft(j-1)}else{this.setDDPosition(true)}},500,"ld_dgjScV",f)}d.lazyDo(function(){this.headContainer.scrollLeft(this.bodyContainer.scrollLeft());if(this.p.isLazyLoad){if(this.lazyRowNo>this.data.length-1){this.divOut.attr("title","");return}this.lazyAddRow();this.joinCacheData()}},f.p.lazyLoadSpeed,"ld_dgjBodyC",f)})}this.tableHead=b('<table class="dgj_tableH1"></table>');if(this.p.borderWidth){this.tableHead.css("margin-left",-1)}this.mainHeadContainer=b('<div class="dgj_mainHeadContainer"></div>');this.mainHeadContainer.append(this.tableHead);this.table=b('<table class="dgj_table1"></table>');if(this.p.isHideHead){this.table.css("marginTop",0)}if(this.p.borderWidth){this.table.css("margin-left",-1)}if(this.p.noBorder){this.table.css("border-width",0)}this.mainContainer=b('<div class="dgj_mainContainer"></div>');if(this.p.percentWidth){this.mainContainer.css("width","100%");this.table.css("width","100%")}this.mainContainer.append(this.table);this.gridContainer=b('<div class="dgj_gridContainer"></div>');this.gridContainer.append(this.headContainer.append(this.mainHeadContainer)).append(this.bodyContainer.append(this.mainContainer));if(this.p.hasGridFoot){this.footContainer=b('<div class="dgj_footContainer"></div>');this.tableFoot=b('<table class="dgj_tableF1"></table>');this.mainFootContainer=b('<div class="dgj_mainFootContainer"></div>');this.mainFootContainer.append(this.tableFoot);this.gridContainer.append(this.footContainer.append(this.mainFootContainer))}this.sBarHContainer=b('<div class="dgj_sBarHContainer"></div>');if(this.p.lockColumn){this.tableHead2=b('<table class="dgj_tableH2"></table>').css("margin-left",-1);this.lcHeadContainer=b('<div class="dgj_lcHeadContainer"></div>');this.lcHeadContainer.append(this.tableHead2);this.lcContainer=b('<div class="dgj_lcContainer"></div>');this.mainHeadContainer.css("width","auto");this.mainContainer.css("width","auto");this.table2=b('<table class="dgj_table2"></table>').css("margin-left",-1);if(this.p.isHideHead){this.table2.css("marginTop",0)}if(this.p.noBorder){this.table2.css("border-width",0)}this.lcContainer.append(this.table2);this.thead2=b("<thead></thead>");this.trH2=b("<tr></tr>");this.thead2.append(this.trH2);if(this.columnGroup){this.trHcg2=b("<tr></tr>");this.thead2.append(this.trHcg2)}this.thds2=[];this.ths2=[];this.tbody2=b("<tbody></tbody>");this.tableHead2.append(this.thead2);this.table2.append(this.tbody2)}if(this.p.lockColumnR){this.tableHead3=b('<table class="dgj_tableH3"></table>');this.rightHeadContainer=b('<div class="dgj_rightHeadContainer"></div>');this.rightHeadContainer.append(this.tableHead3);this.rightContainer=b('<div class="dgj_rightContainer"></div>');this.table3=b('<table class="dgj_table3"></table>');if(this.p.isHideHead){this.table3.css("marginTop",0)}if(this.p.noBorder){this.table3.css("border-width",0)}this.mainContainer.css("width","auto");this.rightContainer.append(this.table3);this.thead3=b("<thead></thead>");this.trH3=b("<tr></tr>");this.thead3.append(this.trH3);if(this.columnGroup){this.trHcg3=b("<tr></tr>");this.thead3.append(this.trHcg3)}this.thds3=[];this.ths3=[];this.tbody3=b("<tbody></tbody>");this.tableHead3.append(this.thead3);this.table3.append(this.tbody3)}this.thead=b("<thead></thead>");this.trH=b("<tr></tr>");this.thead.append(this.trH);if(this.columnGroup){this.trHcg=b("<tr></tr>");this.thead.append(this.trHcg)}this.tableHead.append(this.thead);if(this.p.hasChk){this.chks=[];this.thAll=b('<th class="dgj_cell" chkCell="true" style="text-align:center;'+(!this.p.hideChk?"":"display:none;")+(this.p.borderWidth?"border-top:0;border-bottom:0;":"")+'"></th>').css({height:this.p.defaultHH});this.tdDivAll=b('<div chkCellDiv="true" class="dgj_tdDiv dgj_chkDiv"></div>').css({width:this.p.chkWidth});this.thAll.append(this.tdDivAll);if(this.p.hasChkAll&&!this.p.isCheckOne){this.chkAll=b('<input title="全选" id="dgj_chkall_'+this.p.objId+'" type="checkbox" hidefocus />');if(this.p.chkStyle){this.sbxjAll=this.chkAll.SBXJ({initClass:"dgj_chkC",type:this.p.chkCollapse?"collapse":null,isInitHide:false,canQuery:false});this.tdDivAll.append(this.sbxjAll.divOut)}else{this.tdDivAll.append(this.chkAll)}this.chkAll.click(function(j){j.stopPropagation();f.fnChkAll(this);f.fire("checkedAll",{checked:this.checked})})}this.trH.append(this.thAll)}var t=[];this.thds=[];this.thds1=[];this.ths1=[];for(var O=0,w=this.p.columns,K=w.length,q=0,p=0,o=0,M=0;O<K;O++){var N,Q,T,m,I=this.getColType(O),S=w[O],y=!this.columnGroup||!S.columnGroup;switch(I){case 0:case 1:if(y){N=this.trH}else{N=this.trHcg;Q=this.trH}T=this.thds1;m=this.ths1;M=q;q++;break;case 2:if(y){N=this.trH2}else{N=this.trHcg2;Q=this.trH2}T=this.thds2;m=this.ths2;M=p;p++;break;case 3:if(y){N=this.trH3}else{N=this.trHcg3;Q=this.trH3}T=this.thds3;m=this.ths3;M=o;o++;break}N.append((function(Y,k,j){var V=b('<div class="dgj_tdDiv dgj_thDiv"></div>');if(!f.p.isHideHead){V.css({width:f.p.defaultW})}if(Y.headTip){V.attr("headTip",Y.headTip)}if(!Y.headerFn){V.append('<span class="dgj_thSp">'+Y.text+"</span>")}else{aRf=[V,Y.headerFn,Y.text,Y,k,N];t.push(aRf)}var X=b('<th class="dgj_cell" '+(f.p.borderWidth?'style="border-top:0;border-bottom:0;"':"")+"></th>").css({height:f.p.defaultHH});X.attr("colId",k);if(Y.editable){X[0].style.padding="0px";V[0].style.padding="0px 5px 0px 1px"}if(f.p.canSort&&!Y.noSort){f.setCellSort(k,Y,X,V,true)}if(Y.width){if(!f.p.isHideHead){V.css({width:Y.width})}}else{f.columnP=k}X.append(V);if(f.columnGroup){if(!Y.columnGroup){X.attr("rowspan",2)}else{var W=f.columnGroup[Y.columnGroup];if(!W){W=b('<th class="dgj_cell" colspan="1" dgjCs="1"><div class="dgj_tdDiv dgj_thDiv">'+Y.columnGroup+"</div></th>");f.columnGroup[Y.columnGroup]=W;Q.append(W);if(f.p.lockColumn){switch(j){case 0:case 1:f.hasCg1=true;break;case 2:f.hasCg2=true;break;case 3:f.hasCg3=true;break}}}else{var v=parseInt(W.attr("dgjCs"),10);W.attr("colspan",v+1)}}}f.thds.push(V[0]);T.push(V[0]);m.push(X[0]);return X})(S,O,I));if(S.mergeCellH){this.mergeCellH(S.mergeCellH,M,N);for(var L=O;L>O-S.mergeCellH;L--){this.p.hideColumeDD[this.p.hideColumeDD.length]=L}}}for(var L=0,K=t.length;L<K;L++){var F=t[L],H=F[1].call(f,F[2],F[3],F[4],F[5]);F[0].append('<span class="dgj_thSp">'+H+"</span>")}this.thds=b(this.thds);this.thds1=b(this.thds1);this.ths1=b(this.ths1);if(this.p.lockColumn){this.thds2=b(this.thds2);this.ths2=b(this.ths2)}if(this.p.lockColumnR){this.thds3=b(this.thds3);this.ths3=b(this.ths3)}if(this.p.hasGridFoot){this.tfoot=b("<tfoot></tfoot>");this.trF=b("<tr></tr>");if(this.p.colorParams.trColorFoot){this.trF.css("background-color",this.p.colorParams.trColorFoot)}this.tfoot.append(this.trF);this.tableFoot.append(this.tfoot);if(this.p.hasChk){this.tdAllF=b('<td chkCell="true" style="text-align:center;"></td>').css({height:this.p.defaultHF});this.tdDivAllF=b('<div class="dgj_tdDiv"></div>').css({width:this.p.chkWidth});this.tdAllF.append(this.tdDivAllF);this.trF.append(this.tdAllF)}for(var O=0,w=this.p.columns,K=w.length;O<K;O++){var R;if(!this.p.lockColumn){R=this.trF}else{}R.append((function(V,j){var k=b('<div class="dgj_tdDiv"></div>').css({width:f.p.defaultW});if(V.textF){k.append(V.textF)}if(V.align){k.css("text-align",V.align)}else{k.css("text-align",f.p.defaultAlign)}var v=b("<td></td>").css({height:f.p.defaultHF});v.attr("colId",j);k.css({width:V.width});v.append(k);return v})(w[O],O))}}if(this.p.hasFloatBtn){this.floatBtn=b('<input type="button" title="点击可自定义设置" onclick="this.focus()" hidefocus id="dgj_floatBtn_'+this.objId+'" class="dgj_floatBtn" />');if(this.p.floatBtnImg){this.floatBtn.css("background-image","url("+this.p.floatBtnImg+")")}if(this.p.isTree){this.floatBtn.css({top:0,right:20})}this.divOut.parent().append(this.floatBtn)}var s=[];var D=[];var A=[];for(var E=0,w=this.p.columns,K=w.length;E<K;E++){if(this.p.stopHideColumn.length==0||b.inArray(E,this.p.stopHideColumn)==-1){(function(k){var j=w[k].colId;s.push({id:"hideCol"+k,text:w[k].text,hasChk:true,click:function(v){f.hideColumnMenu(k,v.checked,v.chk)}})})(E)}}var U={id:"dgjHcMuj_"+this.objId,text:"隐藏列",maxHeight:300,width:this.p.hideMenuWidth,shiftLeft:111-this.p.hideMenuWidth,menus:s,evts:{afterBodyLoad2:function(){for(var k=0,j=this.chks.length;k<j;k++){this.chks[k].setChecked(f.p.columns[k].isHide?false:true,null,true)}}}};var C=[];if(!this.p.isTree&&this.p.canHideCol){C.push(U)}var u,J;if(this.p.dynamicLockColumn){u=[{id:"dgj_muj_lcL_"+this.objId,text:"左侧",width:this.p.hideMenuWidth,shiftLeft:96-this.p.hideMenuWidth,menus:D},{id:"dgj_muj_lcR_"+this.objId,text:"右侧",width:this.p.hideMenuWidth,shiftLeft:96-this.p.hideMenuWidth,menus:A}];C.push({text:"冻结列",maxHeight:300,menus:u,evts:{afterItemRender:function(k,j){if(f.p.dynamicLockColumn){J(j)}}}});J=function(j){if(j.id=="dgj_muj_lcL_"+f.objId&&!f.mujLcL){f.mujLcL=d.get("dgj_muj_lcL_"+f.objId)}if(j.id=="dgj_cmj_lcL_"+f.objId&&!f.cmjLcL){f.cmjLcL=d.get("dgj_cmj_lcL_"+f.objId)}if(j.id=="dgj_muj_lcR_"+f.objId&&!f.mujLcR){f.mujLcR=d.get("dgj_muj_lcR_"+f.objId)}if(j.id=="dgj_cmj_lcR_"+f.objId&&!f.cmjLcR){f.cmjLcR=d.get("dgj_cmj_lcR_"+f.objId)}}}var r,B,n,z,e;if(this.p.storeName){r={text:"清除表格列状态",icon:"<img src='"+d.imgPath+"Menu/deleteUser.gif' />",click:function(){d.LocalStorage.removeItem({key:f.p.storeName+"_hide"});d.LocalStorage.removeItem({key:f.p.storeName+"_colWidth"});this.setVisible(false)}};C.push(r)}if(this.p.canFullScreen){B={id:"dgjFs_"+this.objId,text:"全屏显示",icon:"<img src='"+d.imgPath+"Menu/imgBrowser.gif' />",click:function(j){this.setVisible(false);f.fnFullScreen()}};C.push(B)}if(this.p.canChangeTheme){e={id:"dgjCt_"+this.objId,text:"切换主题",shiftLeft:11,menus:[{text:"蓝色",icon:"<img src='"+d.imgPath+"Menu/theme_blue.gif' />",click:function(j){c.theme.change("blue")}},{text:"灰色",icon:"<img src='"+d.imgPath+"Menu/theme_gray.gif' />",click:function(j){c.theme.change("gray")}}]};C.push(e)}if(this.p.isLazyLoad){n={text:"显示全部数据",icon:"<img src='"+d.imgPath+"Menu/load.gif' />",click:function(){this.setVisible(false);if(f.useMbj){MBJ.loading("提示","正在加载中,请稍候...",function(){var j=this;setTimeout(function(){f.autoLoadlazyRow(true);j.close()},100)})}else{f.autoLoadlazyRow(true)}}};C.push(n)}if(this.p.canExportCsv){z={text:this.p.csvMenuName,id:"dgjExportCsvMuj_"+this.objId,icon:"<img src='"+d.imgPath+"FileUpload/filetype/xls.gif' />",click:function(){setTimeout(function(){if(!c.isLocal){if(parseFloat(d.getFlashVer().split(".")[0])<10){f.alert("您的浏览器flash版本过低或没有安装flash插件,请先升级或安装flash插件(10.0以上版本)后再执行导出。")}}else{f.alert("本地模式不支持导出操作")}},50)}};window["getCsvData_"+this.objId]=function(){return f.p.csvFileName+c.Date.toFormatString(new Date(),"yyyymmddhhMMss")+"<split/>"+f.getGridText(true)};window["callBackCsvData_"+this.objId]=function(){var j;if(!f.p.isTree&&f.p.hasFloatBtn){j=f.mujFbtn}else{j=f.rowCmj}j.setVisible(false)};window["setExportBtnOver_"+this.objId]=function(){f.itemCsvMuj.trigger("mouseenter")};window["setExportBtnOut_"+this.objId]=function(){f.itemCsvMuj.trigger("mouseleave")};window["setFxCsvPosition_"+this.objId]=function(j){if(!c.isIE){var k;if(!f.p.isTree&&f.p.hasFloatBtn){k=f.mujFbtn}else{k=f.rowCmj}if(j==1){k.p.canClose=false}else{if(j==2){k.p.canClose=true}}}};window["exportCsvError_"+this.objId]=function(){f.alert("您的系统中有已打开的同名excel文件,请先关闭该excel文件或修改文件名后再执行导出。")};C.push(z);var G=function(k){if(f.itemCsvMuj&&!k.isLoadEhj&&parseFloat(d.getFlashVer().split(".")[0])>=10&&!c.isLocal){k.isLoadEhj=true;var v="dgjCsvDivMuj_"+f.objId,j=k;k.bodyIn.append(b("<div id='"+v+"'></div>"));setTimeout(function(){d.FX.create(v,d.rootPath+"resources/swf/ExportCsvHelperJ.swf",v,j.p.width,24,{getCsvData:"getCsvData_"+f.objId,callBackCsvData:"callBackCsvData_"+f.objId,setExportBtnOver:"setExportBtnOver_"+f.objId,setExportBtnOut:"setExportBtnOut_"+f.objId,setFxCsvPosition:"setFxCsvPosition_"+f.objId,exportCsvError:"exportCsvError_"+f.objId},null,"10.0.0");b("#"+v).css({position:"absolute",top:f.itemCsvMuj.position().top})},1)}}}if(this.p.hasFloatBtn){this.mujFbtn=b(this.floatBtn).MUJ({renderTo:this.p.renderToMuj,showRendorBody:this.p.renderToMuj!=null?true:false,hoverDirect:"left",cMenuDirect:"left",autoDirect:false,shiftLeft:-105,shiftTop:19,width:115,menus:C,zIndex:this.p.zIndexMenu,tranOrigin:"85% 0%",tranScaleShow:"scale(1, 0.1)",tranScaleClose:"scale(1, 0.8)",evts:{afterItemRender:function(k,j){if(j.id=="dgjFs_"+f.objId){f.btnFs=j.item}if(j.id=="dgjHcMuj_"+f.objId){f.mujHc=j.menu}if(f.p.canExportCsv&&j.id=="dgjExportCsvMuj_"+f.objId){f.itemCsvMuj=j.item;this.bodyIn.css("position","relative")}},afterBodyLoad2:function(){if(f.p.canExportCsv){G(this)}if(f.p.hasRowContextMenu){f.rowCmj.setVisible(false)}}}})}if(this.p.hasRowContextMenu){U.id="dgjHcCmj_"+this.objId;if(this.p.canFullScreen){B.id="dgjFsCmj_"+this.objId}if(this.p.canChangeTheme){e.id="dgjCtCmj_"+this.objId}if(this.p.dynamicLockColumn){u[0].id="dgj_cmj_lcL_"+this.objId;u[1].id="dgj_cmj_lcR_"+this.objId}if(this.p.canCopy){window["getClipboardData_"+this.objId]=function(){var j=f.fire("beforeCopy");if(j==null){j=f.getGridText()}return j};window["callBackClipboardData_"+this.objId]=function(){f.rowCmj.setVisible(false)};window["setCopyBtnOver_"+this.objId]=function(){f.itemCopyCmj.trigger("mouseenter")};window["setCopyBtnOut_"+this.objId]=function(){f.itemCopyCmj.trigger("mouseleave")};if(d.isIE||d.isFF||parseFloat(d.getFlashVer().split(".")[0])>=9){C.unshift({id:"dgjCopyCmj_"+this.objId,text:"复制",icon:"<img src='"+d.imgPath+"Menu/copy.gif' />",title:d.isIE?'友情提示:如果您点击复制时浏览器提示是否允许访问剪贴板,您可以请依次点击进入"工具">"Internet选项">"安全">"自定义级别"将"允许对剪贴板进行编程访问"项设置为"启用"。':null,click:function(k){var j=window["getClipboardData_"+f.objId]();this.setVisible(false);setTimeout(function(){if(d.isIE){window.clipboardData.setData("text",j)}else{if(d.isFF){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(Y){f.alert("复制操作被浏览器拒绝！\n请在浏览器地址栏输入'about:config'并回车\n然后将'signed.applets.codebase_principal_support'设置为'true'")}var W=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!W){return}var V=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!V){return}V.addDataFlavor("text/unicode");var Z=new Object();var v=new Object();var Z=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);var aa=j;Z.data=aa;V.setTransferData("text/unicode",Z,aa.length*2);var X=Components.interfaces.nsIClipboard;W.setData(V,null,X.kGlobalClipboard)}else{f.alert("对不起，您的浏览器不支持复制操作")}}},50)}})}}if(this.p.isTreeGrid&&this.p.asyncLoadTree){C.push({text:"刷新子节点",icon:"<img src='"+d.imgPath+"Pagination/refresh.gif' />",click:function(j){this.setVisible(false);f.refreshChildNode(f.currentNode)}})}if(this.p.canRefreshPage){C.push({text:"刷新页面",icon:"<img src='"+d.imgPath+"Pagination/refresh.gif' />",click:function(){this.setVisible(false);setTimeout(function(){location.reload(true)},100)}})}b.merge(this.p.contextMenuItems,C);if(!this.p.isTree&&this.p.canExportCsv&&this.p.hasFloatBtn){for(var O=0,K=this.p.contextMenuItems.length;O<K;O++){if(this.p.contextMenuItems[O].id==("dgjExportCsvMuj_"+this.objId)){c.arr.removeAt(this.p.contextMenuItems,O);break}}}this.rowCmj=b(this.gridContainer).CMJ({renderTo:this.p.renderToMuj,showRendorBody:this.p.renderToMuj!=null?true:false,zIndex:this.p.zIndexMenuC,menus:this.p.contextMenuItems,width:115,showOnSelectText:false,tranOrigin:"50% 0%",tranScaleShow:"scale(1, 0.1)",tranScaleClose:"scale(1, 0.8)",evts:{afterShow:function(){f.fire("rowContextMenu")},afterBodyLoad2:function(){if(f.p.canCopy&&f.itemCopyCmj&&!this.isLoadChj&&parseFloat(d.getFlashVer().split(".")[0])>=9&&!c.isLocal){this.isLoadChj=true;var j="dgjCopyDivCmj_"+f.objId,k=this;this.bodyIn.append(b("<div id='"+j+"'></div>"));setTimeout(function(){d.FX.create(j,d.rootPath+"resources/swf/CilpboardHelperJ.swf",j,k.p.width,24,{getClipboardData:"getClipboardData_"+f.objId,callBackClipboardData:"callBackClipboardData_"+f.objId,setCopyBtnOver:"setCopyBtnOver_"+f.objId,setCopyBtnOut:"setCopyBtnOut_"+f.objId},null,"9.0.0");b("#"+j).css({position:"absolute",top:f.itemCopyCmj.position().top})},1)}if((f.p.isTree||!f.p.hasFloatBtn)&&f.p.canExportCsv){G(this)}if(f.mujFbtn){f.mujFbtn.setVisible(false)}},afterItemRender:function(k,j){if(j.id=="dgjFsCmj_"+f.objId){f.btnFsCmj=j.item}if(j.id=="dgjCopyCmj_"+f.objId){f.itemCopyCmj=j.item;this.bodyIn.css("position","relative")}if((f.p.isTree||!f.p.hasFloatBtn)&&f.p.canExportCsv&&j.id=="dgjExportCsvMuj_"+f.objId){f.itemCsvMuj=j.item;this.bodyIn.css("position","relative")}}}})}this.tbody=b("<tbody></tbody>");this.table.append(this.tbody);this.divOut.append(this.gridContainer).append(this.sBarHContainer);this.sbj=b(this.sBarHContainer).SBJ({width:0,widthC:0,style:d.isIE7?"float:left;":null,evts:{scroll:function(k,j){if(!f.p.lockColumn){f.headContainer[0].scrollLeft=j.s.scrollLeft;f.bodyContainer[0].scrollLeft=j.s.scrollLeft;if(f.p.hasGridFoot){f.footContainer[0].scrollLeft=j.s.scrollLeft}d.lazyDo(function(){if(this.p.canColumeDD){this.setDDPosition()}},100,"ld_dgjScroll",f)}else{f.lcHeadContainer[0].scrollLeft=j.s.scrollLeft;f.lcContainer[0].scrollLeft=j.s.scrollLeft;d.lazyDo(function(){if(this.p.canColumeDD){this.setDDPosition(true)}},100,"ld_dgjScroll",f)}}}});if(this.p.lockColumn){this.headContainer.append(this.lcHeadContainer);this.bodyContainer.append(this.lcContainer);this.gridContainer.bind("scroll",function(){if(f.p.lockColumn){d.lazyDo(function(){this.setSbjPostionLc()},f.p.lazyLoadSpeed,"ld_dgjGridC",f)}})}if(this.p.lockColumnR){this.headContainer.append(this.rightHeadContainer);this.bodyContainer.append(this.rightContainer)}if(this.p.useSingleThColor&&this.p.colorParams.thColor){this.headContainer.find("th").css({backgroundImage:"none",backgroundColor:this.p.colorParams.thColor})}if(this.p.canColumeDD){this.setColumeDD()}b(window).bind("resize",function(){if(!f.divOut.is(":hidden")){d.lazyDo(function(){this.reLayout(this.p.asyncLoadTree?true:false,this.p.isTree)},f.p.layoutDelay,"ld_dgjMH",f)}});this.fire("afterRender","DGJ");if(this.p.hasHeadTip&&!this.p.isTree){var P=this.headContainer.find("div[headTip].dgj_thDiv");if(P.length>0){var g=this.p.headTipConfig,h={showRendorBody:true,showHead:false,speed:1,showSpeed:10,hoverSpeed:100,loadSpeed:1,showLoading:false,zIndex:1000,isBodyEmpty:true,hoverOnTip:c.isMobile?false:true,radius:d.isIElt9?0:5,urlType:"html",posType:"offset",hoverDirect:"bottom",shiftLeft:0,shiftTop:17,width:180,height:50,opacity:0.8,isAutoSetHeight:false,radiusB:4,hasShadow:true,loadHTML:function(){return"<div class='dgj_headTip'>"+this.currentObj.attr("headTip")+"</div>"}};if(g&&g.renderTo){h.renderTo=g.renderTo;delete g.renderTo}else{h.renderTo=this.divOut}this.ttjHeadTip=P.TTJ(b.extend(true,h,g))}}return this},loadData:function(y,A,z,u,e){var w=this;this.data=y;if(this.data&&this.data.lengthD==null){this.data.lengthD=this.data.length}this.judgeLazyDataLimit();if(this.p.isLazyLoad){this.divOut.attr("title","")}if(this.p.hasChk&&this.p.hasChkAll&&this.chkAll){if(this.p.chkStyle){this.sbxjAll.setChecked(false,null,true)}else{this.chkAll[0].checked=false}}if(y&&y.length>0){if(this.p.defaultSortCol){c.Sort.execute(y,this.p.defaultSortCol,this.p.defaultSortAsc,this.p.noSortSp)}if(!this.p.isPageCache){this.chks=[];this.rows=[];if(this.p.isLazyLoad){this.lazyRowNo=0}this.tbody.empty();if(this.p.lockColumn){this.tbody2.empty()}if(this.p.lockColumnR){this.tbody3.empty()}var p={thds:this.thds};if(!this.p.quickRenderMode){for(var t=0,r=y.length;t<r;t++){var o=this.addRow(y[t],t,null,true,null,null,null,null,p);if(this.p.isLazyLoad){this.setMainHeight();this.lazyRowNo=t+1;for(var s=0,h=this.p.columns,q=h.length;s<q;s++){if(h[s].isHide){this.hideColumnR(o,s,false)}}if(t>=this.p.lazyDataLimit-1&&(this.bodyContainer[0].scrollHeight>this.bodyContainer.height()+10)&&t<y.length-1){this.addLoadingRow();this.divOut.attr("title",this.p.lazyInfo);break}}}}else{this.renderTable(y,null,true)}}else{this.pageNo=A;this.pageCacheTotal=z;if(this.p.isLazyLoad){this.bodyContainer.scrollTop(0);this.lazyRowNo=0}var k=this.getPageCache(A);if(k){var v=k[2];this.chks=k[3];this.tbody.hide();this.tbody=v.show();if(this.p.lockColumn){var g=k[4];this.tbody2.hide();this.tbody2=g.show()}if(this.p.lockColumnR){var f=k[5];this.tbody3.hide();this.tbody3=f.show()}if(this.p.isLazyLoad){this.lazyRowNo=k[6];this.addLoadingRow();if(this.lazyRowNo<=this.data.length-1){this.divOut.attr("title",this.p.lazyInfo)}this.autoLoadlazyRow();this.setMainHeight()}}else{this.chks=[];this.rows=[];if(this.tbody){if(this.pageCache.length<=0){this.tbody.remove();if(this.p.lockColumn){this.tbody2.remove()}if(this.p.lockColumnR){this.tbody3.remove()}}else{this.tbody.hide();if(this.p.lockColumn){this.tbody2.hide()}if(this.p.lockColumnR){this.tbody3.hide()}}}this.tbody=b("<tbody></tbody>");this.table.append(this.tbody);if(this.p.lockColumn){this.tbody2=b("<tbody></tbody>");this.table2.append(this.tbody2)}if(this.p.lockColumnR){this.tbody3=b("<tbody></tbody>");this.table3.append(this.tbody3)}var n=this.addPageCache(A,u,e);var p={thds:this.thds};for(var t=0,r=y.length;t<r;t++){var o=this.addRow(y[t],t,null,true,null,null,A,null,p);if(this.p.isLazyLoad){this.setMainHeight();this.lazyRowNo=t+1;n[6]=this.lazyRowNo;for(var s=0,h=this.p.columns,q=h.length;s<q;s++){if(h[s].isHide){this.hideColumnR(o,s,false)}}if(t>=this.p.lazyDataLimit-1&&(this.bodyContainer[0].scrollHeight>this.bodyContainer.height()+10)&&t<y.length-1){this.addLoadingRow();this.divOut.attr("title",this.p.lazyInfo);break}}}this.joinCacheData()}}if(this.p.hasGridFoot&&u){this.loadDataF(u)}this.setTableWidth();this.p.canSort=true;this.mergeCellV();if(!this.p.isLazyLoad){this.setMainHeight();for(var t=0,h=this.p.columns,r=h.length;t<r;t++){if(h[t].isHide){this.hideColumn(t,false,true)}}}this.fire("dataLoaded",{data:y})}else{this.clearData()}this.hideSortImg();this.sbj.setScrollLeft(0);return this},loadDataG:function(A,C,B,w,e){var z=this;this.data=A;if(this.data&&this.data.lengthD==null){this.data.lengthD=this.data.length}this.judgeLazyDataLimit();if(this.p.isLazyLoad){this.divOut.attr("title","")}if(this.p.hasChkG&&this.p.hasChkAll&&this.chkAll){if(this.p.chkStyle){this.sbxjAll.setChecked(false,null,true)}else{this.chkAll[0].checked=false}}if(A&&A.length>0){if(!this.p.isPageCache){this.chks=[];this.rows=[];if(this.p.isChkAll){this.setDefaultChkAll()}if(this.p.isLazyLoad){this.lazyRowNo=0}this.tbody.empty();var p={thds:this.thds};for(var v=0,s=A.length;v<s;v++){var f=[];this.addRowGS(A[v],v,null,null,null,null,f,p);if(this.p.isLazyLoad){this.setMainHeight();this.lazyRowNo=v+1;if(f.length>0){for(var u=0,g=this.p.columns,r=g.length;u<r;u++){if(g[u].isHide){for(var t=0,q=f.length;t<q;t++){this.hideColumnR(f[t],u,false)}}}}if(v>=this.p.lazyDataLimit-1&&(this.bodyContainer[0].scrollHeight>this.bodyContainer.height()+10)&&v<A.length-1){this.addLoadingRow();this.divOut.attr("title",this.p.lazyInfo);break}}}}else{this.pageNo=C;this.pageCacheTotal=B;if(this.p.isLazyLoad){this.bodyContainer.scrollTop(0);this.lazyRowNo=0}var h=this.getPageCache(C);if(h){var y=h[2];this.chks=h[3];this.tbody.hide();this.tbody=y.show();this.rows=h[7];if(this.p.isLazyLoad){this.lazyRowNo=h[6];this.addLoadingRow();if(this.lazyRowNo<=this.data.length-1){this.divOut.attr("title",this.p.lazyInfo)}this.autoLoadlazyRow();this.setMainHeight()}}else{this.chks=[];this.rows=[];if(this.p.isChkAll){this.setDefaultChkAll()}if(this.tbody){if(this.pageCache.length<=0){this.tbody.remove()}else{this.tbody.hide()}}this.tbody=b("<tbody></tbody>");this.table.append(this.tbody);var o=this.addPageCache(C,w,e);var p={thds:this.thds};for(var v=0,s=A.length;v<s;v++){var f=[];this.addRowGS(A[v],v,C,null,null,null,f,p);if(this.p.isLazyLoad){this.setMainHeight();this.lazyRowNo=v+1;o[6]=this.lazyRowNo;if(f.length>0){for(var u=0,g=this.p.columns,r=g.length;u<r;u++){if(g[u].isHide){for(var t=0,q=f.length;t<q;t++){this.hideColumnR(f[t],u,false)}}}}if(v>=this.p.lazyDataLimit-1&&(this.bodyContainer[0].scrollHeight>this.bodyContainer.height()+10)&&v<A.length-1){this.addLoadingRow();this.divOut.attr("title",this.p.lazyInfo);break}}}this.joinCacheData()}}if(this.p.hasGridFoot&&w){this.loadDataF(w)}this.setTableWidth();this.p.canSort=true;if(!this.p.isLazyLoad){this.setMainHeight();for(var v=0,g=this.p.columns,s=g.length;v<s;v++){if(g[v].isHide){this.hideColumn(v,false,true)}}}this.fire("dataLoaded",{data:A})}else{this.clearData()}this.hideSortImg();this.sbj.setScrollLeft(0);return this},loadDataF:function(j){this.dataF=j;var e=this.trF.find("div.dgj_tdDiv");if(this.p.hasChk){e=e.not("div:first")}for(var g=0,k=this.p.columns,f=k.length;g<f;g++){var h=e.eq(g);if(!k[g].renderFnFoot){h.html(j[k[g].dataIndex])}else{h.html(k[g].renderFnFoot.call(this,j[k[g].dataIndex],j,g,this.trF,h))}}},updateHeadText:function(j,e){var h=this.headContainer.find("span.dgj_thSp");for(var g=0,f=j.length;g<f;g++){h.eq(j[g]).html(e[g])}},loadDataT:function(j){var h=this;this.data=j;if(this.data&&this.data.lengthD==null){this.data.lengthD=this.data.length}if(j&&j.length>0){this.chks=[];this.rows=[];this.tbody.empty();if(this.p.lockColumn){this.tbody2.empty()}if(this.p.lockColumnR){this.tbody3.empty()}for(var g=0,e=j.length;g<e;g++){var m={thds:this.thds};var f=j[g][this.p.idField];if(f==null){j[g][this.p.idField]="dgjTg_"+new Date().getTime()+Math.random()}m.deep=0;m.path=g+".";m.expand=true;this.addRow(j[g],0,null,true,null,null,null,null,m)}this.setTableWidth();this.setMainHeight();if(!this.p.isTree){for(var g=0,k=this.p.columns,e=k.length;g<e;g++){if(k[g].isHide){this.hideColumn(g,false,true)}}}this.fire("dataLoaded",{data:j})}else{this.clearData()}this.hideSortImg();this.sbj.setScrollLeft(0);return this},loadDataTAsync:function(j,h,g,e){var f=this;this.fire("beforeTreeLoad",{node:h?h.node:null});this.fire("treeLoad",{node:h?h.node:null,isInit:j,p:h,fn:g});if(e){this.loadTreeNodes(e,j,h,g)}return this},loadTreeNodes:function(n,r,f,v){if(this.p.checkAsyncLoad){this.p.checkAsyncLoad.call(this,n)}if(n&&n.length>0){if(r){this.data=n;if(this.data&&this.data.lengthD==null){this.data.lengthD=this.data.length}this.chks=[];this.rows=[];this.tbody.empty();if(this.p.lockColumn){this.tbody2.empty()}if(this.p.lockColumnR){this.tbody3.empty()}}else{if(this.p.asyncLoadTree){if(n&&n.lengthD==null){n.lengthD=n.length}f.node[this.p.nodeIndex]=n}}var w=null,t=[],e=f&&this.p.collapseAnimate;for(var o=0,h=n.length;o<h;o++){var z={thds:this.thds};var s=n[o][this.p.idField];if(s==null){n[o][this.p.idField]="dgjTg_"+new Date().getTime()+Math.random()}z.expand=true;if(!f){z.deep=0;z.path=o+"."}else{z.parentId=f.pId;z.deep=f.deep+1;z.path=f.path+o+".";n[o].parentNode=f.node;if(!w){w=f.trs}}if(this.p.judgeLeaf){if(this.p.judgeLeaf.call(this,n[o])){n[o].isLeaf=true}}w=this.addRow(n[o],0,w,true,null,null,null,null,z);if(f&&this.p.collapseAnimate){w.hide();t.push(w[0])}if(!this.p.isTree&&!r&&this.p.lockColumn){this.syncRowHeightR(null,w[0],w[1],w[2])}if(!this.p.isTree&&!r){for(var k=0,u=this.p.columns,g=u.length;k<g;k++){if(u[k].isHide){this.hideColumnR(w,k,false)}}}}var q=this,y=function(){for(var m=0,j=n.length;m<j;m++){var p=n[m];if(p.isExpand){q.refreshChildNode(p,true)}}};if(e){this.collapseAnimWrap(true,f.trs[0],b(t),function(){y()})}else{y()}if(v){v.call(this,true)}d.lazyDo(function(){if(r){this.setTableWidth()}if(!e){this.setMainHeight()}},200,"ld_dgjTg1",this);if(!this.p.isTree&&r){for(var o=0,u=this.p.columns,h=u.length;o<h;o++){if(u[o].isHide){this.hideColumn(o,false,true)}}}this.fire("afterTreeLoad",{data:n})}else{if(r){this.clearData()}if(v){v.call(this,false)}}if(r){this.sbj.setScrollLeft(0)}},cascade:function(k,h,j){var m,f=k[this.p.nodeIndex];if(!j){m=h.call(this,k)}if(m!==false&&f){for(var g=0,e=f.length;g<e;g++){this.cascade(f[g],h)}}},bubble:function(g,e,f){var h;if(!f){h=e.call(this,g)}if(h!==false&&g.parentNode){this.bubble(g.parentNode,e)}},seekNode:function(j){var g=this,h,k=this.data;if(k.length<=0){return}for(var f=0,e=k.length;f<e;f++){this.cascade(k[f],function(m){if(m[g.p.nodePathField]==j){h=m;return false}})}return h},getCheckedNodes:function(h){var j=this,f=[];for(var g=0,e=this.data.length;g<e;g++){var k=this.data[g];this.cascade(k,function(n){if(n.isCheck){var m=1;if(h&&!n.isLeaf){if(j.p.judgeLeaf&&j.p.judgeLeaf.call(j,k)){k.isLeaf=true}else{m=0}}if(m){f.push(n)}}})}return f},getCheckedNodeIds:function(m,h){var f=this.getCheckedNodes(h),k=!m?this.p.idField:m,j=STJ.init();for(var g=0,e=f.length;g<e;g++){j.add(f[g][k])}return j.join(",")},deleteChildNode:function(e){if(typeof e=="string"){e=this.seekNode(e)}if(!e){return}this.bodyContainer.find("tr[nodeno^="+e.nodeNo+"][nodeno!="+e.nodeNo+"]").remove();e[this.p.nodeIndex]=null},refreshChildNode:function(f,g){if(typeof f=="string"){f=this.seekNode(f)}if(!f){return}if(!g){this.deleteChildNode(f)}var e=f.nodeIcon;f.nodeImg.swapClassJ("dgj_folderOpen dgj_loadingT","dgj_folderClose");f.isLeaf=false;f.complete=false;e.setChecked(true)},judgeLazyDataLimit:function(){if(this.p.lazyDataLimit>-1){if(this.p.isPageCache){if(this.pageCache.length>0){return}}if(this.data.length<this.p.lazyDataLimit){this.p.isLazyLoad=false}else{this.p.isLazyLoad=true}}},addLoadingRow:function(){if(this.lazyRowNo>=this.data.length){return}var j=0;if(!this.p.lockColumn){j=this.p.columns.length}else{j=this.p.lockColumn-1}if(this.p.hasChk){j+=1}var e=35,f=5;if(this.p.hasGroup){e=50;f=4}if(!this.loadingRow){this.loadingRow=b('<tr loading="true"></tr>').append(b('<td colspan="'+j+'" style="text-align:center;height:'+e+'px;"></td>').append(LMJ.getLoadImg(f)))}else{this.loadingRow.show().find("td").attr("colspan",j)}this.tbody.append(this.loadingRow);if(this.table.find("td:visible").length<=1){this.loadingRow.hide()}if(this.p.lockColumn){var h=this.p.columns.length-this.p.lockColumn+1;if(!this.loadingRow2){this.loadingRow2=b('<tr loading="true"></tr>').append(b('<td colspan="'+h+'" style="text-align:center;height:'+e+'px;"></td>').append(LMJ.getLoadImg(f)))}else{this.loadingRow2.show().find("td").attr("colspan",h)}this.tbody2.append(this.loadingRow2);if(this.table2.find("td:visible").length<=1){this.loadingRow2.hide()}}if(this.p.lockColumnR){var g=this.p.columns.length-this.p.lockColumnR+1;if(!this.loadingRow3){this.loadingRow3=b('<tr loading="true"></tr>').append(b('<td colspan="'+(this.p.columns.length-this.p.lockColumnR+1)+'" style="text-align:center;height:'+e+'px;"></td>').append(LMJ.getLoadImg(f)))}else{this.loadingRow3.show().find("td").attr("colspan",g)}this.tbody3.append(this.loadingRow3);if(this.table3.find("td:visible").length<=1){this.loadingRow3.hide()}}},lazyAddRow:function(k){if(this.lazyRowNo>=this.data.length){this.divOut.attr("title","");return false}if(this.bodyContainer[0].scrollTop+this.bodyContainer[0].clientHeight>this.bodyContainer[0].scrollHeight-(!this.p.hasGroup?this.p.lazyScrollBottom+40:this.p.lazyScrollBottom+55)||k){if(this.loadingRow){var n=this;this.loadingRow.hide();if(this.p.lockColumn){this.loadingRow2.hide()}if(this.p.lockColumnR){this.loadingRow3.hide()}if(!this.p.hasGroup){var q=this.addRow(this.data[this.lazyRowNo],this.getRowNoL(),null,true,null,null,this.pageNo);for(var h=0,p=this.p.columns,f=p.length;h<f;h++){if(p[h].isHide){this.hideColumnR(q,h,false)}}}else{var o=[];this.addRowGS(this.data[this.lazyRowNo],this.getRowNoL(),this.pageNo,null,null,null,o);if(o.length>0){for(var h=0,p=this.p.columns,f=p.length;h<f;h++){if(p[h].isHide){for(var g=0,e=o.length;g<e;g++){this.hideColumnR(o[g],h,false)}}}}}this.syncRowHeightR(this.lazyRowNo);this.lazyRowNo++;if(this.p.isPageCache){this.getPageCache(this.pageNo)[6]=this.lazyRowNo}if(this.lazyRowNo<=this.data.length-1){this.addLoadingRow()}}return true}else{return false}},autoLoadlazyRow:function(h,e){if(this.p.isLazyLoad){var g=this;var f=function(){for(var k=0,j=g.data.length;k<j;k++){if(g.lazyRowNo>j-1){g.divOut.attr("title","");break}if(!g.lazyAddRow(h)){break}g.setMainHeight()}g.joinCacheData()};if(e){d.lazyDo(function(){f()},e,"ld_dgjALllr",this)}else{f()}}},addPageCache:function(g,f,e){if(this.p.isPageCache){var h=[g,this.data,this.tbody,this.chks,this.tbody2,this.tbody3,this.p.isLazyLoad?this.lazyRowNo:null,this.rows,f,e];this.pageCache.push(h);return h}},getPageCache:function(f){var g=false,h=this.pageCache;if(this.p.isPageCache){for(var j=0,e=h.length;j<e;j++){if(h[j][0]==f){g=h[j];break}}}return g},clearPageCache:function(){if(this.p.isPageCache){this.pageCache=[];this.datas=[];var g=this.table.find("tbody:hidden");if(g.length>0&&g.children("tr").length>0){g.remove()}if(this.p.lockColumn){var f=this.table2.find("tbody:hidden");if(f.length>0&&f.children("tr").length>0){f.remove()}}if(this.p.lockColumnR){var e=this.table3.find("tbody:hidden");if(e.length>0&&e.children("tr").length>0){e.remove()}}}},joinCacheData:function(){if(this.p.isPageCache){this.datas=[];var f=this.pageCache;for(var g=0,e=f.length;g<e;g++){b.merge(this.datas,f[g][1])}}},hideColumn:function(q,f,e){if(!f&&!e&&this.headContainer.find("div.dgj_tdDiv:hidden").length>=this.p.columns.length-1){return false}var m=this;var p=q;if(this.p.hasChk){p+=1}var n="hide",r=this.p.filterTag?",tr["+this.p.filterTag+"]":"",o=r?":not(td["+this.p.filterTag+"])":"";if(f){n="show"}var j=this.getColType(q);switch(j){case 0:this.tableHead.find("th").eq(p)[n]();this.table.find("tr:not(tr[loading],tr[groupRow],tr[emptyRow]"+r+")").each(function(s){var k=b(this);if(!k.hasClass("dgj_trG1")){k.find("td"+o).eq(p)[n]()}});if(this.p.hasGridFoot){this.trF.find("td").eq(p)[n]()}if(this.p.canColumeDD){this.colDDs[q][n]();var h=this.sbj.getScrollLeft();if(h>0){this.sbj.setScrollLeft(h+1);this.sbj.setScrollLeft(h-1)}else{this.setDDPosition()}}this.setSbjWidth(true);this.setMainHeight();if(m.p.collapseSonRow){m.tbody.find("div.dgj_tdDiv").eq(m.p.hasChkG?1:0).width(m.tableHead.width()-m.p.chkWidth-m.shiftG)}break;case 1:this.tableHead.find("th").eq(p)[n]();this.table.find("tr:not(tr[loading],tr[emptyRow]"+r+")").each(function(k){b(this).find("td"+o).eq(p)[n]()});if(this.p.isLazyLoad){if(this.loadingRow){if(this.table.find("td:visible").length<=1){this.loadingRow.hide()}else{if(this.lazyRowNo<=this.data.length-1){this.loadingRow.show()}}}if(!this.p.asyncLoadTree){d.lazyDo(function(){this.syncRowHeightB()},500,"ld_dgjSyncRH",this)}}if(this.p.canColumeDD){this.colDDs[q][n]()}this.setLockWidth();this.setDDPosition();this.setLockWidth();this.sbj.left(this.table.width());break;case 2:var g=q-this.p.lockColumn+1;this.tableHead2.find("th").eq(g)[n]();this.table2.find("tr:not(tr[loading],tr[emptyRow]"+r+")").each(function(k){b(this).find("td"+o).eq(g)[n]()});if(this.p.isLazyLoad){if(this.loadingRow){if(this.table2.find("td:visible").length<=1){this.loadingRow2.hide()}else{if(this.lazyRowNo<=this.data.length-1){this.loadingRow2.show()}}}if(!this.p.asyncLoadTree){d.lazyDo(function(){this.syncRowHeightB()},500,"ld_dgjSyncRH",this)}}if(this.p.canColumeDD){this.colDDs[q][0][n]();this.colDDs[q][1][n]()}this.setDDPosition(true);this.setLockWidth();var h=this.sbj.getScrollLeft();if(h>0){this.sbj.setScrollLeft(h+1);this.sbj.setScrollLeft(h-1)}else{this.setDDPosition(true)}break;case 3:var g=q-this.p.lockColumnR+1;this.tableHead3.find("th").eq(g)[n]();this.table3.find("tr:not(tr[loading],tr[emptyRow]"+r+")").each(function(k){b(this).find("td"+o).eq(g)[n]()});if(this.p.isLazyLoad){if(this.loadingRow){if(this.table3.find("td:visible").length<=1){this.loadingRow3.hide()}else{if(this.lazyRowNo<=this.data.length-1){this.loadingRow3.show()}}}if(!this.p.asyncLoadTree){d.lazyDo(function(){this.syncRowHeightB()},500,"ld_dgjSyncRH",this)}}if(this.p.canColumeDD){this.colDDs[q][n]()}this.setLockWidth();this.sbj.left(this.table.width());this.setDDPosition();this.setLockWidth();break}return true},hideColumnR:function(j,h,g){var f;if(!b.isArray(j)){f=j}else{f=j[0]}if(f.attr("emptyRow")){return}var o=h;if(this.p.hasChk){o+=1}var n="hide";if(g){n="show"}var m=this.getColType(h);switch(m){case 0:if(!f.hasClass("dgj_trG1")){f.find("td").eq(o)[n]()}break;case 1:f.find("td").eq(o)[n]();break;case 2:var e=h-this.p.lockColumn+1;j[1].find("td").eq(e)[n]();break;case 3:var e=h-this.p.lockColumnR+1;j[2].find("td").eq(e)[n]();break}},hideColumnMenu:function(m,h,f){if(!this.hideColumn(m,h)){if(f){f.setChecked(true,null,true)}}else{this.p.columns[m].isHide=!h;if(this.p.storeName){var j=[];for(var g=0,k=this.p.columns,e=k.length;g<e;g++){if(k[g].isHide){j.push(g)}}d.LocalStorage.setItem({key:this.p.storeName+"_hide",value:JSON.stringify(j)})}}},hideColumnD:function(){if(this.p.defaultHideColumn.length>0){var h=this.p.columns;for(var f=0,g=this.p.defaultHideColumn,e=g.length;f<e;f++){var j=g[f];h[j].isHide=true}}},renderTable:function(j,e,f,n){var k=this;var q=[],p,o;if(this.p.lockColumn){p=[]}if(this.p.lockColumnR){o=[]}this.renderRows(q,p,o,j,e,f,null);this.mainContainer[0].innerHTML=q.join("");this.table=b("#dgj_table_"+this.objId);this.tbody=b("#dgj_tbody_"+this.objId);if(p){this.lcContainer[0].innerHTML=p.join("");this.table2=b("#dgj_table2_"+this.objId);this.tbody2=b("#dgj_tbody2_"+this.objId)}if(o){this.rightContainer[0].innerHTML=o.join("");this.table3=b("#dgj_table3_"+this.objId);this.tbody3=b("#dgj_tbody3_"+this.objId)}var m=this.table.find("tr.dgj_tr1"),h,g;if(p){h=this.table2.find("tr.dgj_tr2")}if(o){g=this.table3.find("tr.dgj_tr3")}m.each(function(r){var s=m.eq(r),u,t;if(h){u=h.eq(r)}if(g){t=g.eq(r)}k.setRowColor(r,s,u,t,j[r].checked)})},renderRows:function(z,f,e,B,C,w,p){var A=this;var g=this.headContainer.find("div.dgj_tdDiv");if(this.p.hasChk){g=g.not("div:first")}z[z.length]='<table id="dgj_table_'+this.objId+'" class="dgj_table1"><tbody id="dgj_tbody_'+this.objId+'">';if(f){f[f.length]='<table id="dgj_table2_'+this.objId+'" class="dgj_table2" style="margin-left:-1px;" ><tbody id="dgj_tbody2_'+this.objId+'">'}if(e){e[e.length]='<table id="dgj_table3_'+this.objId+'" class="dgj_table3"><tbody id="dgj_tbody3_'+this.objId+'">'}for(var u=0,s=B.length;u<s;u++){var h=B[u],y=u;for(var q in h){if(h[q]==null){h[q]=""}}if(!h.checked){h.checked=false}z[z.length]='<tr class="dgj_tr1 dgj_trB_'+(!this.p.hasGroup?y:p)+(!C?"":("_"+C))+'">';if(f){f[f.length]='<tr class="dgj_tr2 dgj_trB_'+y+(!C?"":("_"+C))+'"></tr>'}if(e){e[e.length]='<tr class="dgj_tr3 dgj_trB_'+y+(!C?"":("_"+C))+'"></tr>'}if(this.p.hasChk&&w){z[z.length]='<td chkCell="true" style="text-align:center;height:'+this.p.defaultH+'px;">';z[z.length]='<div chkCellDiv="true" class="dgj_tdDiv" style="width:'+this.p.chkWidth+'px;">';z[z.length]='<input chkCell="true" type="checkbox" '+(h.checked?"checked":"")+" />";z[z.length]="</div></td>"}for(var t=0,k=this.p.columns,r=k.length;t<r;t++){var v;var n=this.getColType(t);switch(n){case 0:case 1:v=z;break;case 2:v=f;break;case 3:v=e;break}(function(m,j){A.fire("preColumnRender",{rowData:h});v[v.length]='<td colId="'+t+'" style="height:'+A.p.defaultH+"px;text-align:"+(m.align?m.align:A.p.defaultAlign)+';" >';v[v.length]='<div class="dgj_tdDiv" style="width:'+(A.p.noGridBorder?j+1:j)+'px;">';v[v.length]=!m.renderFn?h[m.dataIndex]:m.renderFn.call(A,h[m.dataIndex],h,y);v[v.length]="</div></td>"})(k[t],parseInt(g.eq(t)[0].style.width,10))}z[z.length]="</tr>";if(f){f[f.length]="</tr>"}if(e){e[e.length]="</tr>"}}z[z.length]="</tbody></table>";if(f){f[f.length]="</tbody></table>"}if(e){e[e.length]="</tbody></table>"}return this},addRow:function(ac,ap,R,O,D,e,y,aj,H){var f=this,q,A=this.p.isTreeGrid,r=this.p.autoNo;if(ap==null){q=1;O=1;if(this.isDataEmpty()){this.tbody.empty();if(this.p.lockColumn){this.tbody2.empty()}if(this.p.lockColumnR){this.tbody3.empty()}this.addPageCache(this.pageNo)}if(!this.p.isLazyLoad){ap=this.data.lengthD}else{ap=this.getRowNoL()}this.data.push(ac);this.data.lengthD++;if(this.p.isLazyLoad){this.lazyRowNo++;if(this.p.isPageCache){this.getPageCache(this.pageNo)[6]=this.lazyRowNo}}this.joinCacheData()}for(var ad in ac){if(ac[ad]==null){ac[ad]=""}}if(!H){H={}}if(r){ac[r]=ap+1+((y!=null&&this.pageSize)?(y-1)*this.pageSize:0)}var T=null,G,F,w,p=H.parentId?H.parentId:"root",M=f.p.idField;if(this.p.hasGroup){w=D}else{if(A){w=(H.parentId?H.parentId+"_":"")+ac[this.p.idField]+"_";ac.nodeNo=w}else{w=ap}}w+=!y?"":("_"+y);T=b('<tr class="dgj_tr1 dgj_trB_'+w+'"></tr>');if(A){T.attr({nodeNo:w,parentNo:p,deep:H.deep,path:H.path});if(ac.isCheck==null){ac.isCheck=0}ac.nodePath=H.path}if(this.p.hasGroup){T.attr("rowNo",D+"_"+ap+(!y?"":("_"+y)))}if(this.p.collapseSonRow&&(e&&!e.checked)){T.hide()}if(this.p.lockColumn){G=b('<tr class="dgj_tr2 dgj_trB_'+w+'"></tr>');if(A){G.attr({nodeNo:w,parentNo:p,deep:H.deep,path:H.path})}}if(this.p.lockColumnR){F=b('<tr class="dgj_tr3 dgj_trB_'+w+'"></tr>');if(A){F.attr({nodeNo:w,parentNo:p,deep:H.deep,path:H.path})}}if(!ac.checked){ac.checked=false}var P=document.createDocumentFragment(),n,g;if(this.p.lockColumn){n=document.createDocumentFragment()}if(this.p.lockColumnR){g=document.createDocumentFragment()}var L,an,I=!y?"":("_"+y);if(D!=null){an=D+"_"+ap+I}else{if(!A){an=ap+I}else{an=H.path+I}}if(this.p.hasChk){var N=b('<td chkCell="true" style="text-align:center;height:'+f.p.defaultH+"px;"+(!this.p.hideChk?"":"display:none;")+'"><div chkCellDiv="true" class="dgj_tdDiv dgj_chkDiv" style="width:'+this.p.chkWidth+'px"></div></td>');var al,V=N[0];if(V.firstElementChild){al=b(V.firstElementChild)}else{al=b(V.firstChild)}if(O){(function(k,j,h){L=b('<input id="chkRow_'+j+"_"+f.objId+'" '+(k.checked?"checked":"")+' type="checkbox" hidefocus />');if(f.p.chkStyle){L.sbxj=L.SBXJ({initClass:"dgj_chkC",type:f.p.chkCollapse?"collapse":null,canQuery:false,isInitHide:false,evts:{beforeClick:function(o,m){return m.param&&(m.param.isClickRow||m.param.isAllCheck)?!m.checked:m.checked}}});al.append(L.sbxj.divOut)}else{al.append(L)}L.click(function(v,o){v.stopPropagation();if(this.paramJ!=null){o=this.paramJ;this.paramJ=undefined;try{delete this.paramJ}catch(m){}}f.check(!A?ap:H.path,k,o,L,y)});if(A){ac[f.p.nodeChkField]=L}else{h.push(L)}})(ac,an,f.chks)}P.appendChild(V)}this.setRowColor(ap,T,G,F,ac.checked);if(!R){this.tbody.append(T)}else{if(!b.isArray(R)){R.after(T)}else{R[0].after(T)}}if(this.p.lockColumn){if(!R){this.tbody2.append(G)}else{R[1].after(G)}}if(this.p.lockColumnR){if(!R){this.tbody3.append(F)}else{R[2].after(F)}}var t;if(!this.p.hasGroup&&this.p.lockColumn){if(this.p.lockColumn){if(!this.p.lockColumnR){t=T.add(G)}else{t=T.add(G).add(F)}}}else{t=T}this.setRowHL(t);if(this.p.hasRowContextMenu){t.bind("contextmenu",function(k){if(!aj&&(!f.p.hasChk||!f.p.canSelectRowR)){if(f.pasteRow){f.pasteRow.removeAttr("pasteRow")}f.pasteRow=T;T.attr("pasteRow",true);if(A){f.currentNode=ac}}else{if(aj&&(!f.p.hasChkG||!f.p.canSelectRowR)){if(f.pasteRowG){f.pasteRowG.removeAttr("pasteRowG")}f.pasteRowG=aj;aj.attr("pasteRowG",true)}else{if(L&&!L[0].checked&&f.p.hasChk&&f.p.canSelectRowR){var j=k.srcElement?k.srcElement:k.target,m=b(j);if(!m.hasClass("dgj_chkC")){var h={isClickRow:true};L[0].paramJ=h;L.trigger("click",h)}}}}})}if(this.p.hasChk&&this.p.canSelectRow&&L){t.onGestureJ(c.Evt.click,function(v,m){var h=m.evt,k=h.srcElement?h.srcElement:h.target,at=b(k);if(!at.hasClass("dgj_chkC")){var j={isClickRow:true};L[0].paramJ=j;L.trigger("click",j)}},{preventClick:false})}var Y;if(H&&H.thds){Y=H.thds}else{Y=this.headContainer.find("div.dgj_tdDiv");if(this.p.hasChk){Y=Y.not("div:first")}}var ar=[],B=[],u=[],S=[],ab=this.p.cellPadding,Q=this.p.cellInnerPadding;for(var ai=0,E=this.p.columns,ag=E.length;ai<ag;ai++){var am,s,aq=0,aa=this.getColType(ai),ao=E[ai];switch(aa){case 0:case 1:if(ai==0&&f.p.lockColumn){aq=1}else{aq=0}am=T;s=P;break;case 2:if(ai-f.p.lockColumn+1==0){aq=1}else{aq=0}am=G;s=n;break;case 3:if(ai-f.p.lockColumnR+1==0){aq=1}else{aq=0}am=F;s=g;break}u[u.length]=am;if(am){(function(aD,aG){f.fire("preColumnRender",{rowData:ac,colNo:ai});var aw=c.RX.percent(aD.width)?aD.width:"",o=b('<td colId="'+ai+'" style="'+(f.p.nodeWrap?"white-space:normal;":"")+(ab!=null?"padding:"+(c.RX.numZ2(ab)?ab+"px":ab)+";":"")+"height:"+f.p.defaultH+"px;"+(aw!==""?("width:"+aw+";"):"")+"text-align:"+(function(){var aH;if(aD.isTreeField){aH="left"}else{if(aD.align){aH=aD.align}else{aH=f.p.defaultAlign}}return aH})()+';"><div '+(f.p.isTree?"":'style="width:'+(!f.p.isHideHead?((f.p.noGridBorder&&!aq)?aG+1:aG)+"px":(aw===""?(aD.width?aD.width+"px":"auto"):"100%"))+";")+(Q!=null?"padding:"+(c.RX.numZ2(Q)?Q+"px":Q)+";":"")+'" class="dgj_tdDiv"></div></td>');var k,aB=o[0];if(aB.firstElementChild){k=b(aB.firstElementChild)}else{k=b(aB.firstChild)}s.appendChild(aB);S[S.length]=[o,k];if(!aD.isAsyncLoad||ac.stopAsyncLoad){var aA="",at,av,v,aF;if(aD.editable&&!aD.isTreeField){aB.style.padding="0px";k[0].style.padding="0px 5px 0px 1px";k.attr("editable",true);switch(aD.editType){case"sel":aF={};v=b('<select class="dgj_editSel" '+(aD.hideEditTxt?'style="display:none;"':"")+" >"+(function(){var aK="";for(var aJ=0,aH=aD.editCbxData.length;aJ<aH;aJ++){var aI=aD.editCbxData[aJ];aK+='<option value="'+aI.value+'">'+aI.text+"</option>";aF[aI.value]=aI.text}return aK})()+"</select>");break;case"textarea":v=b('<textarea class="dgj_editTextarea" '+(aD.hideEditTxt?'style="display:none;"':"")+" ></textarea>");break;case"txt":default:v=b('<input type="text" class="dgj_editTxt" '+(aD.hideEditTxt?'style="display:none;"':"")+" />");break}if(aD.editHeight!=null){v.css("height",aD.editHeight)}k.append(v);if(!ac.editCell){ac.editCell=[]}av=[v,null,aD.hideEditTxt?false:true,aD.dataIndex,aD.editFilter,aF];ac.editCell.push(av)}if(!aD.renderFn){aA=ac[aD.dataIndex];if(aD.editable){v.val(aA);aA=b("<span editable='true' "+(!aD.hideEditTxt?"style='display:none;'":"")+">"+aA+"</span>");av[1]=aA}}else{at=[k,aD.renderFn,ac[aD.dataIndex],ai,av,aD.hideEditTxt,o,aD];B.push(at)}if(aD.isTreeField){var au=b("<div></div>").css({marginLeft:f.p.nodeMarginL+H.deep*f.p.nodeDeepRetract});var m=b("<span class='dgj_nodeWrap'></span>");m.click(function(aH){f.fire("cilckNode",{node:ac})});var aE;if(f.p.hasChkT){var ay=function(aI,aH){f.cascade(aI,function(aJ){aJ.isCheck=aH;if(aJ._chkT){aJ._chkT.setChecked(aH,null,true)}if(aJ.isLeaf){return false}})};k.addClass("dgj_chkDiv");aE=SBXJ.init({inputId:"dgj_chkT_"+an+"_"+f.objId,initChecked:ac.isCheck,initClass:"dgj_chkC",canQuery:false,style:"margin-right:2px;",evts:{onChecked:function(aK,aJ){var aI=aJ.checked?1:0,aH=f.p.nodeIndex;ay(ac,aI);f.bubble(ac,function(aS){var aN=aS[aH],aP=aS.isCheck,aR=true,aM;for(var aQ=0,aL=aN.length;aQ<aL;aQ++){var aO=aN[aQ];if((aI===1&&aO.isCheck!==1)||(aI===0&&aO.isCheck!==0)){aR=false;break}}if(aR){aM=aI}else{aM=2}aS.isCheck=aM;aS._chkT.setChecked(aM,null,true);if(aM===aP){return false}},true)}}});ac._chkT=aE}var ax=ac.isExpand?true:false;T.attr({visible:H.expand,expand:ax});if(f.p.lockColumn){G.attr({visible:H.expand,expand:ax})}if(f.p.lockColumnR){F.attr({visible:H.expand,expand:ax})}var j=b(f.blankImg),h,aC=SBXJ.init({inputId:"nodeIcon_"+f.objId+"_"+w,initChecked:ax,initClass:"dgj_chkC",cNameCheckedDisabled:f.p.isShowNodeImg?null:"dgj_loadingT",type:"collapse",canQuery:false,style:"margin-right:2px;",evts:{onChecked:function(aM,aI){var aN=this,aP=aI.isClickRow?!aI.checked:aI.checked;ac.isExpand=aP;T.attr("expand",aP);if(f.p.lockColumn){G.attr("expand",aP)}if(f.p.lockColumnR){F.attr("expand",aP)}if((f.p.asyncLoadTree||f.p.treeLocalLazy)&&!ac.complete){this.setDisabled(true);h.swapClassJ("dgj_folderOpen dgj_folderClose","dgj_loadingT");f.loadDataTAsync(false,{node:ac,pId:w.substr(0,w.length-1),deep:H.deep,path:H.path,trs:[T,G,F]},function(aQ){ac.complete=true;if(aQ){aN.show(true);j.hide();h.swapClassJ("dgj_loadingT dgj_leaf","dgj_folderOpen");if(f.p.hasChkT){var aR=ac.isCheck?1:0;ay(ac,aR)}}else{aN.hide();if(!f.p.hideImgB){j.show()}h.swapClassJ("dgj_loadingT dgj_folderClose dgj_folderOpen","dgj_leaf");ac.isLeaf=true}aN.setDisabled(false)},!f.p.treeLocalLazy?null:ac[f.p.nodeIndex])}else{var aJ=f.gridContainer.find("tr[nodeNo^="+w+"]");var aK={};var aH={};var aO=function(aR){aR=aR.substr(0,aR.length-1);if(aR.indexOf("_")!=-1){var aQ=aR.substr(0,aR.lastIndexOf("_"))+"_";if(aK[aQ]){return false}else{return aO(aQ)}}else{return true}};var aL=[];aJ.each(function(){var aS=b(this),aT=aS.attr("nodeNo");if(aT!=w){var aR=aT.split("_").length==(w.split("_").length+1);if(aP){var aQ=0;if(aH[aT]==null){if(aR){aQ=1}else{if(aS.attr("visible")+""=="true"&&aO(aT)){aQ=1}else{aK[aT]=1}}aH[aT]=aQ}else{aQ=aH[aT]}if(aQ){aS.attr("visible",true);if(!f.p.collapseAnimate){aS.show()}else{aL.push(aS[0])}}}else{if(aR){aS.attr("visible",false)}if(!f.p.collapseAnimate){aS.hide()}else{aL.push(aS[0])}}}if(aS.attr("expand")+""=="false"){aK[aT]=1}});aK=null;aH=null;if(!f.p.collapseAnimate){f.setMainHeight()}else{f.collapseAnimWrap(aP,aJ.eq(0),b(aL))}if(aP){h.swapClassJ("dgj_folderClose","dgj_folderOpen")}else{h.swapClassJ("dgj_folderOpen","dgj_folderClose")}}}}});if(ac[f.p.nodeIndex]||(f.p.asyncLoadTree&&!ac.isLeaf)){j.hide();h=b('<img class="dgj_tgImg '+(ax?"dgj_folderOpen":"dgj_folderClose")+'" style="margin-right:2px;'+(!f.p.isShowNodeImg?"display:none;":"")+'" src="'+c.imgPath+'Datagrid/treegrid/s.gif" />')}else{ac.isLeaf=true;if(f.p.hideImgB){j.hide()}aC.hide();h=b('<img class="dgj_tgImg dgj_leaf" style="margin-right:2px;'+(!f.p.isShowNodeImg?"display:none;":"")+'" src="'+c.imgPath+'Datagrid/treegrid/s.gif" />')}ac.nodeIcon=aC;ac.nodeImg=h;k.css("overflow","visible");au.append(aC.divOut);au.append(j).append(h);if(aE){au.append(aE.divOut)}k.append(au.append(m.append(aA)));if(aD.renderFn){at[0]=m}if(!f.p.asyncLoadTree&&!f.p.treeLocalLazy){var az=true;f.bubble(ac,function(aH){if(az){az=false;return}if(!aH.isExpand){T.hide();if(f.p.lockColumn){G.hide()}if(f.p.lockColumnR){F.hide()}return false}})}}else{k.append(aA)}}else{k.append(LMJ.getLoadImg(3,true));o.css("text-align","center");k.attr("alignTmp",aD.align)}if(aD.asyncLoadFn){ar.push([aD.asyncLoadFn,ac[aD.dataIndex],ai])}})(ao,(function(){var v=Y.eq(ai),m=v.attr("mergecell"),j=parseInt(v[0].style.width,10);if(!m){return j}else{var o;for(var k=1;k<m;k++){v=Y.eq(ai-k);o=E[ai-k];j-=parseInt(v[0].style.width,10)+(!o.editable?4:6)+(f.p.noGridBorder?1:0)}return j}})())}}T[0].appendChild(P);if(this.p.lockColumn){G[0].appendChild(n)}if(this.p.lockColumnR){F[0].appendChild(g)}for(var ai=0,E=this.p.columns,ag=E.length;ai<ag;ai++){var ao=E[ai];if(ao.mergeCell){this.mergeCell(ao.mergeCell,ai,u[ai])}if(ao.sortRows!=null&&b.inArray(ap,ao.sortRows)!=-1){this.setCellSort(ai,ao,S[ai][0],S[ai][1])}}for(var ah=0,ag=B.length;ah<ag;ah++){var X=B[ah],C=X[4],Z=null;if(!this.p.useObjParam){Z=X[1].call(f,X[2],ac,ap,D,e,y,T,G,F,X[3],L,C,X[6],X[0],X[7])}else{Z=X[1].call(f,{value:X[2],data:ac,rowNo:ap,noG:D,dataG:e,pageNo:y,tr:T,tr2:G,tr3:F,colNo:X[3],chk:L,editElem:C,td:X[6],tdDiv:X[0],col:X[7]})}if(C){var af=b("<span editable='true' "+(!X[5]?"style='display:none;'":"")+">"+Z+"</span>");C[1]=af;C[0].val(Z);X[0].append(af)}else{X[0].prepend(Z)}}for(var ah=0,ag=ar.length;ah<ag;ah++){var K=ar[ah];K[0].call(f,K[1],ac,ap,K[2],y,T,G,F,D,e)}if(D!=null){if(!aj){this.rows[D].rows.push(T)}else{for(var ak=0,ag=this.rows.length;ak<ag;ak++){if(this.rows[ak].trG==aj){this.rows[ak].rows.push(T)}}}}if(q){d.lazyDo(function(){this.setTableWidth();this.setMainHeight()},200,"ld_dgjAddRow",this)}if(A){var J=true;if(this.p.treeLocalLazy){if(ac.isExpand){ac.complete=true}else{ac.complete=false;J=false}}if(J){var W=ac[this.p.nodeIndex];if(W){for(var ae=0,ag=W.length;ae<ag;ae++){var z={thds:Y};var U=W[ae][this.p.idField];if(U==null){W[ae][this.p.idField]="dgjTg_"+new Date().getTime()+Math.random()}z.parentId=w.substr(0,w.length-1);z.deep=H.deep+1;z.path=H.path+ae+".";z.expand=ac.isExpand;W[ae].parentNode=ac;this.addRow(W[ae],0,null,true,null,null,null,null,z)}}}}if(!this.p.lockColumn){return T}else{if(!this.p.lockColumnR){return[T,G]}else{return[T,G,F]}}},removeRow:function(e,h,n,k,j,o,f){var m,p;if(!h){m=this.data[e];p=e}else{m=h;p=b.inArray(h,this.data)}this.fire("beforeRemoveRow",{rowData:m,rowNo:p});if(!h){if(!this.p.compatibleMode){c.arr.removeAt(this.data,p);if(this.p.hasChk){c.arr.removeAt(this.chks,p)}}else{this.data[p]=null;if(this.p.hasChk){this.chks[p]=null}}var g="tr:not(tr[loading]):eq("+p+")";this.tbody.find(g).remove();if(this.p.lockColumn){this.tbody2.find(g).remove()}if(this.p.lockColumnR){this.tbody3.find(g).remove()}}else{if(!this.p.compatibleMode){c.arr.removeAt(this.data,p);if(this.p.hasChk){c.arr.removeAt(this.chks,p)}}else{this.data[p]=null;if(this.p.hasChk){this.chks[b.inArray(o,this.chks)]=null}}n.remove();if(k){k.remove()}if(j){j.remove()}}if(!this.p.compatibleMode){if(this.p.isLazyLoad){this.lazyRowNo--}}if(this.isDataEmpty()){this.clearData()}else{this.setMainHeight()}this.fire("afterRemoveRow",{rowNo:p});if(this.p.isLazyLoad){this.autoLoadlazyRow()}},addRowG:function(h,e,r,f,m,s){var n=this;var q=e+(!f?"":("_"+f));var k=b('<tr groupRow="true" class="dgj_trG1 dgj_trGB_'+q+'" rowNum="'+q+'"></tr>');if(this.p.groupRowH){k.height(this.p.groupRowH)}if(!h.checked){h.checked=false}var p;if(this.p.hasChkG){var o=b('<td chkCellG="true" style="text-align:center;"></td>');var u=b('<div chkCellDivG="true" class="dgj_tdDiv dgj_chkDiv"></div>').css({width:this.p.chkWidth});p=b('<input id="chkRowG_'+q+"_"+n.objId+'" title="" type="checkbox" hidefocus />');p[0].checked=h.checked;if(this.p.chkStyle){p.sbxj=p.SBXJ({initClass:"dgj_chkC",type:n.p.chkCollapse?"collapse":null,canQuery:false,isInitHide:false,evts:{beforeClick:function(w,v){return v.param&&(v.param.isClickRow||v.param.isAllCheck)?!v.checked:v.checked}}});u.append(p.sbxj.divOut)}else{u.append(p)}p.click(function(y,w){y.stopPropagation();if(this.paramJ!=null){w=this.paramJ;this.paramJ=undefined;try{delete this.paramJ}catch(v){}}n.check(e,h,w,p,f)});o.append(u);k.append(o);if(!s){n.chks.push(p)}else{n.chks.unshift(p)}if(this.p.hasRowContextMenu){k.bind("contextmenu",function(y){if(!n.p.hasChkG||!n.p.canSelectRowR){if(n.pasteRowG){n.pasteRowG.removeAttr("pasteRowG")}n.pasteRowG=k;k.attr("pasteRowG",true)}else{if(!p[0].checked&&n.p.hasChkG&&n.p.canSelectRowR){var w=y.srcElement?y.srcElement:y.target;if(!b(w).hasClass("dgj_chkC")){var v={isClickRow:true};p[0].paramJ=v;p.trigger("click",v)}}}})}if(this.p.canSelectRow){k.css("cursor","pointer").bind("click",function(y){var w=y.srcElement?y.srcElement:y.target;if(!b(w).hasClass("dgj_chkC")){var v={isClickRow:true};p[0].paramJ=v;p.trigger("click",v)}})}}var j=b('<td colspan="'+this.p.columns.length+'"></td>');var t=b('<div class="dgj_tdDiv"></div>');k.append(j.append(t.append(this.p.renderGroupRow.call(this,h,e,f,k,p))));if(m){k.css("background-color",this.p.colorParams.newRow).attr("spRowColor",this.p.colorParams.newRow)}this.setRowColorG(e,k,h.checked);if(!r){if(!s){this.tbody.append(k)}else{this.tbody.prepend(k)}}else{r.after(k)}this.setRowHL(k);var g={trG:k,rows:[]};if(!s){this.rows.push(g)}else{this.rows.unshift(g)}return k},addRowGS:function(k,e,f,p,u,v,w,s){if(this.isDataEmpty()){this.tbody.empty()}if(e==null){if(!this.p.isLazyLoad){e=this.data.lengthD}else{e=this.getRowNoL()}if(!u){this.data.push(k)}else{this.data.unshift(k)}this.data.lengthD++;if(this.p.isLazyLoad){this.lazyRowNo++;if(this.p.isPageCache){this.getPageCache(this.pageNo)[6]=this.lazyRowNo}}this.joinCacheData()}var q=this;var o=this.addRowG(k,e,v,f,p,u);var r=o;var n=[];if(this.p.asyncLoadSonRow){this.p.renderSonRow.call(this,e,o)}else{var g=k[this.p.sonRowName];if(g&&g.length>0){for(var m=0,h=g.length;m<h;m++){o=this.addRow(g[m],m,o,false,e,k,f,r,s);n.push(o);if(w){w.push(o)}}}}d.lazyDo(function(){this.setTableWidth();this.setMainHeight()},200,"ld_dgjGS",this);this.fire("afterAddRowGS",{rowData:k,rowNo:e,pageNo:f});var t;if(n.length>0){t=n[n.length-1]}else{t=o}return t},removeRowG:function(e,k,q,r,f){var o,s;if(!k){o=this.data[e];s=e}else{o=k;s=b.inArray(k,this.data)}this.fire("beforeRemoveRowG",{rowData:o,rowNo:s});if(!k){if(!this.p.compatibleMode){c.arr.removeAt(this.data,s);if(this.p.hasChk){c.arr.removeAt(this.chks,s)}}else{this.data[s]=null;if(this.p.hasChk){this.chks[s]=null}}var t=this.rows[s];t.trG.remove();for(var n=0,j=t.rows.length;n<j;n++){t.rows[n].remove()}}else{if(!this.p.compatibleMode){c.arr.removeAt(this.data,s);if(this.p.hasChk){c.arr.removeAt(this.chks,s)}}else{this.data[s]=null;if(this.p.hasChk){this.chks[b.inArray(r,this.chks)]=null}}q.remove();for(var p=0,j=this.rows.length;p<j;p++){var t=this.rows[p];if(t.trG==q){for(var n=0,g=t.rows.length;n<g;n++){t.rows[n].remove()}break}}}if(!this.p.compatibleMode){c.arr.removeAt(this.rows,s);if(this.p.isLazyLoad){this.lazyRowNo--}}if(this.isDataEmpty()){this.clearData()}else{this.setRowWidthG()}this.fire("afterRemoveRowG",{rowNo:s});if(this.p.isLazyLoad){this.autoLoadlazyRow()}},setCellData:function(u,h,w,y,A,z,g,r,q,o){if(this.isDataEmpty()){return}var v=this;var t=h;if(this.p.hasChk){t+=1}if(!g){if(!this.p.isPageCache){this.data[u][w]=y}else{var j=this.getPageCache(A);if(j){j[1][u][w]=y}else{this.data[u][w]=y}}}else{g[w]=y;u=b.inArray(g,this.data)}var f,s=this.getColType(h);switch(s){case 0:case 1:if(!g){var e;if(!this.p.isPageCache){e=this.tbody}else{var j=this.getPageCache(A);if(j){e=j[2]}else{e=this.tbody}}f=e.find("tr:not(tr[loading])").eq(u).find("div.dgj_tdDiv").eq(t)}else{f=r.find("div.dgj_tdDiv").eq(t)}break;case 2:var p=h-this.p.lockColumn+1;if(!g){var n;if(!this.p.isPageCache){n=this.tbody2}else{var j=this.getPageCache(A);if(j){n=j[4]}else{n=this.tbody2}}f=n.find("tr:not(tr[loading])").eq(u).find("div.dgj_tdDiv").eq(p)}else{f=q.find("div.dgj_tdDiv").eq(p)}break;case 3:var p=h-this.p.lockColumnR+1;if(!g){var m;if(!this.p.isPageCache){m=this.tbody3}else{var j=this.getPageCache(A);if(j){m=j[5]}else{m=this.tbody3}}f=m.find("tr:not(tr[loading])").eq(u).find("div.dgj_tdDiv").eq(p)}else{f=o.find("div.dgj_tdDiv").eq(p)}break}if(f.attr("alignTmp")){f.css("text-align",f.attr("alignTmp"))}if(!z){f.html(y)}else{f.html(z)}if(this.p.lockColumn){this.syncRowHeightR(u,r,q,o)}d.lazyDo(function(){this.setMainHeight()},500,"ld_dgjCell",this)},mergeCell:function(g,e,f){this.mergeCellFn(g,e,f)},mergeCellH:function(g,e,f){this.mergeCellFn(g,e,f,"th")},mergeCellFn:function(r,n,u,g){if(!g){g="td"}if(n>0){var q=u.find(g+":not("+g+"[chkCell]):lt("+(n+1)+")");var p=n+1-r,m=n;var s,t=0;for(var o=0,f=q.length;o<f;o++){if(m==n){q.eq(m).attr("colspan",r).find("div.dgj_tdDiv").attr("mergeCell",r);s=q.eq(m).find("div.dgj_tdDiv");t+=s.width()}else{var e=q.eq(m).find("div.dgj_tdDiv");t+=e.width()+this.p.mcShift;e.attr("mergeCellH",r).attr("mergeCellN",n);q.eq(m).hide()}if(m<=p){break}m--}s.width(t)}},mergeCellV:function(){if(!this.p.isMergeCellV){return}var r,f=true,t,p;for(var z=0,o=this.p.columns,w=o.length;z<w;z++){var g=o[z],e,q;if(!g.mergeCellV){continue}else{q=this.getColType(z);switch(q){case 0:case 1:e=this.tbody;break;case 2:e=this.tbody2;break;case 3:e=this.tbody3;break}if(f){t=this.p.filterTag?"tr["+this.p.filterTag+"]":"";r=e.find("tr:not(tr[loading]"+(t?","+t:"")+")");p=function(k,j,F){k[j].attr("rowspan",F);for(var E=1,m=j;E<F;E++){k[j+E].hide()}};f=false}}var D=this,A=[];r.each(function(){var h=b(this).find("td"+(t?":not("+t+")":""));if(D.p.hasChk){h=h.not("td:first")}A.push(h.eq(z))});var s,u=1,B=0;for(var y=0,v=this.data.length;y<v;y++){var C=this.data[y];if(y!=0&&s===C[g.dataIndex]){u++;if(y==v-1){p(A,B,u)}}else{if(u!=1||(u==1&&y!=0)){p(A,B,u);B=y;u=1}}s=C[g.dataIndex]}}},switchEdit:function(j,A,e,n,z){var g=j.editCell,u=A;for(var w=0,s=g.length;w<s;w++){var f=g[w],q,h=f[0],y=f[1],r=f[2],k=f[4],p=f[5];if(A!=null){q=A}else{q=!r;u=q}if(q){if(!r){h.show();y.hide();f[2]=true;if(!n){h.val(j[f[3]])}}}else{if(r){h.hide();y.show();f[2]=false;if(!e){var m=h.val(),o=m;if(p){o=p[m]}if(!k){y.text(o)}else{y.html(k(o,j,z))}j[f[3]]=m}}}}if(this.p.editSetHeight){this.setMainHeight()}this.fire("afterSwitchEdit",{isEdit:u,rowData:j,rowNum:z})},checkEdit:function(){var n;if(!this.p.isPageCache){n=this.data}else{n=this.datas}for(var h=0,f=n.length;h<f;h++){var k=n[h];if(k.editCell){for(var g=0,e=k.editCell.length;g<e;g++){if(k.editCell[g][2]){return false}}}}return true},isDataEmpty:function(){var f=false;if(!this.p.isPageCache){for(var j=0,g=this.data.length;j<g;j++){if(this.data[j]!=null){f=true;break}}}else{for(var k=0,g=this.pageCache.length;k<g;k++){var n=this.pageCache[k][1];for(var j=0,e=n.length;j<e;j++){if(n[j]!=null){f=true;break}}}}return !f||this.data.length<=0},clearData:function(k){var g=this,h=this.p.noGridBorder;this.data=[];this.data.lengthD=0;this.chks=[];if(this.p.hasGroup){this.rows=[]}this.pageNo=1;this.p.canSort=false;if(this.p.isPageCache){this.clearPageCache()}this.tbody.empty();if(this.p.isLazyLoad){this.lazyRowNo=0}var e=this.getColNum();if(!this.p.isTree&&!this.p.percentWidth){this.table.width(this.tableHead.width()+((c.isIEgt8&&h&&this.p.lockColumn)?(-1*e[0]+2):0)+(c.isIE8?-2:0))}this.tbody.append('<tr emptyRow="true"><td style="text-align:center;height:'+this.p.emptyRowH+'px;">'+(!k?this.p.emptyTxt:"&nbsp;")+"</td></tr>");if(this.p.lockColumn){this.tbody2.empty();this.table2.width(this.tableHead2.width());this.tbody2.append('<tr emptyRow="true"><td style="text-align:center;height:'+this.p.emptyRowH+'px;">&nbsp;</td></tr>');if(this.p.lockColumnR){this.tbody3.empty();this.table3.width(this.tableHead3.width()+((c.isIEgt8&&h)?(-1*e[2]):0));this.tbody3.append('<tr emptyRow="true"><td style="text-align:center;height:'+this.p.emptyRowH+'px;">&nbsp;</td></tr>')}}for(var f=0,j=this.p.columns;f<j.length;f++){if(j[f].isHide){this.hideColumn(f,false,true)}}this.setTableWidth();this.setMainHeight(true);return this},setColumeDD:function(){var h=this;this.colDDs=[];this.spjs=[];for(var g=0,m=this.p.columns,e=m.length;g<e;g++){var k=this.getColType(g);var j=b("<div class='dgj_ddBar noRej'></div>").css({top:0,width:5,height:"100%",backgroundColor:"#fff",opacity:0.001,position:"absolute",zIndex:1,display:b.inArray(g,this.p.hideColumeDD)==-1?"block":"none"}),f;switch(k){case 0:case 1:case 3:this.colDDs.push(j);this.headContainer.append(j);break;case 2:j.addClass("dgj_colDD"+g);f=j.clone();this.lcHeadContainer.append(j);this.lcContainer.append(f);this.colDDs.push([j,f]);break}(function(n,p){switch(k){case 0:var q=b(n).SPJ({ddPosType:h.p.ddPosType,oLeft:h.thds1.eq(p),evts:{splitEnd:function(s,r){var u,t=function(F,y){var C=F.find("div.dgj_tdDiv");if(h.p.hasChk){C=C.not("div:first")}var v=C.eq(p);u=v.attr("mergeCell");if(!u){var B=parseFloat(v.attr("mergeCellN"));if(!B){v.width((h.p.noGridBorder&&p!=0)?r.l+1:r.l)}else{var E=r.l,z=B,D=parseFloat(v.attr("mergeCellH"));for(var A=0;A<D;A++){if(z!=p){E+=h.thds1.eq(z).width()+h.p.mcShift}z--}C.eq(B).width(E)}}else{var E=r.l,z=p;for(var A=0;A<u-1;A++){z--;E+=h.thds1.eq(z).width()+h.p.mcShift}v.width(E)}};h.table.find("tr:not(tr[loading],tr[groupRow])").each(function(v){t(b(this),v)});if(h.p.hasGridFoot){t(h.trF)}c.lazyDo(function(){this.setDDPosition()},100,"ld_dgjScroll",h);h.setSbjWidth(true);h.countFbtnPos();h.setMainHeight();if(h.p.collapseSonRow){h.tbody.find("div.dgj_tdDiv").eq(h.p.hasChkG?1:0).width(h.tableHead.width()-h.p.chkWidth-h.shiftG)}if(!u){h.saveColWidth(p,r.l)}}}});break;case 1:var q=b(n).SPJ({ddPosType:h.p.ddPosType,oLeft:h.thds1.eq(p),evts:{splitEnd:function(s,r){h.table.find("tr:not(tr[loading])").each(function(u){var t=b(this).find("div.dgj_tdDiv");if(h.p.hasChk){t=t.not("div:first")}t.eq(p).width((h.p.noGridBorder&&p!=0)?r.l+1:r.l)});if(!h.p.asyncLoadTree){h.syncRowHeight()}h.setLockWidth();h.setDDPosition();h.sbj.left(h.table.width());h.countFbtnPos();h.setMainHeight();h.saveColWidth(p,r.l)}}});break;case 2:var o=p-h.p.lockColumn+1;var q=b("div.dgj_colDD"+p).SPJ({ddPosType:h.p.ddPosType,oLeft:h.thds2.eq(o),evts:{splitEnd:function(s,r){h.table2.find("tr:not(tr[loading])").each(function(u){var t=b(this).find("div.dgj_tdDiv");t.eq(o).width((h.p.noGridBorder&&o!=0)?r.l+1:r.l)});if(!h.p.asyncLoadTree){h.syncRowHeight()}h.setDDPosition(true);h.setLockWidth();h.setDDPosition();h.countFbtnPos();h.setMainHeight();h.saveColWidth(p,r.l)}}});break;case 3:var o=p-h.p.lockColumnR+1;var q=b(n).SPJ({ddPosType:h.p.ddPosType,oLeft:h.thds3.eq(o),evts:{splitEnd:function(s,r){h.table3.find("tr:not(tr[loading])").each(function(u){var t=b(this).find("div.dgj_tdDiv");t.eq(o).width((h.p.noGridBorder&&o!=0)?r.l+1:r.l)});if(!h.p.asyncLoadTree){h.syncRowHeight()}h.setLockWidth();h.sbj.left(h.table.width());h.setDDPosition();h.countFbtnPos();h.setMainHeight();h.saveColWidth(p,r.l)}}});break}h.spjs.push(q)})(j,g,h)}},setDDPosition:function(t){var q=this;var s=6;if(d.isIElt9){s=7}else{if(d.isIE9||d.isIE10||d.isFF){s=8}else{if(d.isWebkit){s=12}}}for(var o=0,r=this.p.columns;o<r.length;o++){var n=this.getColType(o);if(this.p.lockColumn&&n==1&&t){continue}var h=0;switch(n){case 0:case 1:h=q.ths1.eq(o)[this.p.ddPosType]().left;var e=h+(!d.isWebkit?q.ths1.eq(o).width():q.ths1.eq(o)[0].clientWidth);if(this.p.ddPosType=="offset"){e-=s}if(q.p.canColumeDD){this.colDDs[o].css({left:e})}break;case 2:var m=o-this.p.lockColumn+1;var g=this.sbj.getScrollLeft();h=q.ths2.eq(m)[this.p.ddPosType]().left-(this.p.ddPosType=="offset"?this.tableHead.width():0)+g;var e=h+(!d.isWebkit?q.ths2.eq(m).width():q.ths2.eq(m)[0].clientWidth)-(this.p.ddPosType=="offset"?s:0);if(q.p.canColumeDD){this.colDDs[o][0].css({left:e});this.colDDs[o][1].css({left:e});this.spjs[o].p.shift.l=g}break;case 3:var m=o-this.p.lockColumnR+1;h=q.ths3.eq(m)[this.p.ddPosType]().left;var e=h+(!d.isWebkit?q.ths3.eq(m).width():q.ths3.eq(m)[0].clientWidth);if(this.p.ddPosType=="offset"){e-=s}if(q.p.canColumeDD){this.colDDs[o].css({left:e})}break}if(this.p.canColumeDD){var j=0;if(r[o].minWidth){j=r[o].minWidth}else{j=this.p.defaultMinW}this.spjs[o].p.minX=h+j;if(r[o].maxWidth){this.spjs[o].p.maxX=h+r[o].maxWidth}}}if(this.isDataEmpty()){var f=this.p.noGridBorder,u;if(f){u=this.getColNum()}if(!this.p.percentWidth){this.table.width(this.tableHead.width()+((c.isIEgt8&&f&&this.p.lockColumn)?(-1*u[0]+1):0))}if(this.p.lockColumn){this.table2.width(!d.isFF?this.tableHead2.width():this.tableHead2.width()+1)}if(this.p.lockColumnR){this.table3.width(!d.isFF?this.tableHead3.width()+((c.isIEgt8&&f)?(-1*u[2]):0):this.tableHead3.width()+1)}c.lazyDo(function(){this.syncRowHeightH()},100,"ld_dgjSrhh",this)}},saveColWidth:function(j,g){if(this.p.storeName){try{var k=c.LocalStorage.getItem({key:this.p.storeName+"_colWidth"}),f;if(k){f=JSON.parse(k)}else{f={}}f[j]=g;c.LocalStorage.setItem({key:this.p.storeName+"_colWidth",value:JSON.stringify(f)})}catch(h){}}},setRowWidthG:function(){if(!this.p.isTree&&this.p.collapseSonRow){this.tbody.find("div.dgj_tdDiv").eq(this.p.hasChkG?1:0).width(this.tableHead.width()-this.p.chkWidth-this.shiftG)}},setSbjWidth:function(g){if(this.p.isTree){return}var j=this;var h=this.tableHead.width()+2;var k=this.divOut.width();var f=h;if(!this.p.isTree&&this.p.isAutoSetWidth){this.mainContainer.width(h);this.mainHeadContainer.width(f);if(this.p.hasGridFoot){this.mainFootContainer.width(f)}if(c.isMobile){this.bodyContainer.width(h);this.headContainer.width(f);this.gridContainer.width(f)}}var e=j.bodyContainer[0].scrollWidth;j.sbj.width(k+(!this.p.fbSpace?1:0),e)},setSbjPostionLc:function(){var h=this.gridContainer.width(),g=this.table.width(),f;if(h+(d.isIEgt9?1:0)<this.gridContainer[0].scrollWidth){var e=this.lcHeadContainer.width(),j=this.gridContainer[0].scrollLeft;if(h+j-g-e<0){f=h-this.sbj.divOut.width()}else{if(j>g){f=0}else{f=g-j}}}else{f=g}this.sbj.left(f)},setLockWidth:function(){var j=this;var f=0;if(!j.p.lockColumnR){f=j.divOut.width()-j.tableHead.width()-18}else{f=j.divOut.width()-j.tableHead.width()-18-j.tableHead3.width()}var e=f,k=f;if(d.isFF){e=f-6;k=f-6}else{if(d.isWebkit){e=f-2;k=f-2}}var n=j.tableHead2.width();if(n>0&&n<f){var h=this.p.lockColumnR?1:0;e=n-h;k=n-h}else{if(n<=0){e=0;k=0}}var g=e<this.p.lcMinWidth;if(g){k=e=this.p.lcMinWidth}j.lcHeadContainer.width(e);var m=j.lcContainer;m.width(k);if(g){wG=this.mainContainer.width()+this.lcHeadContainer.width();if(this.p.lockColumnR){wG+=!(c.isIElt8)?this.rightContainer.width():this.tableHead3.width()}this.headContainer.width(wG+(this.p.noGridBorder?1:0));this.bodyContainer.width(wG+18);this.gridContainer.css("overflow-x","auto")}else{this.headContainer.css("width","auto");this.bodyContainer.css("width","auto");this.gridContainer.css("overflow-x","hidden")}this.sbj.width(m.width()+(this.p.noGridBorder?3:2),m[0].scrollWidth+(!this.p.lockColumnR?3:0));this.fire("afterSetWidth")},setTableWidth:function(A,t,e){var C=this;var v=this.isDataEmpty();if(!this.p.lockColumn){if(!t&&!this.p.isTree&&this.p.isAutoSetWidth){var n=this.divOut.width();var g=this.tableHead.width();var s=n-g;var z=0,r=0,p=0;var m=this.p.fbSpace?18:2;var D,u,q=function(E,w){var F;if(w){F=C.thds}else{F=E.find("div.dgj_tdDiv");if(this.p.hasChk){F=F.not("div:first")}}if(this.columnP!=null){z=this.columnP}else{z=F.length-1}var h=F.eq(z);D=h.attr("mergecell");if(D){u=F}r=h.width();p=s+r-m;if(p>this.p.defaultW){h.width(p)}else{h.width(this.p.defaultW)}};q.call(this,this.tableHead,true);if(this.p.hasGridFoot){q.call(this,this.tableFoot)}var f=0;if(D){for(var y=1,k=this.p.columns;y<D;y++){var o=u.eq(z-y),B=k[z-y];f+=parseInt(o[0].style.width,10)+(!B.editable?4:6)+(C.p.noGridBorder?1:0)}}this.table.find("tr.dgj_tr1").each(function(){var F=b(this).find("div.dgj_tdDiv");if(C.p.hasChk){F=F.not("div:first")}var w=F.eq(z);var E=w.width();var h=s+r-m;if(h>C.p.defaultW){w.width(p-f)}else{w.width(C.p.defaultW-f)}})}this.setSbjWidth();if(this.p.canColumeDD){this.setDDPosition();if(d.isIElt8){this.gridContainer.css("position","static").css("position","relative")}}this.setRowWidthG()}else{this.setLockWidth();if(this.p.canColumeDD){this.setDDPosition()}this.setSbjPostionLc();this.countFbtnPos();if(!A){c.lazyDo(function(){this.syncRowHeight()},100,"ld_dgjSrh",this)}}if(!this.p.isTree){if(v){var j=this.p.noGridBorder;if(j&&e==null){e=this.getColNum()}if(!this.p.percentWidth){this.table.width(this.tableHead.width()+((c.isIEgt8&&j&&this.p.lockColumn)?(-1*e[0]+1):0)+(c.isIE8?-2:0))}if(this.p.lockColumn){this.table2.width(this.tableHead2.width())}if(this.p.lockColumnR){this.table3.width(this.tableHead3.width()+((c.isIEgt8&&j)?(-1*e[2]):0))}}else{if(!this.p.percentWidth){this.table.css("width","auto")}if(this.p.lockColumn){this.table2.css("width","auto")}if(this.p.lockColumnR){this.table3.css("width","auto")}}}},setMainHeight:function(k){if(this.p.borderWidth&&!this.p.lockColumn){if(k==null){k=this.isDataEmpty()}if(this.p.noGridBorder){if(k){this.table.css({borderRightWidth:0,borderBottomWidth:0})}else{this.table.css({borderRightWidth:1,borderBottomWidth:1})}}else{var f=this.table.find("td");if(k){f.css("border-width",0)}else{f.css("border-width",1)}}}var g=(!this.p.hideScrollH&&!this.p.isTree&&(this.p.isReservedSbjH||this.sbj.hasScrollH()))?this.sbj.p.height:0;if(g==0){this.sBarHContainer.hide()}else{this.sBarHContainer.show()}if(!this.p.isAutoSetHeight){this.bodyContainer.css("height","auto");if(c.isIEgt9){this.gridContainer.css("height","auto")}return}var p=this.divOut.parent().height();var r=this.headContainer.height();var e=this.table.height();var s=0;if(this.p.hasGridFoot){s=this.tableFoot.height()}if(this.p.lockColumn){var m=this.table2.height();var j=0;if(this.p.lockColumnR){j=this.table3.height()}var q=Math.max(e,m,j);e=q}var o=r+e+s+g;if(o>=p){var n=p-r-s-g;if(this.p.lockColumn){if(!(c.isIElt8)&&this.gridContainer.width()+(d.isIEgt9?1:0)<this.gridContainer[0].scrollWidth){n-=g}if(d.isIEgt9){this.gridContainer.height(p-g)}}if(this.p.borderWidth){n-=1;if(!this.p.lockColumn){var u;if(this.p.noGridBorder){u=this.table}else{u=this.table.find("tr:last > td")}u.css("border-bottom-width",0)}}this.bodyContainer.height(n)}else{if(this.p.lockColumn){if(d.isIEgt9){if(this.gridContainer.width()+1<this.gridContainer[0].scrollWidth){this.gridContainer.height(o)}else{this.gridContainer.height(o-g+(this.p.noGridBorder?1:0))}}}if(this.p.borderWidth&&!this.p.lockColumn&&!k){var u;if(this.p.noGridBorder){u=this.table}else{u=this.table.find("tr:last > td")}u.css("border-bottom-width",1)}this.bodyContainer.height((!this.p.isTree?e+(!this.p.hasGridFoot?(c.isFF&&this.p.isTree?2:1):(d.isFF?0:-1)):p)+(this.p.noGridBorder?1:0))}},reLayout:function(f,e){this.setTableWidth(f,e);this.countFbtnPos();this.setMainHeight();this.autoLoadlazyRow()},syncRowHeight:function(){var e=this;if(this.p.lockColumn){this.syncRowHeightH();this.syncRowHeightB()}},syncRowHeightR:function(e,k,j,h){if(this.p.lockColumn){var o,g;if(!k){o=this.tbody.find("tr:not(tr[loading])").eq(e);g=this.tbody2.find("tr:not(tr[loading])").eq(e)}else{o=k;g=j}var p=o.height();var n=g.height();var q,f,m;if(!this.p.lockColumnR){q=Math.max(p,n)}else{if(!k){f=this.tbody3.find("tr:not(tr[loading])").eq(e)}else{f=h}m=f.height();q=Math.max(p,n,m);f.height(q)}o.height(q);g.height(q)}},syncRowHeightH:function(){if(this.p.lockColumn){if(!this.columnGroup){var h=this.trH.height(),g=this.trH2.height(),e,f;if(!this.p.lockColumnR){e=Math.max(h,g)}else{f=this.trH3.height();e=Math.max(h,g,f);this.trH3.height(e)}this.trH.height(e);this.trH2.height(e)}else{var j=(c.isIE8||c.isIE9||c.isIE10||c.isWebkit)?1:0,h=this.tableHead.height(),g=this.tableHead2.height(),e,f;if(!this.p.lockColumnR){e=Math.max(h,g)}else{f=this.tableHead3.height();e=Math.max(h,g,f);if(e>f){if(this.hasCg3){this.trHcg3.height(e-this.trH3.height()-j)}else{this.trH3.height(e-j)}}}if(e>h){if(this.hasCg1){this.trHcg.height(e-this.trH.height()-j)}else{this.trH.height(e-j)}}if(e>g){if(this.hasCg2){this.trHcg2.height(e-this.trH2.height()-j)}else{this.trH2.height(e-j)}}}}},syncRowHeightB:function(){var g=this;if(this.p.lockColumn){var f=this.tbody2.find("tr:not(tr[loading])"),e;if(this.p.lockColumnR){e=this.tbody3.find("tr:not(tr[loading])")}this.tbody.find("tr:not(tr[loading])").each(function(p){var n=b(this);var q=f.eq(p);var m=n.height();var k=q.height();var h,o,j;if(!g.p.lockColumnR){h=Math.max(m,k)}else{o=e.eq(p);j=o.height();h=Math.max(m,k,j);o.height(h)}n.height(h);q.height(h)})}},countFbtnPos:function(){if(this.p.hasFloatBtn&&!this.p.borderWidth){var e=this.headContainer.width(),j=this.mainHeadContainer.width(),k=this.p.lockColumn?this.lcHeadContainer.width():0,g=this.p.lockColumnR?this.rightHeadContainer.width():0,f=e-j-k-g-15,h=f>=0?f:0;this.floatBtn.css("right",h)}},setRowHL:function(f){if(!this.p.isRowHighlight){return}var e=this;f.unbind("mouseenter").unbind("mouseleave").hover(function(){var j=e.p.colorParams.highlight,h=c.theme.configDgj;var g=!j?h.highlight:j;if(f.attr("rownum")){g=h.highlightG}if(e.hasAnimateHl){f.animate({backgroundColor:g},50,function(){f.css("background-color",g)})}else{f.css("background-color",g)}},function(){var g=f.attr("spRowColor"),h;if(!g||f.attr("selected")){h=f.attr("colorT");if(h){g=c.theme.configDgj[h]}else{g=f.attr("colorBg")}}if(e.hasAnimateHl){f.stop().animate({backgroundColor:g},200,function(){e.resumeHL(g,h,f)})}else{e.resumeHL(g,h,f)}})},resumeHL:function(e,f,g){if(f){g.each(function(){this.style.backgroundColor=""})}else{g.css("background-color",e)}},setRowColor:function(k,h,g,f,j){if(this.p.hasSelectColor&&h.attr("selected")){return}var n=this.p.colorParams,e=h.attr("spRowColor"),m=n.selectColor;if(k&1){if(!e&&m){e=n.trColor2}if(!e){h.swapClassJ("dgj_oddTr dgj_selectedTr","dgj_evenTr").attr({colorT:"even",colorTY:"even"})}else{h.css("background-color",e).attr({colorBg:e,colorBgY:e})}if(this.p.lockColumn){if(!e){g.swapClassJ("dgj_oddTr dgj_selectedTr","dgj_evenTr").attr({colorT:"even",colorTY:"even"})}else{g.css("background-color",e).attr({colorBg:e,colorBgY:e})}}if(this.p.lockColumnR){if(!e){f.swapClassJ("dgj_oddTr dgj_selectedTr","dgj_evenTr").attr({colorT:"even",colorTY:"even"})}else{f.css("background-color",e).attr({colorBg:e,colorBgY:e})}}}else{if(!e&&m){e=n.trColor1}if(!e){h.swapClassJ("dgj_evenTr dgj_selectedTr","dgj_oddTr").attr({colorT:"odd",colorTY:"odd"})}else{h.css("background-color",e).attr({colorBg:e,colorBgY:e})}if(this.p.lockColumn){if(!e){g.swapClassJ("dgj_evenTr dgj_selectedTr","dgj_oddTr").attr({colorT:"odd",colorTY:"odd"})}else{g.css("background-color",e).attr({colorBg:e,colorBgY:e})}}if(this.p.lockColumnR){if(!e){f.swapClassJ("dgj_evenTr dgj_selectedTr","dgj_oddTr").attr({colorT:"odd",colorTY:"odd"})}else{f.css("background-color",e).attr({colorBg:e,colorBgY:e})}}}if(j&&this.p.hasSelectColor){this.setRowColorSelected(h,g,f)}},setRowColorG:function(g,e,f){if(this.p.hasSelectColor&&e.attr("selected")||e.attr("spRowColor")){return}var h=this.p.colorParams.selectColor;if(g&1){if(this.p.colorParams.groupRow2&&h){e.css("background-color",this.p.colorParams.groupRow2).attr("colorBgY",this.p.colorParams.groupRow2)}else{e.removeClass("dgj_oddTrG dgj_selectedTr").addClass("dgj_evenTrG").attr("colorT","evenG").attr("colorTY","evenG")}}else{if(this.p.colorParams.groupRow&&h){e.css("background-color",this.p.colorParams.groupRow).attr("colorBgY",this.p.colorParams.groupRow)}else{e.removeClass("dgj_evenTrG dgj_selectedTr").addClass("dgj_oddTrG").attr("colorT","oddG").attr("colorTY","oddG")}}if(f&&this.p.hasSelectColor){this.setRowColorSelected(e)}},setRowColorSelected:function(h,g,f){var e=this.p.colorParams.selectColor,j=this.p.colorParams.groupRow;h.attr("selected",true);if(!e&&!j){if(this.p.hasGroup){h.removeClass("dgj_oddTrG dgj_evenTrG")}h.removeClass("dgj_oddTr dgj_evenTr").addClass("dgj_selectedTr").attr("colorT","selected")}else{h.css("background-color",this.p.colorParams.selectColor).attr("colorBg",this.p.colorParams.selectColor)}if(this.p.lockColumn){g.attr("selected",true);if(!e&&!j){if(this.p.hasGroup){g.removeClass("dgj_oddTrG dgj_evenTrG")}g.removeClass("dgj_oddTr dgj_evenTr").addClass("dgj_selectedTr").attr("colorT","selected")}else{g.css("background-color",this.p.colorParams.selectColor).attr("colorBg",this.p.colorParams.selectColor)}}if(this.p.lockColumnR){f.attr("selected",true);if(!e&&!j){if(this.p.hasGroup){f.removeClass("dgj_oddTrG dgj_evenTrG")}f.removeClass("dgj_oddTr dgj_evenTr").addClass("dgj_selectedTr").attr("colorT","selected")}else{f.css("background-color",this.p.colorParams.selectColor).attr("colorBg",this.p.colorParams.selectColor)}}},setColorCheckOne:function(m,p,n){var e=m.find("tr[selected]");var q=e.attr("colorBgY"),j=e.attr("spRowColor"),h=e.attr("colorTY"),o=this.p.hasGroup?"G":"";var r;if(h){r=h.indexOf("G")==-1?h:h.substr(0,h.length-1)}if(j){q=j}if(e.length>0){e.removeAttr("selected");if(q){e.css("background-color",q).attr("colorBg",q)}else{if(this.p.hasGroup){e.removeClass("dgj_oddTrG dgj_evenTrG")}e.removeClass("dgj_selectedTr dgj_oddTr dgj_evenTr").addClass("dgj_"+r+"Tr"+o).attr("colorT",h)}}if(this.p.lockColumn){var k=p.find("tr[selected]");if(k.length>0){k.removeAttr("selected");if(q){k.css("background-color",q).attr("colorBg",q)}else{if(this.p.hasGroup){k.removeClass("dgj_oddTrG dgj_evenTrG")}k.removeClass("dgj_selectedTr dgj_oddTr dgj_evenTr").addClass("dgj_"+r+"Tr"+o).attr("colorT",h)}}}if(this.p.lockColumnR){var f=n.find("tr[selected]");if(f.length>0){f.removeAttr("selected");if(q){f.css("background-color",q).attr("colorBg",q)}else{if(this.p.hasGroup){f.removeClass("dgj_oddTrG dgj_evenTrG")}f.removeClass("dgj_selectedTr dgj_oddTr dgj_evenTr").addClass("dgj_"+r+"Tr"+o).attr("colorT",h)}}}},setSpRowColor:function(j,f,e){var h=this;var g=function(k){k.css("background-color",h.p.colorParams.spRowColor).attr("spRowColor",h.p.colorParams.spRowColor)};g(j);if(this.p.lockColumn){g(f)}if(this.p.lockColumnR){g(e)}},collapseAnimWrap:function(q,n,e,g){var k=this;var o,f,j;var m=this.p.columns.length;o=b("<tr><td colspan='"+((this.p.hasChk||this.p.hasChkG)?m+1:m)+"' style='padding:0;border-top-width:0;border-right-width:0;border-bottom-width:0;'></td></tr>");f=b("<div class='dgj_trTd' style='padding:0;margin:0;'></div>");var p=b("<table style='margin:"+(!this.p.isTree?"-1px 0 0 -1px":"0")+";'><tbody></tbody></table>");f.append(p);p.find("tbody").append(e);o.find("td").append(f);n.after(o);if(q){if(d.isIElt8){e.show()}else{e.css("display","table-row")}this.setMainHeight();j=f.height()-2;f.height(0).animate({height:b.easing.easeOutQuad&&this.p.easing?[j,this.p.easing]:j},this.p.collapseSpeed,function(){n.after(e);o.remove();d.lazyDo(function(){if(!c.isMobile){this.setTableWidth()}this.setMainHeight();if(g){g.call(this)}},50,"ld_dgjCSR",k)})}else{j=f.height()-2;f.height(j).animate({height:b.easing.easeOutQuad&&this.p.easing?[0,this.p.easing]:0},this.p.collapseSpeed,function(){n.after(e);o.remove();e.hide();d.lazyDo(function(){if(!c.isMobile){this.setTableWidth()}this.setMainHeight();if(g){g.call(this)}},50,"ld_dgjCSR",k)})}},setRowSelect:function(f,e){if(!e.selected){e.selected=true;f.css({backgroundColor:this.p.colorParams.select}).attr("colorBgO",f.attr("colorBg")).attr("colorBg",this.p.colorParams.select)}else{e.selected=false;f.css({backgroundColor:f.attr("colorBgO")}).attr("colorBg",f.attr("colorBgO"))}},check:function(H,j,r,G,L,e,w,t){var K=this,j=j,G=G,D=true,q,A,z,F,n=!e,J=e,m=w,k=t,E=false,s=this.p.isTreeGrid,y=this.p.hasGroup;if(s){if(d.RX.numZ(H)){H=H+"."}}if(!j){if(!s){j=this.data[H]}else{j=this.seekNode(H)}}else{if(!s&&!y){H=b.inArray(j,this.data)}}if(!G){D=false;if(!s){G=this.chks[H]}else{G=j[this.p.nodeChkField]}}if(!r){r={}}if(!J){J=this.tbody}if(!m){m=this.tbody2}if(!k){k=this.tbody3}if(y){F=H+(!L?"":("_"+L))}if(this.p.hasSelectColor){if(!this.oTrsChkAll1){var f;if(!y){if(!s){f="tr:not(tr[loading],tr[emptyRow]):eq("+H+")"}else{f="tr[path='"+H+"']"}}else{f="tr[rowNum="+F+"]"}q=J.find(f);if(this.p.lockColumn){A=m.find(f)}if(this.p.lockColumnR){z=k.find(f)}}else{if(!y){if(!s){q=this.oTrsChkAll1.eq(H)}else{q=this.oTrsChkAll1.filter("tr[path='"+H+"']")}}else{q=this.oTrsChkAll1.filter("[rowNum="+F+"]")}if(this.p.lockColumn){if(!s){A=this.oTrsChkAll2.eq(H)}else{A=this.oTrsChkAll2.filter("tr[path='"+H+"']")}}if(this.p.lockColumnR){if(!s){z=this.oTrsChkAll3.eq(H)}else{z=this.oTrsChkAll3.filter("tr[path='"+H+"']")}}}}if(D&&!r.isAllCheck&&G[0].checked==j.checked&&!r.isClickRow){return}if(j){var g,v;if(this.p.collapseSonRow){g=J.find("tr[rowNum="+F+"]");v=J.find("tr.dgj_trB_"+F)}if(j.checked){if(this.p.isCheckOne){this.selectedItem=null}if(!D){if(this.p.chkStyle){G.sbxj.setChecked(false,null,true)}else{G[0].checked=false}}j.checked=false;if(this.p.hasSelectColor&&q){q.removeAttr("selected");if(this.p.lockColumn){A.removeAttr("selected")}if(this.p.lockColumnR){z.removeAttr("selected")}if(!y){this.setRowColor(!s?H:0,q,A,z)}else{this.setRowColorG(H,q)}}if(this.p.collapseSonRow){g.removeAttr("collapse");if(this.p.collapseAnimate&&!r.isAllCheck){this.collapseAnimWrap(false,g,v);E=true}else{v.hide()}if(n){this.autoLoadlazyRow(null,200)}}}else{if(this.p.isCheckOne){if(!this.p.isPageCache){if(this.p.hasSelectColor){this.setColorCheckOne(this.tbody,this.p.lockColumn?this.tbody2:null,this.p.lockColumnR?this.tbody3:null)}}else{for(var B=0,u=this.pageCache.length;B<u;B++){if(this.p.hasSelectColor){var e=this.pageCache[B][2];var w=this.pageCache[B][4];var t=this.pageCache[B][5];this.setColorCheckOne(e,w,t)}}}if(this.p.collapseSonRow){var C=this.table.find("tr[collapse=true]");if(C.length>0){this.table.find("tr.dgj_trB_"+C.attr("rowNum")).hide();C.removeAttr("collapse")}}var I=this.selectedItem;if(I){if(this.p.chkStyle){I.chk.sbxj.setChecked(false,null,true)}else{I.chk[0].checked=false}I.data.checked=false}this.selectedItem={chk:G,data:j}}if(!D){if(this.p.chkStyle){G.sbxj.setChecked(true,null,true)}else{G[0].checked=true}}j.checked=true;if(this.p.hasSelectColor&&q){this.setRowColorSelected(q,A,z)}if(this.p.collapseSonRow){g.attr("collapse",true);if(this.p.collapseAnimate&&!r.isAllCheck){this.collapseAnimWrap(true,g,v);E=true}else{if(d.isIElt8){v.show()}else{v.css("display","table-row")}}}}if(this.p.collapseSonRow&&n&&!E){d.lazyDo(function(){this.setMainHeight()},50,"ld_dgjCSR",this)}var o;if(y){if(v&&v.length>0){o=v.eq(v.length-1)}else{o=g}}if(!r.isAllCheck){this.fire("checkedOne",{rowData:j,rowNo:H,checked:j.checked,pageNo:L,lastTr:o})}}},fnChkAll:function(e,k,f){var j=true;if(e){j=e.checked}else{if(k!=null){j=k;if(this.p.chkStyle){this.sbxjAll.setChecked(j,null,true)}else{this.chkAll[0].checked=j}}}var g;if(this.p.hasSelectColor){if(!this.p.hasGroup){g="tr:not(tr[loading],tr[emptyRow])"}else{g="tr[rowNum]"}}if(!f||!this.p.isPageCache){this.checkAllFn(this.data,this.chks,this.tbody,this.p.lockColumn?this.tbody2:null,this.p.lockColumnR?this.tbody3:null,g,j);this.initTrsChkAll()}else{for(var h=0;h<this.pageCache.length;h++){this.checkAllFn(this.pageCache[h][1],this.pageCache[h][3],this.pageCache[h][2],this.pageCache[h][4],this.pageCache[h][5],g,j)}this.initTrsChkAll()}},checkAll:function(f,e){this.fnChkAll(null,f,e)},checkAllFn:function(n,p,h,g,f,o,t){if(this.p.hasSelectColor){this.oTrsChkAll1=h.find(o);if(this.p.lockColumn){this.oTrsChkAll2=g.find(o)}if(this.p.lockColumnR){this.oTrsChkAll3=f.find(o)}}for(var m=0,k=p.length;m<k;m++){var r=p[m];if(r){var e=r[0].checked;if(t?!e:e){var s={isAllCheck:true};r[0].paramJ=s;r.trigger("click",s)}}}if(this.p.isLazyLoad){for(var m=0,k=n.length;m<k;m++){var q=n[m];if(q){q.checked=t}}}},initTrsChkAll:function(){if(this.p.hasSelectColor){this.oTrsChkAll1=null;if(this.p.lockColumn){this.oTrsChkAll2=null}if(this.p.lockColumnR){this.oTrsChkAll3=null}}},setDefaultChkAll:function(){if(this.p.chkStyle){this.sbxjAll.setChecked(true,null,true)}else{this.chkAll[0].checked=true}for(var f=0,e=this.data.length;f<e;f++){this.data[f].checked=true}},sort:function(C,r,s,E,t){var D=this;if(!E||E.length<=1){return}var w=this.p.hasGroup;for(var y=0,u=E.length;y<u;y++){E[y].sortNo=y}c.Sort.execute(E,s,C,this.p.noSortSp);if(!w&&this.p.hasChk){var h=[];for(var y=0,u=E.length;y<u;y++){var A=this.chks[E[y].sortNo];h.push(A)}this.chks.length=0;for(var y=0,u=h.length;y<u;y++){this.chks.push(h[y])}}var g=this.pageNo!=null?"_"+this.pageNo:"";var v=!w?"tr.dgj_tr1:not(tr[loading])":"tr.dgj_trB_"+t+g;var q=this.tbody.find(v),m,k,e,B,z;if(this.p.lockColumn){m=this.tbody2.find(v.replace(/dgj_tr1/g,"dgj_tr2"))}if(this.p.lockColumnR){k=this.tbody3.find(v.replace(/dgj_tr1/g,"dgj_tr3"))}if(!w){var j=document.createDocumentFragment(),p,n;if(this.p.lockColumn){p=document.createDocumentFragment()}if(this.p.lockColumnR){n=document.createDocumentFragment()}for(var y=0,u=E.length;y<u;y++){var f;e=q.eq(E[y].sortNo);j.appendChild(e[0]);if(this.p.lockColumn){B=m.eq(E[y].sortNo);p.appendChild(B[0])}if(this.p.lockColumnR){z=k.eq(E[y].sortNo);n.appendChild(z[0])}this.setRowColor(y,e,B?B:null,z?z:null)}this.tbody[0].appendChild(j);if(this.p.lockColumn){this.tbody2[0].appendChild(p)}if(this.p.lockColumnR){this.tbody3[0].appendChild(n)}}else{var o=this.tbody.find("tr.dgj_trGB_"+t+g);var j=document.createDocumentFragment();for(var y=0,u=E.length;y<u;y++){var e=q.eq(E[y].sortNo);j.appendChild(e[0]);this.setRowColor(y,e)}c.Dom.insertAfter(j,o[0])}},sortT:function(n,q,k){var m=this;if(!k||k.length<=1){return}c.Sort.execute(k,q,n,this.p.noSortSp);var o=document.createDocumentFragment(),f,e,g;if(this.p.lockColumn){f=document.createDocumentFragment()}if(this.p.lockColumnR){e=document.createDocumentFragment()}for(var j=0,h=k.length;j<h;j++){g=k[j][this.p.nodePathField];this.tbody.find("tr[path^='"+g+"']").each(function(){o.appendChild(this)});if(this.p.lockColumn){this.tbody2.find("tr[path^='"+g+"']").each(function(){f.appendChild(this)})}if(this.p.lockColumnR){this.tbody3.find("tr[path^='"+g+"']").each(function(){e.appendChild(this)})}}this.tbody[0].appendChild(o);if(this.p.lockColumn){this.tbody2[0].appendChild(f)}if(this.p.lockColumnR){this.tbody3[0].appendChild(e)}},fnSort:function(k,q,m,n){var e=q.attr("sortAsc"),o;if((n!=null&&n)||(n==null&&(!e||e=="false"))){q.swapClassJ("dgj_sortDesc","dgj_sortAsc").attr("sortAsc","true");o=true}else{q.swapClassJ("dgj_sortAsc","dgj_sortDesc").attr("sortAsc","false");o=false}q.css("display","inline");var f={isAsc:o,colNo:k,col:m,colName:m.dataIndex};this.fire("preOnSort",f);if(!this.p.isCustomSort){if(this.p.isTreeGrid){this.sortT(o,m.dataIndex,this.data)}else{if(this.p.hasGroup){for(var h=0,g=this.data.length;h<g;h++){this.sort(o,k,m.dataIndex,this.data[h][this.p.sonRowName],h)}}else{this.sort(o,k,m.dataIndex,this.data)}}}else{this.fire("onSorting",f)}this.fire("finOnSort",f)},sortGrid:function(f,e){if(e==null){e=true}this.fnSort(f,this.gridContainer.find("img[no='sortImg"+f+"']"),this.p.columns[f],e)},setCellSort:function(g,m,k,j,f){var h=this,e=b('<img class="dgj_sortImg" no="sortImg'+g+'" src="'+c.imgPath+'Datagrid/treegrid/s.gif" />');j.append(e);if(!f){j.addClass("dgj_tdSort");k.css("cursor","pointer")}k.attr("title","点击排序").click(function(){h.hideSortImg();if(h.p.isLazyLoad){if(!(h.lazyRowNo>h.data.length-1)){if(h.useMbj){MBJ.loading("提示","正在排序中,请稍候...",function(){var n=this;setTimeout(function(){h.autoLoadlazyRow(true);h.fnSort(g,e,m);n.close()},100)});return}else{h.autoLoadlazyRow(true)}}}if(h.p.sortLoading){if(h.useMbj&&!h.p.evts.beforeSortLoading){MBJ.loading("提示","正在排序中,请稍候...",function(){var n=this;setTimeout(function(){h.fnSort(g,e,m);n.close()},100)})}else{h.fire("beforeSortLoading");setTimeout(function(){h.fnSort(g,e,m);h.fire("afterSortLoading")},100)}}else{h.fnSort(g,e,m)}})},hideSortImg:function(){this.gridContainer.find("img.dgj_sortImg").removeClass("dgj_sortAsc dgj_sortDesc")},remove:function(){this.fire("beforeRemove","DGJ");if(this.p.hasFloatBtn){this.mujFbtn.remove()}if(this.p.hasRowContextMenu){this.rowCmj.remove()}this._super()},getColType:function(e){var f=1;if(!this.p.lockColumn){f=0}else{if(e<this.p.lockColumn-1){f=1}else{if(this.p.lockColumnR){if(e>=this.p.lockColumnR-1){f=3}else{f=2}}else{f=2}}}return f},getColNum:function(){var g=0,f,e;if(!this.p.lockColumn){g=this.p.columns.length}else{g=this.p.lockColumn-1;if(this.p.lockColumn){f=this.p.columns.length-this.p.lockColumn+1}if(this.p.lockColumnR){e=this.p.columns.length-this.p.lockColumnR+1}}if(this.p.hasChk){g+=1}return[g,f,e]},getColSum:function(){var e=0;for(var f=0,e=this.p.columns.length;f<e;f++){if(!this.p.columns[f].isHide){e++}}return e},getHideCols:function(){var g=[];for(var f=0,e=this.p.columns.length;f<e;f++){if(this.p.columns[f].isHide){g.push(f)}}return g},setScrollTop:function(){this.bodyContainer.scrollTop(0)},setScrollBottom:function(){this.bodyContainer.scrollTop(this.bodyContainer[0].scrollHeight)},alert:function(f,e){if(this.useMbj){if(e==null){e="提示"}MBJ.alert(e,f)}else{alert(f)}},fnFullScreen:function(){if(this.p.canFullScreen&&DGJ.onFullScreen){DGJ.onFullScreen.call(this);var f=this.btnFs.find("td:eq(1) div"),g,e;if(this.btnFsCmj){g=this.btnFsCmj.find("td:eq(1) div")}if(!this.isFullScreen){this.isFullScreen=true;e="退出全屏"}else{this.isFullScreen=false;e="全屏显示"}f.text(e);if(this.btnFsCmj){g.text(e)}}},getRowsData:function(o){var n,k=this;if(!o){n=this.data}else{n=o}if(n&&n.length>0&&this.p.hasGroup){var f=[];var j=function(q){for(var p=0,h=q.length;p<h;p++){if(q[p]!=null&&q[p][k.p.sonRowName]!=null){for(var m=0;m<q[p][k.p.sonRowName].length;m++){var r=q[p][k.p.sonRowName][m];for(var s in q[p]){if(s!=k.p.sonRowName){r[s]=q[p][s]}}f.push(r)}}}};if(!this.p.isPageCache){j(n)}else{for(var g=0,e=this.pageCache.length;g<e;g++){j(this.pageCache[g][1])}}return f}else{return null}},fnTbd:function(h,e,f){sp=" ",thiz=this;if(f){sp=f}h.find("div.dgj_tdDiv:visible").each(function(m){var k=b(this),j,o=k.attr("editable"),p=thiz.p.hasChk&&m==0;if(!o){j=k.text()}else{j=k.find("span[editable]").text()}if(f&&j.indexOf(",")!=-1){j=j.replace(/,/g,thiz.p.csvDot)}if(!o){var n=k.find("input[type=text]");if(j!==""||n.length>0){if(n.length>0){n.each(function(){var q=n.val();if(f&&q.indexOf(",")!=-1){q=q.replace(/,/g,thiz.p.csvDot)}j+=" "+q})}e+=sp+j}else{if(!p){e+=sp+" "}}}else{if(j!==""){e+=sp+j}else{if(!p){e+=sp+" "}}}});if(e.indexOf(this.nbspJ)!=-1){var g=c.execJS("/"+this.nbspJ+"/ig");e=e.replace(g," ")}return e},fnTbdQ:function(n,e,j){sp=" ",thiz=this;if(j){sp=j}var g=this.p.exportCol;if(g){for(var h=0,f=g.length;h<f;h++){e=this.fnTbdR(n[g[h]]+"",e,j,sp)}}else{for(var m in n){e=this.fnTbdR(n[m]+"",e,j,sp)}}if(e.indexOf(this.nbspJ)!=-1){var k=c.execJS("/"+this.nbspJ+"/ig");e=e.replace(k," ")}return e},fnTbdR:function(f,e,g,h){if(g&&f.indexOf(",")!=-1){f=f.replace(/,/g,thiz.p.csvDot)}if(f.indexOf("\r\n")!=-1){f=f.replace(/\r\n/g,"")}if(f!==""){e+=h+f}else{e+=h+" "}return e},getGridText:function(q){var n=this,p="",e,h,o=this.exportCol,r=this.p.filterTag?",tr["+this.p.filterTag+"]":"";if(q&&!n.p.isTree){for(var m=0,g=n.p.columns.length;m<g;m++){var f=n.p.columns[m];if(!f.isHide&&(!o||o[f.dataIndex])){p+=","+f.text}}p=p.substr(1)+"\n"}if(n.p.isTreeGrid){h="    ";if(n.p.isTree){h=","}}if(!n.p.hasGroup){if(!this.p.quickRenderMode){e="tr:not(tr[loading],tr[groupRow],tr[emptyRow]"+r+"):visible";n.tbody.find(e).each(function(u){var v=b(this);if(q||((!n.p.isTreeGrid&&v.find("td[chkCell] input:checked").length>0)||v.attr("pasteRow"))){var s="";s=n.fnTbd(v,s,q?",":null);if(n.p.lockColumn){s=n.fnTbd(n.tbody2.find(e+":eq("+u+")"),s,q?",":null)}if(n.p.lockColumnR){s=n.fnTbd(n.tbody3.find(e+":eq("+u+")"),s,q?",":null)}s=s.substr(1);if(q&&n.p.isTreeGrid){var t=parseInt(v.attr("deep"),10);for(var u=0;u<t;u++){s=h+s}}p+=s+"\n"}})}else{var k=this.data;for(var m=0,g=k.length;m<g;m++){var j="";j=n.fnTbdQ(k[m],j,q?",":null);j=j.substr(1);p+=j+"\n"}}}else{e="tr:not(tr[loading],tr[emptyRow],tr[rowno]"+r+")";n.tbody.find(e).each(function(t){var u=b(this);if(q||(u.find("td[chkCellG] input:checked").length>0||u.attr("pasteRowG"))){var s="";s=n.fnTbd(u,s,q?",":null);s=s.substr(1);p+=s+"\n";n.tbody.find("tr.dgj_trB_"+u.attr("rownum")).each(function(){var v="";var w=b(this);v=n.fnTbd(w,v,q?",":null);v=v.substr(1);p+=v+"\n"})}})}return p},hasChecked:function(){var h=!this.p.isPageCache?this.data:this.datas;for(var f=0,e=h.length;f<e;f++){var g=h[f];if(g.checked){return true}}return false},getRowNoL:function(){var e;if(!this.p.compatibleMode){e=this.lazyRowNo+(this.data.lengthC-this.data.length)}else{e=this.lazyRowNo}return e}});d.Image.preLoad(d.imgPath+"Pagination/refresh.gif");b.fn.extend({DatagridJ:function(e){if(this&&this.length>0){return new d.DatagridJ(this,c.DGJ_commonConfig?b.extend(true,c.clone(c.DGJ_commonConfig),e):e)}},DGJ:function(e){return b(this).DatagridJ(e)}})});FJ.define("widget.ProgressBar",function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.ProgressBarJ=this.PBJ=d.ProgressBarJ=d.PBJ=d.CJ.extend({init:function(e,f){this._super(e,b.extend(true,{fjType:"PBJ",renderTo:e,width:200,height:18,value:30,valueMsg:"{0}%",max:100,radius:5,borderWidth:0,borderP:1,hideTxt:false,autoRise:20,autoDelay:500,hasTxt:true,colorParams:{borderOut:null,bgColor:"#fff"},evts:{progressChanged:null}},f));this.initFn();return this},initFn:function(){this.valueMsgTmp=this.p.valueMsg;this._super();this.create(true)},create:function(f){var g=this;this._super(f);this.pbjId="PBJ_"+this.objId;this.divOut.attr("id",this.pbjId).addClass("pbj").css({width:this.p.width,height:this.p.height,position:"relative"});var e;if(d.isFF){if(!d.isFFgt4){e="-moz-border-radius"}else{e="border-radius"}}else{if(d.isWebkit){e="-webkit-border-radius"}else{if(d.isOpera||d.isIEgt9){e="border-radius"}}}if(e&&this.p.radius>0){this.divOut.css(e,this.p.radius+"px")}if(d.checkTag("progress")&&!d.isOpera){if(this.p.value>=this.p.max){this.divOut.addClass("pbj_max")}else{this.divOut.addClass("pbj_normal")}this.progress=b("<progress class='pbj_progress' value='"+this.p.value+"' max='"+this.p.max+"'></progress>").css({borderRadius:this.p.radius,width:this.p.width,height:this.p.height,borderWidth:this.p.borderP,backgroundColor:this.p.colorParams.bgColor});if(this.p.colorParams.borderOut){this.progress.css("border-color",this.p.colorParams.borderOut)}}else{this.divOut.css("border-width",this.p.borderP);this.progress=b('<div class="pbj_progressDiv"></div>').css({borderRadius:(this.p.radius-2)+"px 0 0 "+(this.p.radius-2)+"px",width:this.countValue(),height:this.p.height});if(this.p.colorParams.progressColor){this.progress.css("background-color",this.p.colorParams.progressColor)}}if(this.p.hasTxt){this.progressTxt=b("<div class='pbj_percent'>"+this.valueMsgTmp.replace(/\{0\}/g,this.p.value)+"</div>").css({display:this.p.hideTxt?"none":"block"});if(this.p.colorParams.progressTxt){this.progressTxt.css("color",this.p.colorParams.progressTxt)}this.divOut.append(this.progressTxt)}this.divOut.append(this.progress);return this},getValue:function(){return this.p.value},setValue:function(k,j){var g=this;this.p.value=k;if(!d.RX.numZ(k)){this.p.value=0}if(this.p.value>this.p.max){this.p.value=this.p.max}if(d.checkTag("progress")&&!d.isOpera){var f=function(){if(g.p.value==g.p.max){g.divOut.swapClassJ("pbj_normal","pbj_max")}else{g.divOut.swapClassJ("pbj_max","pbj_normal")}if(g.p.hasTxt){g.progressTxt.text(g.p.value+"%")}g.fire("progressChanged",{value:g.p.value})};if(d.isChrome){this.progress.css("width",this.p.width)}if(!j){this.progress.attr("value",this.p.value);f()}else{var e={value:this.p.value};this.progress.animate(e,j,function(){f()})}}else{var f=function(){if(!d.isIElt9){if(g.p.value==g.p.max){g.progress.css({borderRadius:(g.p.radius-2)+"px"})}else{g.progress.css({borderRadius:(g.p.radius-2)+"px 0 0 "+(g.p.radius-2)+"px"})}}if(g.p.hasTxt){g.progressTxt.text(g.p.value+"%")}g.fire("progressChanged",{value:g.p.value})};var h=this.countValue();if(!j){this.progress.width(h);f()}else{var e={width:h};this.progress.animate(e,j,function(){f()})}}},start:function(f){var e=this;this.stopP=false;(function(){if(!e.stopP){if(e.p.value>=e.p.max){e.p.value=0}e.setValue(parseInt(e.p.value,10)+e.p.autoRise);setTimeout(arguments.callee,e.p.autoDelay)}})()},stop:function(){this.stopP=true},clear:function(){this.stop();this.setValue(0)},countValue:function(){var e=this.p.value/this.p.max;if(!c.RX.percent(this.p.width)){e=this.p.width*e}else{e=e*100+"%"}return e}});d.PBJ.createProgressBarStr=function(j,f,h,e){var g=h*(j/f);return'<div class="pbj_progressDiv" style="width:'+g+"px;height:"+e+'px;"></div>'};b.fn.extend({ProgressBarJ:function(e){if(this&&this.length>0){return new d.ProgressBarJ(this,c.PBJ_commonConfig?b.extend(true,c.clone(c.PBJ_commonConfig),e):e)}},PBJ:function(e){return b(this).ProgressBarJ(e)}})});FJ.define("widget.FileUpload",["widget.ProgressBar"],function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.FileUploadJ=this.FUJ=d.FileUploadJ=d.FUJ=d.CJ.extend({init:function(e,f){this._super(e,b.extend(true,{fjType:"FUJ",fujType:"js",renderTo:e,width:220,height:66,uploadPath:"",getProgressFromServer:false,uploadProgressPath:"",uploadProgressRate:200,uploadParam:{},accept:null,isMultiple:false,hasFileNum:true,hideProgress:true,hideFooter:true,bgImgPoc:null,bgTxt:"",selectBtnParam:null,progressSubWidth:118,headCenterSubWidth:115,footRightSubWidth:140,headCaseMarginTop:null,fileListLineHeight:null,fileNameRule:"fuj_file_",useRandomFileName:false,canUploadDrop:true,isStopDefaultDrop:true,canXhr2:null,theme:"xtheme-blue.css",xapPath:d.getRootPath()+"/JsLibrary/flareJ/xap/flareJ.Silverlight.FileUploadJ.xap",wcfPath:d.getRootPath()+"/Services/FUJ/flareJ_FileUploadService.svc",maxFileSizeKB:"",maxUploads:"",maxSelects:"",fileFilter:"",bufferSize:"102400",hasBtnUp:false,hasBtnClear:false,hasSpeed:false,hasCbxTheme:false,isCheckName:false,isCheckNameYorN:true,canMultiselect:true,canImageCrop:true,isScaleImageCrop:false,windowless:true,regImagePixel:"",spName:"",spNameTip:"",upParam:"",upParamF:"",exNameS:"",uploadType:"wcf",borderWidth:1,hasItemBottom:false,colorParams:{bgColor:"#ffffff",borderOut:null},evts:{addFile:null,deleteFile:null,allFinish:null,selectEx:null}},f));this.initFn();return this},initFn:function(){this._super();if(this.p.fujType=="sl"){this.slCtl=null}else{if(this.p.fujType=="js"){if(this.maxSelects==""){this.maxSelects=0}this.canXhr2=c.isFF||(c.isWebkit&&window.FormData)||c.isIE10;if(this.p.canXhr2!=null){this.canXhr2=this.p.canXhr2}if(!this.canXhr2&&!this.p.getProgressFromServer){this.hidePbjTxt=true}if(this.p.canUploadDrop&&this.canXhr2){this.useUploadDD=true;this.p.bgTxt="您可以将文件拖到此处"}if(this.canXhr2){this.files=[]}if(this.p.fileFilter!=""){var f=this.p.fileFilter.indexOf("|")!=-1?this.p.fileFilter.split("|")[1].split(";"):this.p.fileFilter.split(";");this.fileFilters=[];for(var e=0;e<f.length;e++){this.fileFilters.push(f[e].substr(2))}}}}this.isFirst=false;this.create();this.show()},create:function(){var f=this;this._super();switch(this.p.fujType){case"sl":this.divOut.append(d.SL.create({id:"FUJ_"+this.objId,xapPath:this.p.xapPath,windowless:this.p.windowless,initParams:"HttpUploader="+(this.p.uploadType=="http"?true:false)+",Theme="+this.p.theme+",MaxFileSizeKB="+this.p.maxFileSizeKB+",MaxUploads="+this.p.maxUploads+",FileFilter="+this.p.fileFilter+",CustomParam=yourparameters,BufferSize="+this.p.bufferSize+",UpWcfPath="+this.p.wcfPath+",UpParam="+this.p.upParam+",UpParamF="+this.p.upParamF+",hasBtnUp="+this.p.hasBtnUp+",hasBtnClear="+this.p.hasBtnClear+",maxSelects="+this.p.maxSelects+",hasSpeed="+this.p.hasSpeed+",hasCbxTheme="+this.p.hasCbxTheme+",isCheckName="+this.p.isCheckName+",isCheckNameYorN="+this.p.isCheckNameYorN+",spName="+this.p.spName+",spNameTip="+this.p.spNameTip+",canMultiselect="+this.p.canMultiselect+",canImageCrop="+this.p.canImageCrop+",isScaleImageCrop="+this.p.isScaleImageCrop+",exNameS="+this.p.exNameS+",regImagePixel="+this.p.regImagePixel}));FUJ.List.push(this);break;case"js":this.divOut.addClass("fuj").attr("id","FUJ_"+this.objId).css({height:this.p.height,width:this.p.width});this.bgDiv0=b("<div class='fuj_bg0'></div>");this.bgImg=b('<div class="fuj_bgImg"></div>');if(this.p.bgImgPoc){this.bgImg.css({width:this.p.bgImgPoc.w,height:this.p.bgImgPoc.h,margin:this.p.bgImgPoc.t+"px 0 0 "+this.p.bgImgPoc.l+"px"})}this.bgDiv0.append(this.bgImg);this.bgDiv=b("<div class='fuj_bg'></div>");this.bgTxt=b("<table class='fuj_bgTxt'><tr><td><div>"+this.p.bgTxt+"</div></td></tr></table>");this.bgDiv.append(this.bgTxt);this.containerDiv=b("<div class='fuj_container'></div>");this.header=b('<div class="fuj_header"></div>');this.header_table=b('<table class="fuj_head_table"><tr><td><div class="fuj_header_td1"></div></td><td><div class="fuj_header_td2" style="width:'+(this.p.width-this.p.headCenterSubWidth)+'px"></div></td><td><div class="fuj_header_td3"></div></td></tr></table>');if(this.p.headCaseMarginTop!=null){this.header_table.find("div").css("margin-top",this.p.headCaseMarginTop)}this.header.append(this.header_table);this.body=b('<div class="fuj_body"></div>').width(this.p.width).height(this.p.height-(this.p.hideFooter?28:56));this.body_form=b('<form method="post" enctype="multipart/form-data" ></form>');this.body_hideFrame=b('<iframe class="fuj_hideFrame" name="fuj_hideFrame_'+this.objId+'" src="" frameborder="0"></iframe>');this.body_form.attr({action:this.p.uploadPath,target:"fuj_hideFrame_"+this.objId});this.body_table=b('<table class="fuj_body_table"></table>').width(this.p.width-23);this.body.append(this.body_form.append(this.body_table)).append(this.body_hideFrame);this.footer=b('<div class="fuj_footer"></div>');this.footer_table=b('<table class="fuj_foot_table"><tr><td><div class="fuj_footer_td1"></div></td><td><div class="fuj_footer_td2"></div></td><td><div class="fuj_footer_td3" style="width:'+(this.p.width-this.p.footRightSubWidth)+'px"></div></td></tr></table>');this.footer.append(this.footer_table);if(this.p.hideFooter){this.footer.hide()}this.divOut.append(this.bgDiv0).append(this.bgDiv).append(this.containerDiv.append(this.header).append(this.body).append(this.footer));this.btnFile=b('<input type="file" style="width:58px;" />');if(this.p.accept){this.btnFile.attr("accept",this.p.accept)}if(this.p.isMultiple){this.btnFile.attr("multiple","multiple")}this.header_table.find("div.fuj_header_td3").append(this.btnFile);this.btnFile.fileCustomStyleJ(b.extend(true,{margin:{l:2},btnText:"选择文件",isShowTxt:false,afterRender:function(h){f.fileBtn=h}},this.p.selectBtnParam));this.btnFile.bind("change",function(h){f.addFile(h,b(this))});this.btnUpload=b('<input type="button" class="pj_btn3 fuj_head2" value="上传" />');this.header_table.find("div.fuj_header_td2").append(this.btnUpload);this.btnUpload.click(function(){f.upload()});if(!this.p.hasBtnUp){this.btnUpload.hide()}this.btnClear=b('<input type="button" class="pj_btn3 fuj_head2" value="清空" style="margin-left:4px;" />');this.header_table.find("div.fuj_header_td2").append(this.btnClear);this.btnClear.click(function(){f.clear()});if(!this.p.hasBtnClear){this.btnClear.hide()}this.fileNum=b("<span>0</span>");this.fileNumTxt=b("<span>文件数:</span>");this.footer_table.find("div.fuj_footer_td1").append(this.fileNumTxt).append(this.fileNum);if(!this.p.hasFileNum){this.fileNumTxt.hide();this.fileNum.hide()}this.fileUploadSize=b('<span style="margin-right:2px;">0KB</span>').hide();this.footer_table.find("div.fuj_footer_td2").append(this.fileUploadSize);var e;if(!this.p.hideFooter){e=this.footer_table.find("div.fuj_footer_td3")}else{e=this.header_table.find("div.fuj_header_td2")}this.pbj=e.PBJ({width:this.p.width-this.p.progressSubWidth,height:18,value:0,max:100,radius:5,borderP:1,hideTxt:this.hidePbjTxt});this.pbj.divOut.addClass("fuj_head2");if(this.p.hideProgress){this.pbj.display(0)}if(this.useUploadDD){if(this.p.isStopDefaultDrop){b(document).bind("dragover",function(h){h.preventDefault()});b(document).bind("drop",function(h){h.preventDefault()})}var g=function(j,h){j.stopPropagation();j.preventDefault();if(j.type=="dragover"){h.css({boxShadow:"inset 2px 2px 4px rgba(0, 0, 0, .5)",backgroundColor:"#ebebeb",borderStyle:"dashed"})}else{h.css({boxShadow:"none",backgroundColor:f.p.colorParams.bgColor,borderStyle:"dashed"})}return this};this.divOut.bind("dragenter",function(h){h.preventDefault()});this.divOut.bind("dragover",function(h){g(h,f.divOut)});this.divOut.bind("dragleave",function(h){g(h,f.divOut)});this.divOut.bind("drop",function(h){f.divOut.trigger("dragleave");f.addFile(h,f.header_table.find("input[type=file]"))})}break}return this},addFile:function(A,m){var E=this;var t=parseFloat(E.fileNum.text());if(t<E.p.maxSelects||E.p.maxSelects==0){var D=false,r=A.originalEvent,q=r.target&&r.target.files,j,g=[],f=[],F=1;if(r.dataTransfer){D=true}var k=function(e){j=e;F=j.length;for(var I=0,n=j.length;I<n;I++){var w=j[I].name;g[I]=w;f[I]=w.substr(w.lastIndexOf(".")+1).toLowerCase()}};if(!D){if(q){k(r.target.files)}else{var G=m.val(),H=G.substr(G.lastIndexOf("\\")+1);g=[H];f=[H.substr(H.lastIndexOf(".")+1).toLowerCase()]}}else{k(r.dataTransfer.files)}if((t+F)>E.p.maxSelects){MBJ.alert("提示","您最多可选择"+E.p.maxSelects+"个文件。");return}if(E.p.fileFilter!=""){for(var v=0,u=f.length;v<u;v++){if(b.inArray(f[v],E.fileFilters)==-1){MBJ.alert("提示","不能选择类型为"+f[v]+"的文件。");return}}}for(var v=0;v<F;v++){var B,C=g[v],s=f[v];if(j){B=j[v]}var o=b('<input class="fuj_customStyle_file" type="file" style="width:58px;" />');o.bind("change",function(n){E.addFile(n,b(this))}).hover(function(){E.fileBtn.addClass("pj_btn_hover")},function(){E.fileBtn.removeClass("pj_btn_hover")});if(E.p.accept){o.attr("accept",E.p.accept)}if(E.p.isMultiple){o.attr("multiple","multiple")}E.btnFile=o;var y=m;y.after(o);y.trigger("mouseleave").unbind().removeClass("fuj_customStyle_file").hide();y.attr("name",E.p.fileNameRule+(E.p.useRandomFileName?t:""));m=o;if(this.canXhr2){this.files.push(B)}(function(){var e=b("<tr></tr>");E.body_table.append(e.append(b("<td class='fuj_body_td1'></td>").append('<img src="'+(d.imgPath+"FileUpload/filetype/"+s+".gif")+'" onerror="this.src=\''+d.imgPath+"FileUpload/filetype/unknown.gif'\" >")).append(b("<td style='width:"+(E.p.width-63)+"px;"+(E.p.fileListLineHeight!=null?"line-height:"+E.p.fileListLineHeight+"px;":"")+"'></td>").append(y).append(C)).append(b("<td class='fuj_body_td2'></td>").append('<img title="删除" style="cursor:pointer;" src="'+(d.imgPath+"FileUpload/delete.gif")+'" >').click(function(){e.remove();var w=parseFloat(E.fileNum.text());w--;E.fileNum.text(w);if(E.canXhr2){c.arr.removeAt(E.files,b.inArray(B,E.files))}if(E.p.useRandomFileName){E.body_table.find("input[type=file]").each(function(n){b(this).attr("name",E.p.fileNameRule+(n+1))})}E.pbj.clear();E.fire("deleteFile",{fileName:C,exName:s})})));if(!E.p.hasItemBottom){e.find("td").css("border-bottom",0)}})();E.fire("addFile",{fileName:C,exName:s})}E.fileNum.text(t+F);if(c.isWebkit){E.divOut.width(E.p.width);var h=E.header_table.find("div.fuj_customStyle_btn");var p=h.width();h.width(p+1);setTimeout(function(){h.width(p)},1)}E.pbj.clear()}else{MBJ.alert("提示","您最多可选择"+E.p.maxSelects+"个文件。");if(c.isIE){var z=b('<form style="display:none;"></form>').prependTo(this.body).append(this.btnFile);z[0].reset();this.header_table.find("div.fuj_header_td3").prepend(this.btnFile);z.remove()}}},getFileNum:function(){return parseFloat(this.fileNum.text())},clear:function(e){this.fileNum.text(0);this.body_table.empty();if(!e){this.pbj.clear()}if(this.canXhr2){this.files.length=0}},upload:function(){var m=this;if(parseFloat(this.fileNum.text())>0){if(this.p.hideProgress){this.pbj.display(1)}this.pbj.clear();if(!this.canXhr2){var f=new Date().getTime()+Math.random().toFixed(6).substr(2);var n=this.body_form.attr("action");var j=n+(n.indexOf("?")==-1?"?":"&")+"progressGuid="+f;if(this.p.uploadParam){for(var g in this.p.uploadParam){j+="&"+g+"="+this.p.uploadParam[g]}}this.body_form.attr("action",j);this.body_form[0].submit();this.body_form.attr("action",n);if(this.p.getProgressFromServer){this.uploadProgress(f)}else{this.pbj.start()}}else{var q=new XMLHttpRequest();q.onload=function(o){m.pbj.setValue(100,!c.isSafari?50:null);m.uploadFinish(q.responseText)};q.error=function(o){m.fire("uploadError",{error:o})};q.upload.addEventListener("progress",function(o){if(o.lengthComputable){bytesUploaded=o.loaded;bytesTotal=o.total;var r=Math.round(o.loaded*100/o.total);m.pbj.setValue(r);if(r==100){}}},false);q.open("post",this.p.uploadPath,true);if(window.FormData){var h=new FormData();for(var k=0;k<this.files.length;k++){h.append(this.p.fileNameRule+(this.p.useRandomFileName?(k+1):""),this.files[k])}for(var g in this.p.uploadParam){h.append(g,this.p.uploadParam[g])}data=h;q.send(data)}else{if(this.files[0].getAsBinary){var e="-----------------------"+new Date().getTime();var p="\r\n";q.setRequestHeader("Content-Type","multipart/form-data; boundary="+e);data="--"+e+(function(){var r="";for(var o=0;o<m.files.length;o++){r+=p+'Content-Disposition: form-data; name="'+m.p.fileNameRule+(m.p.useRandomFileName?(o+1):"")+'"; filename="'+unescape(encodeURIComponent(m.files[o].name))+'"'+p+"Content-Type: "+m.files[o].type+p+p+m.files[o].getAsBinary()+p+"--"+e}return r})()+(function(){var s="";for(var r in m.p.uploadParam){s+=p+'Content-Disposition: form-data; name="'+r+'"'+p+p+m.p.uploadParam[r]+p+"--"+e}return s})()+"--";q.sendAsBinary(data)}}}}else{MBJ.alert("提示","请选择文件后上传。")}return this},uploadProgress:function(f){var e=this;setTimeout(function(){b.ajax({type:"GET",url:e.p.uploadProgressPath,data:{progressGuid:f},dataType:"json",cache:false,success:function(h){e.pbj.setValue(h.rate,50);var g=parseFloat(h.rate);if(g>=100){e.uploadFinish()}else{if(g==-1){e.pbj.clear();MBJ.alert("提示","获取进度错误!")}else{e.uploadProgress(f)}}}})},e.p.uploadProgressRate)},uploadFinish:function(e){this.pbj.clear();if(this.p.hideProgress){this.pbj.display(0)}this.clear(true);this.fire("allFinish",{data:e})},show:function(){this.isFirst=true;return this._super()},close:function(){if(this.p.fujType=="sl"){for(var e=0;e<FUJ.List.length;e++){if(FUJ.List[e].objId==this.objId){c.arr.removeAt(FUJ.List,e);break}}}this._super()},changeDrawTheme:function(){}});d.FUJ.show=function(e){return new d.FUJ(d.oBody,e).show()};d.FUJ.currentTheme="xtheme-black.css";d.FUJ.params={type:"tongzhi"};d.FUJ.List=[];this.pluginLoaded=function(f){var g=false;for(var e=0;e<FUJ.List.length;e++){if(FUJ.List[e].isFirst){FUJ.List[e].isFirst=false;if(FUJ.List[e].slCtl==null){g=true}}else{g=true}if(g){(function(h){h.slCtl=b("#FUJ_"+h.objId)[0];h.slCtl.Content.Files.FileAdded=function(){if(h.p.evts.addFile!=null){h.fire("addFile")}};h.slCtl.Content.Files.FileRemoved=function(){if(h.p.evts.deleteFile!=null){h.fire("deleteFile")}};h.slCtl.Content.Files.AllFilesFinished=function(){if(h.p.evts.allFinish!=null){h.fire("allFinish")}};h.slCtl.Content.Control.ExNameEvent=function(j){if(h.p.evts.selectEx!=null){h.fire("selectEx",{fName:j})}};h.fnS=function(){h.slCtl.Content.Files.StartUpload()};h.fnC=function(){h.slCtl.Content.Files.Clear();h.slCtl.Content.Files.TotalUploadedFiles=0};h.fnT=function(j){h.slCtl.Content.Control.ChangeTheme(j)};h.fnAP=function(j){h.slCtl.Content.Control.AlterParamF(j)};h.listName=h.slCtl.Content.Files.listFileName})(FUJ.List[e])}}};b.fn.extend({FileUploadJ:function(e){if(this&&this.length>0){return new d.FileUploadJ(this,c.FUJ_commonConfig?b.extend(true,c.clone(c.FUJ_commonConfig),e):e)}},FUJ:function(e){return b(this).FileUploadJ(e)}})});FJ.define("widget.AutoComplete",["widget.Tooltip"],function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.AutoCompleteJ=this.ACJ=d.AutoCompleteJ=d.ACJ=d.CJ.extend({init:function(e,g){var f=this;this.widthE=e.width();this._super(e,b.extend(true,{fjType:"ACJ",renderTo:"body",width:"auto",height:"auto",shiftWidth:4,shiftTop:e.height(),borderWidth:0,inputPName:"txtValue",delaySpeed:300,showSpeed:10,maxHeight:200,loadMode:"remote",data:[],dataLimit:100,showAllData:true,showOnFocus:true,onlyShowAllData:false,isOnlySelect:false,initLoadData:false,textField:"text",valueField:"value",actualTextField:"data-acj-text",actualValueField:"data-acj-value",textRule:"{0}",defaultText:null,defaultValue:null,itemAlign:null,autoTurn:false,scrollViewShift:0,colorParams:{},evts:{customUpdate:null}},g));this.input=e;this.input.attr("autocomplete","off");this.input.addClass("acj_input");this.initFn();return this},initFn:function(){var e=this;this._super();this.isFirstLoad=true;this.canHover=true;this.customUpdate=this.p.evts.customUpdate!=null;this.create();this.bindKeyUp();this.resetValue();this.needScrollView=c.isMobile&&!this.p.autoTurn;if(!this.customUpdate){if(this.p.showOnFocus){this.input.on("focus",function(f){if(!e.focusOnScroll){if(e.p.loadMode==="local"){if(!e.p.initLoadData||e.initLoaded){e.afterInput(true)}else{e.acjUl.html("<li></li>");e.display(1);e.fire("initLoadData")}}else{if(e.p.data&&e.p.data.length>0){e.display(1)}}}e.focusOnScroll=false})}}else{if(this.p.initLoadData){this.initLoadComplete(this.p.data)}if(this.needScrollView){this.input.on("focus",function(){e.scrollView()}).on("blur",function(){c.body.scrollTop=0})}}},create:function(){this._super();var f=this,g=this.customUpdate,e=this.p.width;this.divOut.addClass("acj").attr("id","ACJ_"+this.objId);if(e!=null&&e!=="auto"){this.widthE=e}this.acjUl=b("<ul></ul>").addClass("acj_ul");this.divOut.append(this.acjUl);if(!g){this.ttj=b(this.input).TTJ({renderTo:this.p.renderTo,showRendorBody:this.p.renderTo=="body"?false:true,imgLoadSrc:LMJ.loadImgSrc(10),showLoading:f.p.initLoadData?false:true,borderWidth:1,width:this.widthE+this.p.shiftWidth,height:"auto",hoverDirect:"bottom",shiftLeft:-1,shiftTop:this.p.shiftTop-3,hoverType:"click",hasShadow:true,onlyFirstLoad:true,loadSpeed:1,speed:1,showSpeed:this.p.showSpeed,isAcjClick:true,isRenderHF:false,autoTurn:this.p.autoTurn,zIndex:this.p.zIndex,closeCheckScroll:true,fnHtml:function(h){this.currentObj=f.input;this.bodyIn.css({overflowY:"auto",overflowX:"hidden"}).on("scroll",function(){c.lazyDo(function(){this.focusOnScroll=true;this.input.trigger("focus")},50,"acj_inputFocus",f)});this.divOut.addClass("acj_ttj");f.divOut.show();return f.divOut},colorParams:{bgColorBody:"transparent"},evts:{afterBodyLoad2:function(j,h){if(f.isFirstLoad){f.isFirstLoad=false;f.countHeight();f.countPosition(this)}if(f.p.loadMode=="local"&&f.p.initLoadData&&!f.initLoaded){this.p.showLoading=true;f.showLoading(true)}if(f.needScrollView){c.lazyDo(function(){f.scrollView()},300)}},afterShowFn:function(j,h){if(!f.isFirstLoad){f.countHeight();f.countPosition(this)}},afterCloseClick:function(j,h){if(f.p.loadMode=="local"&&f.p.isOnlySelect&&f.runCloseClick){f.runCloseClick=false;if(b.trim(f.input.val())!=""){f.input.val(f.input.attr(f.p.actualTextField))}else{f.resetValue()}}},afterClose:function(){if(f.needScrollView){c.body.scrollTop=0}}}})}return this},show:function(){var e=this.input.offset();this.divOut.css({width:this.input.width()+this.p.shiftWidth,left:e.left,top:e.top+this.input.height()+this.p.shiftTop});this.divOut.show()},bindKeyUp:function(){var e=this;this.input.on(c.isMobile?"input":"keyup",function(f){e.KeyUpFn(f)})},KeyUpFn:function(k){var j=this,h=this.customUpdate;switch(d.Evt.fix(k).key){case 13:if(!h){var m=this.acjUl.find("li.acj_selectedItem");if(m.length>0){m.trigger("click")}}break;case 27:if(!h){this.display(0);this.runCloseClick=true}break;case 38:if(!h&&!this.divOut.is(":hidden")){var f=this.acjUl.find("li");var n=this.acjUl.find("li.acj_selectedItem");if(n.length>0){var p=n.removeClass("acj_selectedItem").prev();p.addClass("acj_selectedItem");if(p.length>0){var o=p.position().top+this.ttj.bodyIn.scrollTop();if(o<this.ttj.divOut.height()+this.ttj.bodyIn.scrollTop()-20){this.ttj.bodyIn.scrollTop(o)}}}else{f.eq(f.length-1).addClass("acj_selectedItem");this.ttj.bodyIn.scrollTop(this.ttj.bodyIn[0].scrollHeight)}if(c.isFF||c.isWebkit){this.input.textPositionJ(this.input.val().length)}this.canHover=false}break;case 40:if(!h&&!this.divOut.is(":hidden")){var f=this.acjUl.find("li");var n=this.acjUl.find("li.acj_selectedItem");if(n.length>0){var g=n.removeClass("acj_selectedItem").next();g.addClass("acj_selectedItem");if(g.length>0){var o=g.position().top+this.ttj.bodyIn.scrollTop();if(o>this.ttj.divOut.height()+this.ttj.bodyIn.scrollTop()-20){this.ttj.bodyIn.scrollTop(o)}}}else{f.eq(0).addClass("acj_selectedItem");this.ttj.bodyIn.scrollTop(0)}this.canHover=false}break;default:c.lazyDo(function(){if(!h&&this.ttj.p.hasShadow&&d.isIEgt9){this.ttj.divOut.css("box-shadow","0px 0px 0px "+this.ttj.p.colorParams.shadow)}var e=this.input.val();if(e!=this.valL){this.afterInput()}this.valL=e},this.p.delaySpeed,"acj_delay",this);break}c.lazyDo(function(){this.canHover=true},200,"acj_canHover",this)},afterInput:function(g){var j=this;var n=this.input.val();if(this.p.loadMode==="local"){var m=[],e=null,k=function(){if(j.p.showAllData){m=j.p.data;e=true}};if(!g){if(n.length!=0&&!this.p.onlyShowAllData){for(var h=0,f=this.p.data.length;h<f;h++){if((this.p.data[h][this.p.textField]+"").toLowerCase().indexOf(n.toLowerCase())!=-1){m[m.length]=this.p.data[h]}}e=false;this.isAllLastTime=e}else{k()}}else{k()}if(this.isAllLastTime==null||!this.isAllLastTime||m.length==0){this.update(m)}else{this.display(1);this.runCloseClick=true}this.isAllLastTime=e}this.fire("afterInput",{input:n})},update:function(j,h,f){var n=this,g=j?j.length:0,o=this.p.dataLimit;if(h||this.p.loadMode==="remote"){this.p.data=j}if(o&&g>o){j=j.slice(0,o)}if(!this.customUpdate){if(g>0){var p=false;this.clearItems();for(var k=0,e=j.length;k<e;k++){(function(A){var y=n.p.textField,m=n.p.valueField,w=n.p.textRule,u=A[y],s=A[m];w=w.replace(/\{0\}/g,u);w=w.replace(/\{1\}/g,s);var z=b("<li class='acj-item' "+(n.p.itemAlign?"style='text-align:"+n.p.itemAlign+";'":"")+"><span class='acj-item-txt'>"+w+"</span></li>").bind("click",function(v){v.stopPropagation();var t=A[y],B=A[m];n.input.val(t);if(t!=null){n.input.attr(n.p.actualTextField,t)}else{n.input.attr(n.p.actualTextField,"")}if(B!=null){n.input.attr(n.p.actualValueField,B)}else{n.input.attr(n.p.actualValueField,"")}n.display(0);n.runCloseClick=false;n.fire("afterSelect",{txt:t,val:B});n.input.blur()});z.hover(function(){if(n.canHover){n.acjUl.find("li.acj_selectedItem").removeClass("acj_selectedItem");b(this).addClass("acj_selectedItem")}},function(){});n.acjUl.append(z);if(f!=null){if(p!=null){p=true}if(f===s){z.click();p=null}}})(j[k])}if(p){n.acjUl.children("li:eq(0)").click()}if(!h){this.display(1);if(c.isIE7){var q=this.ttj.bodyIn,r=q.width();q.width(r+1);setTimeout(function(){q.width(r)},200)}}}else{this.display(0)}}else{this.fire("customUpdate",{data:j})}n.runCloseClick=true},clearItems:function(){this.acjUl.empty()},resetValue:function(){if(this.p.defaultText!=null){this.input.val(this.p.defaultText);this.input.attr(this.p.actualTextField,this.p.defaultText)}if(this.p.defaultValue!=null){this.input.attr(this.p.actualValueField,this.p.defaultValue)}},showLoading:function(e){if(this.customUpdate){return}this.ttj.showLoad(e)},display:function(e){if(this.customUpdate){return}if(e===true||e===1||e==null){this.ttj.setVisible(true)}else{this.ttj.setVisible(false)}},initLoadComplete:function(e){this.p.data=e;if(e.length==0){this.clearItems()}this.initLoaded=true;this.isAllLastTime=null;this.showLoading(false);this.p.showLoading=false;this.afterInput(true)},countHeight:function(){var k=this.divOut.height(),f=this.p.maxHeight,j=this.ttj,g=j.pjBody,e=j.bodyIn,m=j.divOut;if(k<=f){g.css("height","auto");e.css("height","auto")}else{g.css("height",f);e.css("height",f)}},countPosition:function(f){var g=this.input.offset(),j=0,h=0,e=this.p.autoTurn;if(e){h=f.divOut.height()}if(e&&(g.top-b("html").scrollTop())>document.documentElement.clientHeight-h-20){j=g.top-h-f.p.shiftTop+9}else{j=g.top+this.input[0].offsetHeight/2+f.p.shiftTop}f.divOut.css("top",j)},scrollView:function(){this.input[0].scrollIntoView();var e=this.p.scrollViewShift;if(e){c.lazyDo(function(){c.body.scrollTop-=e})}}});b.fn.extend({AutoCompleteJ:function(e){if(this&&this.length>0){return new d.AutoCompleteJ(this,c.ACJ_commonConfig?b.extend(true,c.clone(c.ACJ_commonConfig),e):e)}},ACJ:function(e){return b(this).AutoCompleteJ(e)}})});FJ.define("widget.Pagination",["widget.AutoComplete"],function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.PaginationJ=this.PNJ=d.PaginationJ=d.PNJ=d.CJ.extend({init:function(e,f){this._super(e,b.extend(true,{fjType:"PNJ",renderTo:e,width:"auto",height:30,borderWidth:0,dataCount:0,noCount:false,pageSize:10,isSetPageSize:false,pageSizes:[15,30,50],storeName:null,pageCount:0,curPage:0,cpWidth:45,pageInputCache:true,sort:"",dir:"ASC",showOnInit:false,initDelay:300,pageInit:false,initData:{page:null,data:null,count:null,total:null},totalTxt:"条数据",url:null,urlData:{type:"Get"},btnGoName:"确定",hasPages:true,isLocal:false,isAutoPageLocal:false,data:null,showDataCount:true,showPageSize:true,showPageCount:true,showRefresh:true,renderToAcj:"body",colorParams:{bgColor:"transparent"},evts:{onPaging:null,preOnPage:null,finOnPage:null,preRefresh:function(h,g){if(typeof oDgj!="undefined"){oDgj.clearPageCache()}}}},f));this.initFn();return this},initFn:function(){this._super();if(this.p.noCount){this.countC=1;this.pagesC={};this.isComplete=false}if(c.isMobile){this.p.pageInputCache=false}this.create();if(this.p.storeName){var e=c.LocalStorage.getItem({key:"pnj_pagesize_"+this.p.storeName});if(e){this.p.pageSize=e}}if(!this.p.showDataCount){this.pnjDataCount.hide()}if(!this.p.showPageSize){this.pnjPageSize.hide()}if(!this.p.showPageCount){this.pnjPageCount.hide()}if(!this.p.showRefresh){this.pnjRefresh.hide()}if(this.p.showOnInit){this.show()}else{if(this.p.pageInit){this.show(1)}else{this.setVisible(false)}}this.sbnj=this.divOut.ScrollButtonJ({targetElem:this.pnjBody,top:2,hasAnimate:true})},create:function(){this._super();var g=this,h=this.p.hasPages,f=null;this.divOut.addClass("pnj").attr("id","PNJ_"+this.objId).css({height:this.p.height,width:this.p.width});this.pnjBody=f=b('<div class="pnj-body"></div>');if(c.isMobile){f.addClass("fj-mobile")}this.pnjDataCount=b('<div class="pnj_info"></div>');this.pnjDataCountN=b("<span>"+this.p.dataCount+"</span>");this.pnjDataCount.append("共").append(this.pnjDataCountN).append(this.p.totalTxt);this.pnjPageSize=b('<div class="pnj_info"></div>');if(this.p.isSetPageSize){this.pnjPageSizeN=b("<select class='fj-form-elem pnj_pageSize'></select>");for(var e=0;e<this.p.pageSizes.length;e++){this.pnjPageSizeN.append("<option value="+this.p.pageSizes[e]+">"+this.p.pageSizes[e]+"</option>")}this.pnjPageSizeN.val(this.p.pageSize);this.pnjPageSizeN.bind("change",function(){g.p.pageSize=g.pnjPageSizeN.val();if(g.p.storeName){c.LocalStorage.setItem({key:"pnj_pagesize_"+g.p.storeName,value:g.p.pageSize})}if(!g.p.noCount){var j=parseInt(g.p.dataCount%g.p.pageSize>0?g.p.dataCount/g.p.pageSize+1:g.p.dataCount/g.p.pageSize,10);if(g.p.curPage<=j){g.refresh()}else{g.refresh(j)}}else{g.refresh()}})}else{this.pnjPageSizeN=b("<span>"+this.p.pageSize+"</span>")}this.pnjPageSize.append("每页").append(this.pnjPageSizeN).append("条");this.pnjPageCount=b('<div class="pnj_info"></div>');this.pnjPageCountN=b("<span>"+this.p.pageCount+"</span>");this.pnjPageCount.append("共").append(this.pnjPageCountN).append("页");this.pnjFirst=b('<div class="pnj_btn pnj_btn_first" title="首页">首页</div>').bind("click",function(){if(g.pnjFirst.hasClass("pnj_btn_first")){g.onPage(1)}}).addClass("pnj_btn_first_g");this.pnjPrev=b('<div class="pnj_btn pnj_btn_prev" title="上一页"></div>').bind("click",function(){if(g.pnjPrev.hasClass("pnj_btn_prev")){g.onPage(parseFloat(g.p.curPage)-1)}}).addClass("pnj_btn_prev_g");this.pnjNext=b('<div class="pnj_btn pnj_btn_next" title="下一页"></div>').bind("click",function(){if(g.pnjNext.hasClass("pnj_btn_next")){g.onPage(parseFloat(g.p.curPage)+1)}}).addClass("pnj_btn_next_g");this.pnjLast=b('<div class="pnj_btn pnj_btn_last" title="末页">末页</div>').bind("click",function(){if(g.pnjLast.hasClass("pnj_btn_last")){g.onPage(g.p.pageCount)}}).addClass("pnj_btn_last_g");this.pnjRefresh=b('<div class="pnj-btn-refresh" title="刷新"><i class="icon-refresh" ></i></div>').bind("click",function(){g.refresh(g.p.curPage)});this.pnjTxt=b('<div class="pnj_txt"></div>');this.pnjCurPage=b('<input class="fj-form-elem pnj_curPage" type="text" value="'+this.p.curPage+'" />').bind("focus",function(){var j=this;setTimeout(function(){j.select()},50)}).bind("blur",function(){if(g.p.dataCount>0){if(!d.RX.ep.num.test(this.value)){this.value=1}}}).width(this.p.cpWidth);if(this.p.pageInputCache){this.acjCp=this.pnjCurPage.ACJ({renderTo:this.p.renderToAcj,width:this.p.cpWidth,shiftTop:17,maxHeight:150,loadMode:"local",dataLimit:100,itemAlign:"right",autoTurn:true,zIndex:this.p.zIndex,evts:{afterSelect:function(k,j){g.onPage(Number(j.val))}}})}this.pnjGo=b('<button type="button" class="btnj pnj-btn-go">'+this.p.btnGoName+"</button>").bind("click",function(){if(g.p.dataCount>0){var j=parseFloat(g.pnjCurPage.val());if(j<=parseFloat(g.p.pageCount)){g.onPage(j)}else{g.onPage(g.p.pageCount)}}});this.pnjTxt.append('<div class="pnj_txt_div">到</div>').append(this.pnjCurPage).append('<div class="pnj_txt_div">页</div>').append(this.pnjGo);this.divOut.append(f.append(this.pnjFirst).append(this.pnjPrev));if(h){this.pnjPages=b('<div class="pnj_pages"></div>');f.append(this.pnjPages)}else{f.append(this.pnjTxt)}f.append(this.pnjNext).append(this.pnjLast).append(this.pnjPageCount).append(this.pnjDataCount).append(this.pnjPageSize);if(h){f.append(this.pnjTxt)}f.append(this.pnjRefresh);return this},show:function(f){var e=this;this._super();if(!f){setTimeout(function(){e.onPage(1)},this.p.initDelay)}else{var g=this.p.initData;this.fire("beforeInitData",g);this.update(g.page,g.data,g.count,g.total,null,null,1)}return this},onPage:function(n,o){var k=this;this.pnjRefresh.find("i").swapClassJ("icon-refresh","icon-spinner");this.fire("preOnPage");this.p.urlData=b.extend(this.p.urlData,{curPage:n,pageSize:this.p.pageSize,sort:this.p.sort,dir:this.p.dir});var f,h;if(this.p.isLocal){var q=parseInt(this.p.pageSize,10);n=parseInt(n,10);f=this.p.data;h=[];if(f&&f.length>0){for(var j=(n-1)*q,g=j+q;j<g;j++){var m=f[j];if(m){h.push(m)}}}}var e={page:n,data:h,total:(f!=null?f.length:null),ex:o};if(!this.p.isAutoPageLocal){if(this.p.evts.OnPaging){this.fire("OnPaging",e)}else{this.fire("onPaging",e)}}else{if(e.data&&e.data.length>0){this.update(e.page,e.data,e.data.length,e.total)}else{this.update(e.page,[],0,0)}}c.lazyDo(function(){k.sbnj.checkShow()},500)},update:function(u,o,s,v,p,m,f){var r=this;if(!r.p.noCount){r.p.dataCount=v}else{if(!r.pagesC[u]){r.pagesC[u]=1;r.countC+=s;if(s<this.p.pageSize){r.countC-=1;r.isComplete=true}r.p.dataCount=r.countC}}var h=this.pnjDataCountN,e=this.p.dataCount;if(!r.p.noCount){h.text(e)}else{h.text((e>0&&!r.isComplete)?e-1:e)}if(this.p.isSetPageSize){this.pnjPageSizeN.val(this.p.pageSize)}else{this.pnjPageSizeN.text(this.p.pageSize)}this.p.pageCount=parseInt(this.p.dataCount%this.p.pageSize>0?this.p.dataCount/this.p.pageSize+1:this.p.dataCount/this.p.pageSize,10);this.pnjPageCountN.text(this.p.pageCount);var g=false;if(s>0){this.setPageC(u)}else{if(!r.p.noCount){this.setPageC(0)}else{if(u!=1){g=true}else{this.setPageC(0)}}}if(e>0){this.pnjFirst.removeClass("pnj_btn_first_g").addClass("pnj_btn_first");this.pnjPrev.removeClass("pnj_btn_prev_g").addClass("pnj_btn_prev");this.pnjNext.removeClass("pnj_btn_next_g").addClass("pnj_btn_next");this.pnjLast.removeClass("pnj_btn_last_g").addClass("pnj_btn_last");if(this.p.pageCount<=1){this.pnjFirst.removeClass("pnj_btn_first").addClass("pnj_btn_first_g");this.pnjPrev.removeClass("pnj_btn_prev").addClass("pnj_btn_prev_g");this.pnjNext.removeClass("pnj_btn_next").addClass("pnj_btn_next_g");this.pnjLast.removeClass("pnj_btn_last").addClass("pnj_btn_last_g")}else{if(this.p.curPage==1){this.pnjFirst.removeClass("pnj_btn_first").addClass("pnj_btn_first_g");this.pnjPrev.removeClass("pnj_btn_prev").addClass("pnj_btn_prev_g")}else{if(this.p.curPage==this.p.pageCount){this.pnjNext.removeClass("pnj_btn_next").addClass("pnj_btn_next_g");this.pnjLast.removeClass("pnj_btn_last").addClass("pnj_btn_last_g")}}}if(this.p.hasPages){this.pnjPages.empty();if(this.p.pageCount<=10){for(var n=1;n<=this.p.pageCount;n++){(function(k){r.pnjPages.append(b("<div class='"+(n==r.p.curPage?"pnj_pagesNoC":"pnj_pagesNo")+"' title='第"+n+"页'>"+n+"</div>").click(function(){r.onPage(k)}))})(n)}}else{if(this.p.curPage<=4){for(var n=1;n<=this.p.curPage+2;n++){(function(k){r.pnjPages.append(b("<div class='"+(n==r.p.curPage?"pnj_pagesNoC":"pnj_pagesNo")+"' title='第"+n+"页'>"+n+"</div>").click(function(){r.onPage(k)}))})(n)}this.pnjPages.append(b("<div>...</div>").click(function(){r.onPage(parseFloat(r.p.curPage)+1)}));this.pnjPages.append(b("<div class='"+(r.p.pageCount==r.p.curPage?"pnj_pagesNoC":"pnj_pagesNo")+"' title='第"+r.p.pageCount+"页'>"+this.p.pageCount+"</div>").click(function(){r.onPage(r.p.pageCount)}))}else{if(this.p.curPage>4&&this.p.curPage<=this.p.pageCount-3){this.pnjPages.append(b("<div class='"+(1==r.p.curPage?"pnj_pagesNoC":"pnj_pagesNo")+"' title='第1页'>1</div>").click(function(){r.onPage(1)}));this.pnjPages.append(b("<div>...</div>").click(function(){r.onPage(parseFloat(r.p.curPage)-1)}));for(var n=this.p.curPage-2;n<=this.p.curPage+2;n++){(function(k){r.pnjPages.append(b("<div class='"+(n==r.p.curPage?"pnj_pagesNoC":"pnj_pagesNo")+"' title='第"+n+"页'>"+n+"</div>").click(function(){r.onPage(k)}))})(n)}this.pnjPages.append(b("<div>...</div>").click(function(){r.onPage(parseFloat(r.p.curPage)+1)}));this.pnjPages.append(b("<div class='"+(r.p.pageCount==r.p.curPage?"pnj_pagesNoC":"pnj_pagesNo")+"' title='第"+r.p.pageCount+"页'>"+this.p.pageCount+"</div>").click(function(){r.onPage(r.p.pageCount)}))}else{if(this.p.curPage>this.p.pageCount-3){this.pnjPages.append(b("<div class='"+(1==r.p.curPage?"pnj_pagesNoC":"pnj_pagesNo")+"' title='第1页'>1</div>").click(function(){r.onPage(1)}));this.pnjPages.append(b("<div>...</div>").click(function(){r.onPage(parseFloat(r.p.curPage)-1)}));for(var n=this.p.curPage-2;n<=this.p.pageCount;n++){(function(k){r.pnjPages.append(b("<div class='"+(n==r.p.curPage?"pnj_pagesNoC":"pnj_pagesNo")+"' title='第"+n+"页'>"+n+"</div>").click(function(){r.onPage(k)}))})(n)}}}}}}}else{this.pnjFirst.removeClass("pnj_btn_first").addClass("pnj_btn_first_g");this.pnjPrev.removeClass("pnj_btn_prev").addClass("pnj_btn_prev_g");this.pnjNext.removeClass("pnj_btn_next").addClass("pnj_btn_next_g");this.pnjLast.removeClass("pnj_btn_last").addClass("pnj_btn_last_g");if(this.p.hasPages){this.pnjPages.empty()}}if(this.p.pageInputCache&&!g){var q=this.acjCp.p.data,t=false;this.acjCp.isAllLastTime=false;for(var j=0;j<q.length;j++){if(q[j].text==u){t=true;break}}if(!t){q.push({text:u,value:u})}q.sort(function(w,k){return c.Sort.compareNumber(w.text,k.text,true)})}if(!f){this.fire("finOnPage",{data:o,page:u,total:v,dataF:p,params:m,noOpe:g})}this.stopRefresh()},refresh:function(f,g,e){this.fire("preRefresh",{page:f,data:this.p.data,isInit:g,ex:e});if(this.p.pageInputCache){this.acjCp.p.data.length=0}if(this.p.noCount){f=1;this.isComplete=false;this.pagesC={};this.countC=1;this.p.dataCount=0}if(f==null){this.onPage(this.p.curPage,e)}else{this.onPage(f,e)}},clearData:function(e){this.update(e?e:1,[],0,0)},setPageC:function(e){this.p.curPage=e;this.pnjCurPage.val(e)},stopRefresh:function(){this.pnjRefresh.find("i").swapClassJ("icon-spinner","icon-refresh")}});b.fn.extend({PaginationJ:function(e){if(this&&this.length>0){return new d.PaginationJ(this,c.PNJ_commonConfig?b.extend(true,c.clone(c.PNJ_commonConfig),e):e)}},PNJ:function(e){return b(this).PaginationJ(e)}});d.PNJ.imgSrc=d.imgPath+"Pagination/"});FJ.define("widget.Tree",["widget.Datagrid"],function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.TreeJ=this.TJ=d.TreeJ=d.TJ=d.DGJ.extend({init:function(e,f){this.nodeConfig=b.extend(true,{isTreeField:true,text:"treeField",dataIndex:"id"},f.nodeConfig);delete f.nodeConfig;this._super(e,b.extend(true,{fjType:"TJ",renderTo:e,width:200,height:"100%",defaultH:20,isTree:true,isTreeGrid:true,treeLocalLazy:true,asyncLoadTree:true,treeUrl:"",isReservedSbjH:false,isRowHighlight:c.isMobile?false:true,hasFloatBtn:false,canColumeDD:false,canSelectRow:true,canSelectRowR:false,hasSelectColor:true,collapseAnimate:true,hasRowContextMenu:true,canFullScreen:false,canRefreshPage:false,hasChk:true,isCheckOne:true,csvFileName:"导出树数据",nodeWrap:false,columns:[this.nodeConfig],evts:{beforeTreeLoad:null,treeLoad:null,cilckNode:null}},f));return this},initFn:function(){this._super()},create:function(){this._super();this.divOut.attr("id","TJ_"+this.objId).addClass("tj")}});b.fn.extend({TreeJ:function(e){if(this&&this.length>0){return new d.TreeJ(this,c.TJ_commonConfig?b.extend(true,c.clone(c.TJ_commonConfig),e):e)}},TJ:function(e){return b(this).TreeJ(e)}})});FJ.define("widget.Accordion",["widget.Panel"],function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.AccordionJ=this.ADJ=d.AccordionJ=d.ADJ=d.CJ.extend({init:function(e,f){this._super(e,b.extend(true,{fjType:"ADJ",renderTo:e,width:200,height:"100%",borderWidth:null,btnHeight:31,itemHeight:40,minConHeight:38,minAreaHeight:null,selectIndex:0,expandOne:true,showLoading:false,itemAlign:"center",itemMarginLeft:0,showHead:true,showFoot:true,hasSound:false,hasSelectColor:true,hasAnimate:c.isMobile?0:1,isAutoSetHeight:true,emptyTxt:"没有数据",items:[],colorParams:{borderOut:null,bgColor:"#fff"},evts:{afterItemPageLoad:null}},f));this.initFn();return this},initFn:function(){var h=this,e=this.p.expandOne,m=this.p.isAutoSetHeight;this._super();this.create();this.show();if(m||!this.p.items.length){var n=this.p.btnHeight*2;if(!this.p.showHead){n-=this.p.btnHeight}if(!this.p.showFoot){n-=this.p.btnHeight}this.contentArea.css("height",m?this.divOut.height()-n:"auto")}if(this.p.minAreaHeight){this.contentArea.css("min-height",this.p.minAreaHeight)}if(!this.p.expandOne){this.contentArea.css("overflow-y","auto");this.hasScroll=true}this.items=[];this.panels=[];if(this.p.items&&this.p.items.length>0){for(var g=0,f=this.p.items.length;g<f;g++){var o=this.p.items[g],k=e?g==h.p.selectIndex:o.expand,j=b('<div class="adj_item'+((this.p.hasSelectColor&&k)?" adj_selectedItem":"")+'"><span style="margin-left:'+this.p.itemMarginLeft+'px">'+o.text+"</span></div>").css({height:this.p.itemHeight,lineHeight:this.p.itemHeight+"px",textAlign:this.p.itemAlign});this.contentArea.append(j);this.items[this.items.length]=j;(function(u,s,t){j.onGestureJ(c.Evt.click,function(){if(!h.isOnChange){h.expandItem(u)}});if(s.html==null){s.html=""}if(s.canSearch){s.html=StringBuilderJ.join(["<div class='adj-auto-complete'>","<div class='adj-search-icon glaj-col-pc1'><i class='icon-search'></i></div>","<div class='adj-search-input glaj-col-pc11'><input type='text' class='fj-form-elem'></div>","</div><div class='adj-search-list'>"+s.html+"</div>"]);s.noBodyScroll=true}var q=s.isAutoSetHeight,p=s.isAutoSetWidth,r=h.contentArea.PJ(b.extend(true,s,{width:"100%",height:t?(q===false?"auto":h.countContentH()):0,divState:t?"max":"min",showOnInit:t?true:false,showHead:false,showFoot:false,bodyPadding:s.bodyPadding,isRenderHF:false,borderWidth:s.borderWidth==null?{t:0,r:0,b:t?1:0,l:0}:s.borderWidth,isInitShow:false,onlyFirstLoad:s.loadOnShow?null:true,showLoading:h.p.showLoading,isAutoSetHeight:q==null?true:q,isAutoSetWidth:p==null?true:p,loadType:(function(){var v;if(s.iframe){v="iframe"}else{if(s.ajax){v="ajax"}else{v="html"}}return v})(),bodyInId:s.id,iframeId:s.iframeId,bodyUrl:s.url,ajaxParams:s.ajaxParams,fnHtml:function(){return s.html},colorParams:{bgColor:"#ffffff"},evts:b.extend(true,{afterBodyLoadTabs:function(w,v){h.fire("afterItemPageLoad",{no:g,panel:this,type:v})},afterBodyLoadI:function(){if(s.canSearch){var v=this.bodyIn;v.css("padding-top",30).addClass("fj-border-box");this.searchInput=v.find("input.fj-form-elem");this.searchList=v.find("div.adj-search-list")}}},s.evts)}));if(!r.p.isAutoSetHeight){r.bodyIn.css("height","auto")}h.panels[h.panels.length]=r})(g,o,k)}if(this.hasScroll){this.panels[this.p.selectIndex].reLayout()}}else{this.clearData()}this.initLayer=true},create:function(){var e=this;this._super();this.adjId="ADJ_"+this.objId;this.divOut.attr("id",this.adjId).addClass("adj").css({width:this.p.width,height:this.p.height});if(this.p.showHead){this.headBtn=b('<div class="adj_headBtn adj_btnNoHover"><div class="adj_headBtnArrow'+(this.p.hasAnimate?" fj-has-animate":"")+'"><i class="icon-chevron-up" ></i></div></div>').hover(function(){b(this).swapClassJ("adj_btnNoHover","adj_btnHover")},function(){b(this).swapClassJ("adj_btnHover","adj_btnNoHover")}).onGestureJ(c.Evt.click,function(){if(e.items.length&&!e.isOnChange){var f=e.p.selectIndex-1;if(f<0){f=0}e.expandItem(f)}})}this.contentArea=b('<div class="adj_contentArea"></div>');if(this.p.showFoot){this.footBtn=b('<div class="adj_footBtn adj_btnNoHover"><div class="adj_footBtnArrow'+(this.p.hasAnimate?" fj-has-animate":"")+'"><i class="icon-chevron-down" ></i></div></div>').hover(function(){b(this).swapClassJ("adj_btnNoHover","adj_btnHover")},function(){b(this).swapClassJ("adj_btnHover","adj_btnNoHover")}).onGestureJ(c.Evt.click,function(){if(e.items.length&&!e.isOnChange){var g=e.p.selectIndex+1,f=e.items.length;if(g>=f){g=f-1}e.expandItem(g)}})}if(this.p.showHead){this.divOut.append(this.headBtn)}this.divOut.append(this.contentArea);if(this.p.showFoot){this.divOut.append(this.footBtn)}return this},expandItem:function(q){var e=this.p.expandOne;if(e&&q==this.p.selectIndex){return}var j=this,s=this.p.items[q],m=this.items[q],o=this.panels[q],h=this.p.hasSelectColor,t=s.expand,f=true;this.isOnChange=true;if(this.p.hasSound){c.lazyDo(function(){c.playSound.play("adj1")})}if(!s.expand){o.show();if(!o.p.isAutoSetHeight){o.divOut.height(0);o.pjBody.show();var g=o.pjBody[0].scrollHeight,k=this.p.minConHeight,n=0;if(k==null||g>=k){n=g}else{n=k;f=false}o.p.height=n}else{o.p.height=this.countContentH()}}o.bodyIn.css("overflow","hidden");if(e){var r=this.panels[this.p.selectIndex];r.bodyIn.css("overflow","hidden");r.maxMin(function(){this.divOut.css("border-width",0);r.bodyIn.css("overflow","auto")})}o.maxMin(function(){if(!t){this.divOut.css("border-bottom-width",1)}else{this.divOut.css("border-width",0)}if(f&&this.p.divState==="max"&&!this.p.isAutoSetHeight){this.divOut.css("height","auto")}o.bodyIn.css("overflow","auto");j.isOnChange=false;j.fire("afterExpandItem",{no:q,panel:o})});if(e){var p=this.items[this.p.selectIndex];if(h){p.removeClass("adj_selectedItem")}p.expand=false}if(!s.expand){if(h){m.addClass("adj_selectedItem")}if(!e){s.expand=true}}else{if(h){m.removeClass("adj_selectedItem")}s.expand=false}this.p.selectIndex=q},clearData:function(){this.p.items.length=0;if(this.p.showFoot&&!c.isIE7){this.footBtn.css("margin-top",-1)}this.contentArea.html(b('<div style="width:100%;height:100%;position:absolute;text-align:center;"></div>').append(b('<div style="width:100%;height:100%;" class="cj_divCvFd1"></div>').append(b('<div style="text-align:center;" class="cj_divCvFd2"></div>').append(b('<div class="cj_divCvFd3 adj_emptyTxt"></div>').append(this.p.emptyTxt)))))},countContentH:function(){var f;if(!this.hasScroll){var e=this.p.items.length,f=this.contentArea.height()-this.p.itemHeight*e-(c.isIE7?e:(1+e));if(f<this.p.minConHeight){f=this.p.minConHeight;this.contentArea.css("overflow-y","auto");this.hasScroll=true}}else{f=this.p.minConHeight}return f}});b.fn.extend({AccordionJ:function(e){if(this&&this.length>0){return new d.AccordionJ(this,c.ADJ_commonConfig?b.extend(true,c.clone(c.ADJ_commonConfig),e):e)}},ADJ:function(e){return b(this).AccordionJ(e)}});d.ADJ.imgSrc=d.imgPath+"Accordion/";if(!c.isMobile){c.playSound.init("adj1",d.mediaPath+"XP_kaishi.wav")}});FJ.define("widget.Slider",["widget.DragDrop"],function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.SliderJ=this.SDJ=d.SliderJ=d.SDJ=d.CJ.extend({init:function(e,f){this._super(e,b.extend(true,{fjType:"SDJ",renderTo:e,width:350,height:18,borderWidth:0,range:[0,100],step:10,start:0,dir:"h",thumbSize:{w:18,h:18},axisSize:{h:10,w:10,t:4,l:4},evts:{sliderChange:null}},f));this.initFn();return this},initFn:function(){var g=this;this._super();this.create();var f=this.p.dir;if(f=="h"){this.totalPx=this.divOut.innerWidth()-this.p.thumbSize.w}else{this.totalPx=this.divOut.innerHeight()-this.p.thumbSize.h}var e=(this.p.step/this.p.range[1])*this.totalPx;this.stepPx=e;this.lastPos=0;this.oDrj=this.thumb.DRJ({oContainer:this.divOut,dir:this.p.dir,posType:"position",hasProxy:true,hideProxy:true,setPosByProxy:false,cursor:"auto",evts:{drag:function(k,j){var h,n;if(f=="h"){h=j.x;n="left"}else{h=j.y;n="top"}if(h%e>=Math.floor(e/2)||h<=0){var m=Math.ceil(h/e);if(m!=g.lastPos){g.lastPos=m;this.p.oRoot.css(n,m*e);g.fire("sliderChange",{v:m,x:j.x,y:j.y})}}},dragStart:function(j,h){},dragEnd:function(j,h){}}});this.show()},create:function(){this._super();this.sdjId="SDJ_"+this.objId;this.divOut.attr("id",this.sdjId).addClass("sdj");this.thumb=b('<div class="sdj_thumb"></div>').css({width:this.p.thumbSize.w,height:this.p.thumbSize.h});this.axis=b('<div class="sdj_axis"></div>');if(this.p.dir=="h"){this.axis.css({width:this.p.width-this.p.thumbSize.w,height:this.p.axisSize.h,top:this.p.axisSize.t,left:this.p.thumbSize.w/2})}else{this.axis.css({width:this.p.axisSize.w,height:this.p.height-this.p.thumbSize.h,top:this.p.thumbSize.h/2,left:this.p.axisSize.l})}this.divOut.append(this.thumb).append(this.axis)}});b.fn.extend({SliderJ:function(e){if(this&&this.length>0){return new d.SliderJ(this,c.SDJ_commonConfig?b.extend(true,c.clone(c.SDJ_commonConfig),e):e)}},SDJ:function(e){return b(this).SliderJ(e)}})});FJ.define("widget.Marquee",function(){var d,c,a=d=c=this.flareJ,b=this.jQuery;this.MarqueeJ=this.MQJ=d.MarqueeJ=d.MQJ=d.CJ.extend({init:function(e,f){this._super(e,b.extend(true,{fjType:"MQJ",renderTo:e,width:200,height:20,borderWidth:0,direct:"h",top:null,left:null,stopByHover:true,stopRange:20,stopTime:35,speed:35,content:null,isInitStart:true,step:1,evts:{}},f));this.initFn();return this},initFn:function(){var e=this;this._super();this.sign=0,this.pause=false,this.stopscroll=false,this.create()},create:function(){var e=this;this._super(true);this.mqjId="MQJ_"+this.objId;this.divOut.attr("id",this.mqjId).addClass("mqj");if(this.p.width!=null){this.divOut.css("width",this.p.width)}if(this.p.height!=null){this.divOut.css("height",this.p.height)}this.contentDiv=b("<div></div>");if(this.p.direct=="v"){this.contentDiv.addClass("mqj_content_v")}else{this.contentDiv.addClass("mqj_content_h")}this.divOut.append(this.contentDiv.append(this.p.content));this.setScrollInit();if(this.p.stopByHover){this.contentDiv.hover(function(){e.stopscroll=true},function(){e.stopscroll=false})}if(!this.p.isInitStart){this.stopscroll=true}this.scroll()},scroll:function(){var e=this;setTimeout(function(){if(e.stopscroll){setTimeout(arguments.callee,e.pause?e.p.stopTime:e.p.speed);return}var g=e.p.step;e.pause=false;if(e.sign>=e.p.stopRange){e.pause=true;e.sign=0}e.sign=e.sign+g;if(e.p.direct=="v"){var f=e.contentDiv[0],j=parseInt(f.style.marginTop,10);j=j-g;f.style.marginTop=j+"px";if(j<=f.clientHeight*-1){f.style.marginTop=e.divOut[0].clientHeight+"px";e.sign=0}}else{var f=e.contentDiv[0],h=parseInt(f.style.marginLeft,10);h=h-g;f.style.marginLeft=h+"px";if(h<=f.clientWidth*-1){f.style.marginLeft=e.divOut[0].clientWidth+"px";e.sign=0}}setTimeout(arguments.callee,e.pause?e.p.stopTime:e.p.speed)},e.p.stopTime)},start:function(){this.stopscroll=false},stop:function(){this.stopscroll=true},setContent:function(e){this.p.content=e;this.contentDiv.html(this.p.content);this.sign=0;this.pause=false;this.setScrollInit()},setScrollInit:function(){if(this.p.direct=="v"){if(this.p.top!=null){this.contentDiv.css("margin-top",this.p.top)}else{this.contentDiv.css("margin-top",this.divOut.height())}}else{if(this.p.left!=null){this.contentDiv.css("margin-left",this.p.left)}else{this.contentDiv.css("margin-left",this.divOut.width())}}},clear:function(){this.setContent("");this.stop()}});b.fn.extend({MarqueeJ:function(e){if(this&&this.length>0){return new d.MarqueeJ(this,c.MQJ_commonConfig?b.extend(true,c.clone(c.MQJ_commonConfig),e):e)}},MQJ:function(e){return b(this).MarqueeJ(e)}})});